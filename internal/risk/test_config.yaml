# Automated Integration Test Suite Configuration

# Test Environment Configuration
environment: "test"
timeout: "30m"
parallel_execution: true
max_concurrency: 4

# Paths
test_data_path: "./test-data"
report_output_path: "./test-reports"

# Logging
log_level: "info"  # debug, info, warn, error

# Test Categories
test_categories:
  - "integration"
  - "api"
  - "database"
  - "error_handling"
  - "performance"
  - "security"

# Feature Flags
enable_performance: true
enable_security: true
enable_load_testing: false
enable_smoke_tests: true
enable_regression_tests: true

# Environment Variables
environment_variables:
  TEST_MODE: "true"
  LOG_LEVEL: "info"
  DB_POOL_SIZE: "10"
  API_TIMEOUT: "30s"

# Database Configuration
database:
  host: "localhost"
  port: 5432
  database: "kyb_test"
  username: "kyb_user"
  password: "kyb_password"
  ssl_mode: "disable"
  max_connections: 10
  connection_timeout: "30s"
  query_timeout: "60s"

# API Configuration
api:
  base_url: "http://localhost:8080"
  timeout: "30s"
  auth_token: ""
  rate_limit: 100
  retry_attempts: 3
  retry_delay: "1s"
  headers:
    Content-Type: "application/json"
    User-Agent: "KYB-Test-Suite/1.0"

# Performance Testing Configuration
performance:
  enable_benchmarks: true
  benchmark_duration: "5m"
  load_test_duration: "10m"
  concurrent_users: 100
  ramp_up_time: "1m"
  ramp_down_time: "1m"
  throughput_threshold: 1000  # requests per second
  latency_threshold: "100ms"
  error_rate_threshold: 0.01  # 1%

# Security Testing Configuration
security:
  enable_vulnerability_scanning: true
  enable_penetration_testing: false
  enable_owasp_tests: true
  sql_injection_tests: true
  xss_tests: true
  csrf_tests: true
  authentication_tests: true
  authorization_tests: true

# Test Data Configuration
test_data:
  generate_dynamic_data: true
  data_cleanup: true
  data_isolation: true
  max_test_records: 10000
  test_data_retention: "24h"

# Reporting Configuration
reporting:
  formats:
    - "json"
    - "html"
    - "markdown"
    - "junit"
  include_screenshots: false
  include_logs: true
  include_metrics: true
  include_performance_data: true
  include_security_data: true

# Notification Configuration
notifications:
  enable_notifications: false
  email_notifications: false
  slack_notifications: false
  webhook_notifications: false
  notification_on_failure: true
  notification_on_success: false

# CI/CD Integration
ci_cd:
  enable_ci_integration: true
  fail_on_test_failure: true
  generate_artifacts: true
  upload_reports: false
  report_retention_days: 30

# Test Suites Configuration
test_suites:
  integration:
    enabled: true
    timeout: "15m"
    parallel: true
    categories:
      - "end_to_end"
      - "workflow"
      - "data_flow"
  
  api:
    enabled: true
    timeout: "10m"
    parallel: true
    categories:
      - "endpoints"
      - "authentication"
      - "authorization"
      - "validation"
  
  database:
    enabled: true
    timeout: "10m"
    parallel: false
    categories:
      - "crud_operations"
      - "transactions"
      - "constraints"
      - "performance"
  
  error_handling:
    enabled: true
    timeout: "5m"
    parallel: true
    categories:
      - "validation_errors"
      - "database_errors"
      - "api_errors"
      - "service_errors"
  
  performance:
    enabled: true
    timeout: "20m"
    parallel: false
    categories:
      - "load_testing"
      - "stress_testing"
      - "benchmarking"
      - "scalability"
  
  security:
    enabled: true
    timeout: "10m"
    parallel: true
    categories:
      - "vulnerability_scanning"
      - "authentication"
      - "authorization"
      - "data_protection"

# Test Execution Strategy
execution_strategy:
  mode: "sequential"  # sequential, parallel, mixed
  retry_failed_tests: true
  max_retries: 2
  retry_delay: "5s"
  stop_on_first_failure: false
  continue_on_error: true

# Resource Management
resources:
  max_memory_usage: "2GB"
  max_cpu_usage: 80  # percentage
  max_disk_usage: "1GB"
  cleanup_resources: true
  resource_monitoring: true

# Test Environment Setup
environment_setup:
  create_test_database: true
  seed_test_data: true
  setup_test_services: true
  configure_test_environment: true
  cleanup_after_tests: true

# Test Data Management
data_management:
  backup_before_tests: false
  restore_after_tests: false
  isolate_test_data: true
  generate_test_data: true
  cleanup_test_data: true
  data_retention_policy: "delete_after_tests"

# Monitoring and Observability
monitoring:
  enable_metrics: true
  enable_tracing: true
  enable_logging: true
  metrics_endpoint: "http://localhost:9090/metrics"
  tracing_endpoint: "http://localhost:14268/api/traces"
  log_level: "info"
  log_format: "json"

# Quality Gates
quality_gates:
  minimum_pass_rate: 95.0  # percentage
  maximum_failure_rate: 5.0  # percentage
  maximum_execution_time: "30m"
  minimum_test_coverage: 80.0  # percentage
  maximum_memory_usage: "2GB"
  maximum_cpu_usage: 80.0  # percentage

# Test Categories and Priorities
test_priorities:
  critical:
    - "authentication"
    - "authorization"
    - "data_integrity"
    - "core_functionality"
  
  high:
    - "api_endpoints"
    - "database_operations"
    - "error_handling"
    - "performance"
  
  medium:
    - "ui_components"
    - "integration_flows"
    - "security_scanning"
    - "load_testing"
  
  low:
    - "edge_cases"
    - "stress_testing"
    - "compatibility"
    - "documentation"

# Test Execution Schedule
schedule:
  smoke_tests:
    enabled: true
    frequency: "on_commit"
    timeout: "5m"
  
  regression_tests:
    enabled: true
    frequency: "daily"
    timeout: "30m"
  
  performance_tests:
    enabled: true
    frequency: "weekly"
    timeout: "60m"
  
  security_tests:
    enabled: true
    frequency: "weekly"
    timeout: "30m"
  
  full_test_suite:
    enabled: true
    frequency: "on_release"
    timeout: "120m"
