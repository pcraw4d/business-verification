# Granular Feature Flags Configuration
# This file contains environment variables for controlling granular feature flags

# Service-level toggles
ENABLE_PYTHON_ML_SERVICE=true
ENABLE_GO_RULE_ENGINE=true
ENABLE_API_GATEWAY=true

# Individual model toggles - Classification Models
ENABLE_BERT_CLASSIFICATION=true
ENABLE_DISTILBERT_CLASSIFICATION=true
ENABLE_CUSTOM_NEURAL_NET=false

# Individual model toggles - Risk Detection Models
ENABLE_BERT_RISK_DETECTION=true
ENABLE_ANOMALY_DETECTION=true
ENABLE_PATTERN_RECOGNITION=true

# Individual model toggles - Rule-based Systems
ENABLE_KEYWORD_MATCHING=true
ENABLE_MCC_CODE_LOOKUP=true
ENABLE_BLACKLIST_CHECK=true

# Model configuration
DEFAULT_MODEL_VERSION=v1.0
FALLBACK_TO_RULES=true
ROLLOUT_PERCENTAGE=100
AB_TEST_ENABLED=false

# Performance and monitoring
ENABLE_METRICS=true
ENABLE_PERFORMANCE_TRACKING=true
ENABLE_MODEL_VERSIONING=true
ENABLE_CIRCUIT_BREAKER=true

# A/B testing configuration
AB_TESTING_ENABLED=false
AB_TEST_PERCENTAGE=10
AB_CONTROL_GROUP_PERCENTAGE=50
AB_TEST_GROUP_PERCENTAGE=50
AB_MINIMUM_SAMPLE_SIZE=1000
AB_STATISTICAL_SIGNIFICANCE=0.95

# Rollout configuration
GRADUAL_ROLLOUT_ENABLED=false
ROLLOUT_PERCENTAGE=100
ROLLOUT_INCREMENT=10
ROLLOUT_INTERVAL=3600
AUTO_ROLLBACK_ENABLED=true
ROLLBACK_THRESHOLD=0.05

# Feature flag management
FEATURE_FLAG_UPDATE_INTERVAL=60
REAL_TIME_UPDATES=true
FEATURE_FLAG_UPDATE_ENDPOINT=http://localhost:8080/api/v1/feature-flags/update
FEATURE_FLAG_UPDATE_API_KEY=your-api-key-here

# Performance tracking
PERFORMANCE_TRACKING_ENABLED=true
METRICS_RETENTION_DAYS=30

# Environment
ENVIRONMENT=development
DEFAULT_FALLBACK_ENABLED=true

# Granular Feature Flag Rollout Strategy
# 
# Phase 1: Development (All services enabled, models disabled by default)
# - ENABLE_PYTHON_ML_SERVICE=true
# - ENABLE_GO_RULE_ENGINE=true
# - ENABLE_BERT_CLASSIFICATION=false
# - ENABLE_DISTILBERT_CLASSIFICATION=false
# - ENABLE_CUSTOM_NEURAL_NET=false
# - FALLBACK_TO_RULES=true
#
# Phase 2: Internal Testing (Enable basic models)
# - ENABLE_BERT_CLASSIFICATION=true
# - ENABLE_DISTILBERT_CLASSIFICATION=true
# - ENABLE_KEYWORD_MATCHING=true
# - ENABLE_MCC_CODE_LOOKUP=true
# - ROLLOUT_PERCENTAGE=10
#
# Phase 3: Beta Testing (Enable risk detection models)
# - ENABLE_BERT_RISK_DETECTION=true
# - ENABLE_ANOMALY_DETECTION=true
# - ENABLE_PATTERN_RECOGNITION=true
# - ROLLOUT_PERCENTAGE=25
#
# Phase 4: Production Rollout (Enable A/B testing)
# - AB_TESTING_ENABLED=true
# - AB_TEST_PERCENTAGE=10
# - ROLLOUT_PERCENTAGE=50
#
# Phase 5: Full Production (Enable all features)
# - ENABLE_CUSTOM_NEURAL_NET=true
# - ROLLOUT_PERCENTAGE=100
# - AB_TEST_PERCENTAGE=50
#
# Rollback Strategy:
# - Set ROLLOUT_PERCENTAGE=0 to immediately rollback to rule-based system
# - Set FALLBACK_TO_RULES=true to ensure fallback
# - Monitor error rates and performance metrics
# - Use AUTO_ROLLBACK_ENABLED=true for automatic rollback on high error rates
#
# Monitoring:
# - Track response times for each model type
# - Monitor error rates and accuracy metrics
# - Track A/B test results and statistical significance
# - Monitor rollout progress and performance impact
#
# A/B Testing:
# - Use AB_TESTING_ENABLED=true to enable A/B testing
# - Set AB_TEST_PERCENTAGE to control traffic allocation
# - Monitor AB_STATISTICAL_SIGNIFICANCE for test validity
# - Use AB_MINIMUM_SAMPLE_SIZE to ensure statistical power
#
# Gradual Rollout:
# - Use GRADUAL_ROLLOUT_ENABLED=true for safe deployment
# - Set ROLLOUT_INCREMENT to control rollout speed
# - Use ROLLOUT_INTERVAL to control rollout timing
# - Monitor AUTO_ROLLBACK_ENABLED for automatic safety
