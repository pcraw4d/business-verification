# Production Environment Configuration for KYB Platform
# Secure, optimized configuration for production deployment

# Server Configuration
SERVER_PORT=8080
SERVER_HOST=0.0.0.0
SERVER_READ_TIMEOUT=30s
SERVER_WRITE_TIMEOUT=30s
SERVER_IDLE_TIMEOUT=60s
SERVER_MAX_HEADER_BYTES=1048576

# Authentication Configuration
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=168h
API_KEY_HEADER=X-API-Key
SESSION_TIMEOUT=3600s

# API Keys (comma-separated key:user_id pairs)
API_KEYS=${API_KEYS}

# Rate Limiting Configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_REQUESTS_PER_HOUR=10000
RATE_LIMIT_BURST_SIZE=100
RATE_LIMIT_BLOCK_DURATION=300s

# Exempt paths from authentication and rate limiting
AUTH_EXEMPT_PATHS=/health,/metrics,/api/v3/admin/rate-limit-stats,/api/v3/status
RATE_LIMIT_EXEMPT_PATHS=/health,/metrics,/api/v3/admin/rate-limit-stats,/api/v3/status

# Database Configuration
DATABASE_PROVIDER=supabase
SUPABASE_URL=${SUPABASE_URL}
SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
SUPABASE_SERVICE_ROLE_KEY=${SUPABASE_SERVICE_ROLE_KEY}
DATABASE_MAX_CONNECTIONS=100
DATABASE_MAX_IDLE_CONNECTIONS=10
DATABASE_CONNECTION_MAX_LIFETIME=3600s
DATABASE_CONNECTION_MAX_IDLE_TIME=300s

# Observability Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout,file
LOG_FILE_PATH=/app/logs/kyb-platform.log
LOG_MAX_SIZE=100MB
LOG_MAX_AGE=7
LOG_MAX_BACKUPS=10
LOG_COMPRESS=true
METRICS_ENABLED=true
TRACING_ENABLED=true

# OpenTelemetry Configuration
OTEL_ENDPOINT=${OTEL_ENDPOINT}
OTEL_SERVICE_NAME=kyb-platform-production
OTEL_SERVICE_VERSION=${VERSION}
OTEL_SAMPLE_RATE=0.1
OTEL_BATCH_SIZE=512
OTEL_BATCH_TIMEOUT=5s

# Monitoring Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=5s
METRICS_PORT=9090
METRICS_PATH=/metrics
PROMETHEUS_ENABLED=true

# Security Configuration
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=${CORS_ALLOWED_ORIGINS}
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type,X-API-Key,X-Requested-With
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400

# SSL/TLS Configuration
SSL_ENABLED=true
SSL_CERT_FILE=${SSL_CERT_FILE}
SSL_KEY_FILE=${SSL_KEY_FILE}
SSL_MIN_VERSION=1.2
SSL_CIPHER_SUITES=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256

# Cache Configuration
CACHE_ENABLED=true
CACHE_PROVIDER=redis
REDIS_URL=${REDIS_URL}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_DIAL_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s
CACHE_TTL=300s
CACHE_MAX_SIZE=1000

# External API Configuration
EXTERNAL_API_TIMEOUT=30s
EXTERNAL_API_RETRY_ATTEMPTS=3
EXTERNAL_API_RETRY_DELAY=1s
EXTERNAL_API_RETRY_BACKOFF=2.0
EXTERNAL_API_MAX_CONNECTIONS=100

# Business Logic Configuration
MAX_CONCURRENT_REQUESTS=1000
REQUEST_TIMEOUT=30s
DEFAULT_PAGE_SIZE=100
MAX_PAGE_SIZE=1000
BULK_OPERATION_LIMIT=10000
BULK_OPERATION_TIMEOUT=300s

# Feature Flags
FEATURE_V3_API_ENABLED=true
FEATURE_BUSINESS_INTELLIGENCE_ENABLED=true
FEATURE_ENTERPRISE_INTEGRATION_ENABLED=true
FEATURE_PERFORMANCE_MONITORING_ENABLED=true
FEATURE_ERROR_TRACKING_ENABLED=true
FEATURE_MERCHANT_PORTFOLIO_ENABLED=true
FEATURE_BULK_OPERATIONS_ENABLED=true
FEATURE_MERCHANT_COMPARISON_ENABLED=true

# Alerting Configuration
ALERTING_ENABLED=true
ALERTING_WEBHOOK_URL=${ALERTING_WEBHOOK_URL}
ALERTING_RETRY_ATTEMPTS=3
ALERTING_RETRY_DELAY=5s
ALERTING_TIMEOUT=10s
ALERTING_BATCH_SIZE=100

# Escalation Configuration
ESCALATION_ENABLED=true
ESCALATION_MAX_LEVELS=5
ESCALATION_DEFAULT_DELAY=5m
ESCALATION_CRITICAL_DELAY=1m
ESCALATION_WARNING_DELAY=15m

# Performance Configuration
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_METRICS_INTERVAL=60s
PERFORMANCE_OPTIMIZATION_ENABLED=true
PERFORMANCE_PROFILING_ENABLED=false
PERFORMANCE_PROFILING_PORT=6060

# Error Tracking Configuration
ERROR_TRACKING_ENABLED=true
ERROR_TRACKING_MAX_EVENTS=10000
ERROR_TRACKING_RETENTION_DAYS=30
ERROR_TRACKING_SAMPLE_RATE=1.0
ERROR_TRACKING_BATCH_SIZE=100

# Business Intelligence Configuration
BUSINESS_INTELLIGENCE_ENABLED=true
BUSINESS_METRICS_INTERVAL=300s
ANALYTICS_ENABLED=true
ANALYTICS_BATCH_SIZE=1000
ANALYTICS_FLUSH_INTERVAL=60s

# Enterprise Integration Configuration
ENTERPRISE_INTEGRATION_ENABLED=true
WEBHOOK_ENABLED=true
WEBHOOK_TIMEOUT=30s
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=5s
WEBHOOK_MAX_CONCURRENT=10

# Backup and Recovery Configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=24h
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true
BACKUP_STORAGE_PATH=/app/backups

# Maintenance Configuration
MAINTENANCE_MODE_ENABLED=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.
MAINTENANCE_START_TIME=
MAINTENANCE_END_TIME=

# Development and Debugging
DEBUG_MODE_ENABLED=false
PROFILING_ENABLED=false
PROFILING_PORT=6060
STACK_TRACE_ENABLED=false

# Merchant Portfolio Configuration
MERCHANT_PORTFOLIO_MAX_MERCHANTS=10000
MERCHANT_PORTFOLIO_PAGE_SIZE=100
MERCHANT_PORTFOLIO_SEARCH_TIMEOUT=5s
MERCHANT_PORTFOLIO_BULK_TIMEOUT=300s

# Session Management Configuration
SESSION_MANAGEMENT_ENABLED=true
SESSION_TIMEOUT=3600s
SESSION_CLEANUP_INTERVAL=300s
SESSION_MAX_CONCURRENT=1000

# Compliance Configuration
COMPLIANCE_ENABLED=true
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555
AML_COMPLIANCE_ENABLED=true
FATF_COMPLIANCE_ENABLED=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
REFERRER_POLICY=strict-origin-when-cross-origin

# Content Security Policy
CSP_ENABLED=true
CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https:; frame-ancestors 'none';

# Environment Variables
ENVIRONMENT=production
VERSION=${VERSION}
BUILD_DATE=${BUILD_DATE}
GIT_COMMIT=${GIT_COMMIT}
DEPLOYMENT_ID=${DEPLOYMENT_ID}
