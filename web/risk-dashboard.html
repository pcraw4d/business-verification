<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KYB Platform - Risk Assessment Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="components/navigation.js"></script>
    <script src="components/merchant-context.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease-in-out;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        /* Risk Score Gauge Styles */
        .risk-gauge {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }
        
        .gauge-background {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                #ef4444 0deg,
                #f97316 72deg,
                #eab308 144deg,
                #22c55e 216deg,
                #3b82f6 288deg,
                #ef4444 360deg
            );
            position: relative;
        }
        
        .gauge-inner {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 160px;
            height: 160px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .gauge-needle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 2px;
            height: 80px;
            background: #1f2937;
            transform-origin: bottom center;
            border-radius: 1px;
            transition: transform 0.5s ease-in-out;
        }
        
        .gauge-needle::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: -3px;
            width: 8px;
            height: 8px;
            background: #1f2937;
            border-radius: 50%;
        }
        
        /* Enhanced Risk Level Colors with Gradients */
        .risk-low { 
            background: linear-gradient(135deg, #10b981, #059669);
            border: 2px solid #047857;
            color: white;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        .risk-medium { 
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: 2px solid #b45309;
            color: white;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }
        .risk-high { 
            background: linear-gradient(135deg, #f97316, #ea580c);
            border: 2px solid #c2410c;
            color: white;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
        }
        .risk-critical { 
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: 2px solid #b91c1c;
            color: white;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
            animation: criticalPulse 2s infinite;
        }
        
        @keyframes criticalPulse {
            0%, 100% { 
                opacity: 1;
                transform: scale(1);
            }
            50% { 
                opacity: 0.9;
                transform: scale(1.02);
            }
        }
        
        /* Enhanced Risk Level Badges */
        .risk-badge {
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease-in-out;
            cursor: pointer;
        }
        
        .risk-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease-in-out;
        }
        
        .risk-badge:hover::before {
            left: 100%;
        }
        
        .risk-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        /* Risk Level Icons */
        .risk-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-right: 8px;
            transition: all 0.3s ease-in-out;
        }
        
        .risk-icon-low { 
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #16a34a;
            box-shadow: 0 2px 8px rgba(34, 197, 94, 0.2);
        }
        .risk-icon-medium { 
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #d97706;
            box-shadow: 0 2px 8px rgba(234, 179, 8, 0.2);
        }
        .risk-icon-high { 
            background: linear-gradient(135deg, #fed7aa, #fdba74);
            color: #ea580c;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.2);
        }
        .risk-icon-critical { 
            background: linear-gradient(135deg, #fecaca, #fca5a5);
            color: #dc2626;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.2);
            animation: iconPulse 2s infinite;
        }
        
        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* Risk Level Background Colors for Cards */
        .risk-bg-low { 
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 1px solid #bbf7d0;
        }
        .risk-bg-medium { 
            background: linear-gradient(135deg, #fffbeb, #fef3c7);
            border: 1px solid #fde68a;
        }
        .risk-bg-high { 
            background: linear-gradient(135deg, #fff7ed, #fed7aa);
            border: 1px solid #fdba74;
        }
        .risk-bg-critical { 
            background: linear-gradient(135deg, #fef2f2, #fecaca);
            border: 1px solid #fca5a5;
        }
        
        /* Interactive Risk Level Tooltips */
        .risk-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            max-width: 300px;
            white-space: normal;
        }
        
        .risk-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #1f2937;
        }
        
        .risk-tooltip.show {
            opacity: 1;
        }
        
        .risk-tooltip-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: #f9fafb;
        }
        
        .risk-tooltip-content {
            color: #d1d5db;
            line-height: 1.4;
        }
        
        .risk-tooltip-score {
            font-weight: 600;
            color: #fbbf24;
        }
        
        .risk-tooltip-impact {
            margin-top: 6px;
            padding-top: 6px;
            border-top: 1px solid #374151;
            font-size: 11px;
            color: #9ca3af;
        }
        
        /* Tooltip positioning for different elements */
        .risk-badge {
            position: relative;
        }
        
        .risk-icon {
            position: relative;
        }
        
        .progress-fill {
            position: relative;
        }
        
        /* Risk Heat Map Styles */
        .risk-heatmap {
            display: grid;
            gap: 8px;
            padding: 16px;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }
        
        .heatmap-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .heatmap-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
        }
        
        .heatmap-title i {
            margin-right: 8px;
            color: #3b82f6;
        }
        
        .heatmap-legend {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 12px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }
        
        .heatmap-category {
            background: white;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
        }
        
        .heatmap-category:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .category-name {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }
        
        .category-score {
            font-weight: 700;
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 4px;
            color: white;
        }
        
        .heatmap-factors {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 6px;
        }
        
        .heatmap-factor {
            aspect-ratio: 1;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            position: relative;
            overflow: hidden;
        }
        
        .heatmap-factor:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        .heatmap-factor::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.2) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease-in-out;
        }
        
        .heatmap-factor:hover::before {
            transform: translateX(100%);
        }
        
        /* Heat map color scales */
        .heat-low { background: linear-gradient(135deg, #10b981, #059669); }
        .heat-medium-low { background: linear-gradient(135deg, #84cc16, #65a30d); }
        .heat-medium { background: linear-gradient(135deg, #eab308, #d97706); }
        .heat-medium-high { background: linear-gradient(135deg, #f97316, #ea580c); }
        .heat-high { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .heat-critical { background: linear-gradient(135deg, #dc2626, #b91c1c); }
        
        /* Heat map tooltip */
        .heatmap-tooltip {
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .heatmap-tooltip.show {
            opacity: 1;
        }
        
        .heatmap-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 4px solid transparent;
            border-top-color: #1f2937;
        }
        
        /* Risk Trend Indicators */
        .risk-trend {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .trend-improving {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #166534;
            border: 1px solid #86efac;
        }
        
        .trend-stable {
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .trend-rising {
            background: linear-gradient(135deg, #fecaca, #fca5a5);
            color: #991b1b;
            border: 1px solid #f87171;
        }
        
        .trend-icon {
            width: 12px;
            height: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
        }
        
        .trend-arrow-up {
            color: #dc2626;
            animation: trendPulse 2s infinite;
        }
        
        .trend-arrow-down {
            color: #16a34a;
            animation: trendPulse 2s infinite;
        }
        
        .trend-arrow-right {
            color: #6b7280;
        }
        
        @keyframes trendPulse {
            0%, 100% { 
                opacity: 1;
                transform: scale(1);
            }
            50% { 
                opacity: 0.7;
                transform: scale(1.1);
            }
        }
        
        /* Trend Chart Mini */
        .trend-chart-mini {
            width: 40px;
            height: 20px;
            position: relative;
            margin-left: 8px;
        }
        
        .trend-line {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #10b981, #3b82f6);
            border-radius: 1px;
        }
        
        .trend-line::before {
            content: '';
            position: absolute;
            top: -1px;
            left: 0;
            right: 0;
            height: 4px;
            background: inherit;
            border-radius: 2px;
            opacity: 0.3;
        }
        
        .trend-points {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        
        .trend-point {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #3b82f6;
            border-radius: 50%;
            border: 1px solid white;
        }
        
        /* Trend Change Indicators */
        .trend-change {
            display: inline-flex;
            align-items: center;
            gap: 2px;
            font-size: 10px;
            font-weight: 600;
            margin-left: 4px;
        }
        
        .trend-change.positive {
            color: #16a34a;
        }
        
        .trend-change.negative {
            color: #dc2626;
        }
        
        .trend-change.neutral {
            color: #6b7280;
        }
        
        /* Enhanced Risk Cards with Trends */
        .risk-card-with-trend {
            position: relative;
            overflow: hidden;
        }
        
        .risk-card-with-trend::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #10b981, #3b82f6, #f59e0b, #ef4444);
            opacity: 0.8;
        }
        
        .trend-overlay {
            position: absolute;
            top: 8px;
            right: 8px;
            z-index: 10;
        }
        
        /* Risk Radar Chart Styles */
        .risk-radar-container {
            background: white;
            border-radius: 12px;
            padding: 24px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-top: 24px;
        }
        
        .radar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .radar-title {
            font-size: 20px;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .radar-title i {
            color: #3b82f6;
            font-size: 24px;
        }
        
        .radar-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .radar-toggle {
            display: flex;
            background: #f1f5f9;
            border-radius: 8px;
            padding: 4px;
        }
        
        .radar-toggle button {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        
        .radar-toggle button.active {
            background: white;
            color: #1e293b;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .radar-chart-wrapper {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }
        
        .radar-chart {
            position: relative;
            width: 350px;
            height: 350px;
        }
        
        .radar-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .radar-circle {
            position: absolute;
            border: 1px solid #e2e8f0;
            border-radius: 50%;
            opacity: 0.3;
        }
        
        .radar-circle:nth-child(1) { width: 70px; height: 70px; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .radar-circle:nth-child(2) { width: 140px; height: 140px; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .radar-circle:nth-child(3) { width: 210px; height: 210px; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .radar-circle:nth-child(4) { width: 280px; height: 280px; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .radar-circle:nth-child(5) { width: 350px; height: 350px; top: 0; left: 0; }
        
        .radar-axis {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 2px;
            height: 175px;
            background: linear-gradient(to bottom, transparent, #e2e8f0, transparent);
            transform-origin: bottom center;
            opacity: 0.4;
        }
        
        .radar-labels {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .radar-label {
            position: absolute;
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            text-align: center;
            transform: translate(-50%, -50%);
        }
        
        .radar-data-area {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        
        .radar-polygon {
            fill: rgba(59, 130, 246, 0.2);
            stroke: #3b82f6;
            stroke-width: 2;
            transition: all 0.3s ease-in-out;
        }
        
        .radar-polygon:hover {
            fill: rgba(59, 130, 246, 0.3);
            stroke-width: 3;
        }
        
        .radar-points {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .radar-point {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #3b82f6;
            border: 2px solid white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .radar-point:hover {
            transform: translate(-50%, -50%) scale(1.3);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .radar-legend {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 24px;
            flex-wrap: wrap;
        }
        
        .legend-item-radar {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #64748b;
        }
        
        .legend-color-radar {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .radar-tooltip {
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .radar-tooltip.show {
            opacity: 1;
        }
        
        .radar-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 4px solid transparent;
            border-top-color: #1f2937;
        }
        
        /* Risk Level Confidence Indicators */
        .confidence-indicator {
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .confidence-high {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #166534;
            border: 1px solid #86efac;
        }
        
        .confidence-medium {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #d97706;
            border: 1px solid #fbbf24;
        }
        
        .confidence-low {
            background: linear-gradient(135deg, #fecaca, #fca5a5);
            color: #991b1b;
            border: 1px solid #f87171;
        }
        
        .confidence-icon {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            position: relative;
        }
        
        .confidence-icon::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: currentColor;
        }
        
        .confidence-icon.high::before {
            animation: confidencePulse 2s infinite;
        }
        
        .confidence-icon.medium::before {
            animation: confidencePulse 1.5s infinite;
        }
        
        .confidence-icon.low::before {
            animation: confidencePulse 1s infinite;
        }
        
        @keyframes confidencePulse {
            0%, 100% { 
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            50% { 
                opacity: 0.7;
                transform: translate(-50%, -50%) scale(1.2);
            }
        }
        
        /* Confidence Meter */
        .confidence-meter {
            position: relative;
            width: 60px;
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.8s ease-in-out;
            position: relative;
        }
        
        .confidence-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: confidenceShimmer 2s infinite;
        }
        
        @keyframes confidenceShimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .confidence-fill.high { 
            background: linear-gradient(90deg, #10b981, #059669);
            width: 90%;
        }
        .confidence-fill.medium { 
            background: linear-gradient(90deg, #f59e0b, #d97706);
            width: 65%;
        }
        .confidence-fill.low { 
            background: linear-gradient(90deg, #ef4444, #dc2626);
            width: 40%;
        }
        
        /* Confidence Tooltip */
        .confidence-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            margin-bottom: 4px;
        }
        
        .confidence-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 4px solid transparent;
            border-top-color: #1f2937;
        }
        
        .confidence-tooltip.show {
            opacity: 1;
        }
        
        /* Enhanced Risk Cards with Confidence */
        .risk-card-confidence {
            position: relative;
        }
        
        .confidence-overlay {
            position: absolute;
            top: 8px;
            left: 8px;
            z-index: 10;
        }
        
        .confidence-details {
            position: absolute;
            bottom: 8px;
            right: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Confidence Score Display */
        .confidence-score {
            font-size: 10px;
            color: #6b7280;
            font-weight: 500;
        }
        
        .confidence-score.high { color: #16a34a; }
        .confidence-score.medium { color: #d97706; }
        .confidence-score.low { color: #dc2626; }
        
        /* Industry Benchmark Comparison Styles */
        .benchmark-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-top: 24px;
        }
        
        .benchmark-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .benchmark-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .benchmark-title i {
            color: #3b82f6;
            font-size: 20px;
        }
        
        .benchmark-industry-selector {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #64748b;
        }
        
        .benchmark-select {
            padding: 4px 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 12px;
            background: white;
        }
        
        .benchmark-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
        }
        
        .benchmark-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
        }
        
        .benchmark-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .benchmark-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .benchmark-category {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }
        
        .benchmark-comparison {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .benchmark-better {
            color: #16a34a;
            background: #dcfce7;
            padding: 2px 6px;
            border-radius: 4px;
        }
        
        .benchmark-worse {
            color: #dc2626;
            background: #fecaca;
            padding: 2px 6px;
            border-radius: 4px;
        }
        
        .benchmark-similar {
            color: #d97706;
            background: #fef3c7;
            padding: 2px 6px;
            border-radius: 4px;
        }
        
        .benchmark-chart {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .benchmark-bar {
            flex: 1;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }
        
        .benchmark-current {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            border-radius: 4px;
            transition: width 0.8s ease-in-out;
        }
        
        .benchmark-industry {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            border-radius: 4px;
            opacity: 0.7;
            transition: width 0.8s ease-in-out;
        }
        
        .benchmark-labels {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: #64748b;
            margin-top: 4px;
        }
        
        .benchmark-scores {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            font-weight: 600;
        }
        
        .benchmark-current-score {
            color: #3b82f6;
        }
        
        .benchmark-industry-score {
            color: #10b981;
        }
        
        .benchmark-difference {
            font-size: 11px;
            color: #64748b;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e5e7eb;
        }
        
        .benchmark-insight {
            font-size: 11px;
            color: #6b7280;
            font-style: italic;
            margin-top: 4px;
        }
        
        /* Benchmark Legend */
        .benchmark-legend {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 20px;
            padding-top: 16px;
            border-top: 1px solid #e5e7eb;
        }
        
        .legend-item-benchmark {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: #64748b;
        }
        
        .legend-color-benchmark {
            width: 12px;
            height: 8px;
            border-radius: 2px;
        }
        
        .legend-current {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        }
        
        .legend-industry {
            background: linear-gradient(90deg, #10b981, #059669);
        }
        
        /* Benchmark Tooltip */
        .benchmark-tooltip {
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .benchmark-tooltip.show {
            opacity: 1;
        }
        
        .benchmark-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 4px solid transparent;
            border-top-color: #1f2937;
        }
        
        /* Risk Level Threshold Display Styles */
        .threshold-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-top: 24px;
        }
        
        .threshold-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .threshold-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .threshold-title i {
            color: #8b5cf6;
            font-size: 20px;
        }
        
        .threshold-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #64748b;
        }
        
        .threshold-switch {
            position: relative;
            width: 40px;
            height: 20px;
            background: #d1d5db;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .threshold-switch.active {
            background: #8b5cf6;
        }
        
        .threshold-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }
        
        .threshold-switch.active::after {
            transform: translateX(20px);
        }
        
        .threshold-scale {
            position: relative;
            height: 60px;
            background: linear-gradient(90deg, 
                #16a34a 0%, 
                #16a34a 25%, 
                #d97706 25%, 
                #d97706 50%, 
                #dc2626 50%, 
                #dc2626 75%, 
                #991b1b 75%, 
                #991b1b 100%);
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .threshold-marker {
            position: absolute;
            top: 0;
            width: 3px;
            height: 100%;
            background: #1f2937;
            border-radius: 2px;
            transform: translateX(-50%);
            transition: left 0.8s ease-in-out;
            box-shadow: 0 0 8px rgba(31, 41, 55, 0.5);
        }
        
        .threshold-marker::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid #1f2937;
        }
        
        .threshold-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 16px;
            font-size: 12px;
            color: #64748b;
        }
        
        .threshold-levels {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .threshold-level {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
            cursor: pointer;
        }
        
        .threshold-level:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .threshold-level.active {
            border-color: #8b5cf6;
            background: #faf5ff;
        }
        
        .threshold-level-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .threshold-level-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
            font-weight: 600;
        }
        
        .threshold-level-icon.low {
            background: linear-gradient(135deg, #16a34a, #15803d);
        }
        
        .threshold-level-icon.medium {
            background: linear-gradient(135deg, #d97706, #b45309);
        }
        
        .threshold-level-icon.high {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
        }
        
        .threshold-level-icon.critical {
            background: linear-gradient(135deg, #991b1b, #7f1d1d);
        }
        
        .threshold-level-name {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }
        
        .threshold-level-range {
            font-size: 11px;
            color: #64748b;
            margin-bottom: 8px;
        }
        
        .threshold-level-description {
            font-size: 11px;
            color: #6b7280;
            line-height: 1.4;
            margin-bottom: 8px;
        }
        
        .threshold-level-actions {
            font-size: 10px;
            color: #8b5cf6;
            font-weight: 500;
        }
        
        .threshold-details {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
            margin-top: 16px;
        }
        
        .threshold-details-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .threshold-details-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }
        
        .threshold-details-content {
            font-size: 12px;
            color: #6b7280;
            line-height: 1.5;
        }
        
        .threshold-details-list {
            list-style: none;
            padding: 0;
            margin: 8px 0;
        }
        
        .threshold-details-list li {
            padding: 4px 0;
            font-size: 11px;
            color: #64748b;
            position: relative;
            padding-left: 16px;
        }
        
        .threshold-details-list li::before {
            content: 'â€¢';
            position: absolute;
            left: 0;
            color: #8b5cf6;
            font-weight: bold;
        }
        
        .threshold-alert {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 6px;
            padding: 12px;
            margin-top: 12px;
        }
        
        .threshold-alert-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .threshold-alert-icon {
            color: #dc2626;
            font-size: 14px;
        }
        
        .threshold-alert-title {
            font-weight: 600;
            color: #dc2626;
            font-size: 12px;
        }
        
        .threshold-alert-message {
            font-size: 11px;
            color: #991b1b;
            line-height: 1.4;
        }
        
        /* Interactive Risk Level Controls Styles */
        .controls-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-top: 24px;
        }
        
        .controls-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .controls-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .controls-title i {
            color: #10b981;
            font-size: 20px;
        }
        
        .controls-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #64748b;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse 2s infinite;
        }
        
        .status-indicator.offline {
            background: #dc2626;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-panel {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
        }
        
        .control-panel:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .control-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .control-panel-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }
        
        .control-toggle {
            position: relative;
            width: 44px;
            height: 24px;
            background: #d1d5db;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .control-toggle.active {
            background: #10b981;
        }
        
        .control-toggle::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .control-toggle.active::after {
            transform: translateX(20px);
        }
        
        .control-slider {
            margin: 12px 0;
        }
        
        .control-slider-label {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #64748b;
            margin-bottom: 8px;
        }
        
        .control-slider-input {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .control-slider-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(16, 185, 129, 0.3);
            transition: all 0.3s ease;
        }
        
        .control-slider-input::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }
        
        .control-slider-input::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(16, 185, 129, 0.3);
        }
        
        .control-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        .control-button {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            color: #374151;
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .control-button:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }
        
        .control-button.primary {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }
        
        .control-button.primary:hover {
            background: #059669;
            border-color: #059669;
        }
        
        .control-button.danger {
            background: #dc2626;
            color: white;
            border-color: #dc2626;
        }
        
        .control-button.danger:hover {
            background: #b91c1c;
            border-color: #b91c1c;
        }
        
        .control-feedback {
            margin-top: 12px;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 500;
            display: none;
        }
        
        .control-feedback.success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }
        
        .control-feedback.error {
            background: #fef2f2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
        
        .control-feedback.info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #bfdbfe;
        }
        
        .live-updates {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 16px;
            margin-top: 20px;
        }
        
        .live-updates-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .live-updates-title {
            font-weight: 600;
            color: #0c4a6e;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .live-updates-title i {
            color: #0284c7;
        }
        
        .update-frequency {
            font-size: 11px;
            color: #0369a1;
            background: #e0f2fe;
            padding: 4px 8px;
            border-radius: 4px;
        }
        
        .update-log {
            max-height: 120px;
            overflow-y: auto;
            font-size: 11px;
            color: #0c4a6e;
        }
        
        .update-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
            border-bottom: 1px solid #e0f2fe;
        }
        
        .update-entry:last-child {
            border-bottom: none;
        }
        
        .update-time {
            color: #64748b;
            font-size: 10px;
        }
        
        .update-message {
            flex: 1;
            margin-left: 8px;
        }
        
        .update-status {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #10b981;
        }
        
        .update-status.error {
            background: #dc2626;
        }
        
        .update-status.warning {
            background: #d97706;
        }
        
        /* Risk Level History and Timeline Styles */
        .history-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-top: 24px;
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .history-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .history-title i {
            color: #7c3aed;
            font-size: 20px;
        }
        
        .history-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .history-period-selector {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #64748b;
        }
        
        .history-select {
            padding: 4px 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 12px;
            background: white;
        }
        
        .history-view-toggle {
            display: flex;
            background: #f1f5f9;
            border-radius: 6px;
            padding: 2px;
        }
        
        .history-view-button {
            padding: 6px 12px;
            border: none;
            background: transparent;
            color: #64748b;
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .history-view-button.active {
            background: white;
            color: #7c3aed;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .history-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .history-summary {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
        }
        
        .history-summary-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
            margin-bottom: 12px;
        }
        
        .history-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .history-metric {
            text-align: center;
            padding: 8px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }
        
        .history-metric-value {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 4px;
        }
        
        .history-metric-label {
            font-size: 10px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .history-trend {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }
        
        .history-trend-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
            font-weight: 600;
        }
        
        .history-trend-icon.improving {
            background: linear-gradient(135deg, #16a34a, #15803d);
        }
        
        .history-trend-icon.stable {
            background: linear-gradient(135deg, #d97706, #b45309);
        }
        
        .history-trend-icon.declining {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
        }
        
        .history-trend-text {
            flex: 1;
            font-size: 11px;
            color: #374151;
        }
        
        .history-trend-value {
            font-weight: 600;
            color: #1e293b;
        }
        
        .timeline-container {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .timeline-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .timeline {
            position: relative;
            padding-left: 20px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #7c3aed, #a855f7, #c084fc);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            padding-left: 20px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -12px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: white;
            border: 3px solid #7c3aed;
            box-shadow: 0 2px 4px rgba(124, 58, 237, 0.3);
        }
        
        .timeline-item.low::before {
            border-color: #16a34a;
            box-shadow: 0 2px 4px rgba(22, 163, 74, 0.3);
        }
        
        .timeline-item.medium::before {
            border-color: #d97706;
            box-shadow: 0 2px 4px rgba(217, 119, 6, 0.3);
        }
        
        .timeline-item.high::before {
            border-color: #dc2626;
            box-shadow: 0 2px 4px rgba(220, 38, 38, 0.3);
        }
        
        .timeline-item.critical::before {
            border-color: #991b1b;
            box-shadow: 0 2px 4px rgba(153, 27, 27, 0.3);
        }
        
        .timeline-content {
            background: white;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .timeline-date {
            font-size: 11px;
            color: #64748b;
            font-weight: 500;
        }
        
        .timeline-score {
            font-size: 14px;
            font-weight: 700;
            color: #1e293b;
        }
        
        .timeline-details {
            font-size: 11px;
            color: #6b7280;
            line-height: 1.4;
        }
        
        .timeline-change {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 10px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 4px;
            margin-top: 4px;
        }
        
        .timeline-change.positive {
            color: #16a34a;
            background: #dcfce7;
        }
        
        .timeline-change.negative {
            color: #dc2626;
            background: #fecaca;
        }
        
        .timeline-change.neutral {
            color: #d97706;
            background: #fef3c7;
        }
        
        .history-chart {
            grid-column: 1 / -1;
            background: white;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
            margin-top: 20px;
        }
        
        .history-chart-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .history-chart-container {
            height: 200px;
            position: relative;
            background: #f8fafc;
            border-radius: 6px;
            padding: 12px;
        }
        
        .history-chart-line {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        .history-chart-svg {
            width: 100%;
            height: 100%;
        }
        
        .history-chart-path {
            fill: none;
            stroke: #7c3aed;
            stroke-width: 3;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        
        .history-chart-points {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .history-chart-point {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #7c3aed;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(124, 58, 237, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .history-chart-point:hover {
            transform: scale(1.5);
            box-shadow: 0 4px 8px rgba(124, 58, 237, 0.4);
        }
        
        .history-chart-point.low {
            background: #16a34a;
            box-shadow: 0 2px 4px rgba(22, 163, 74, 0.3);
        }
        
        .history-chart-point.medium {
            background: #d97706;
            box-shadow: 0 2px 4px rgba(217, 119, 6, 0.3);
        }
        
        .history-chart-point.high {
            background: #dc2626;
            box-shadow: 0 2px 4px rgba(220, 38, 38, 0.3);
        }
        
        .history-chart-point.critical {
            background: #991b1b;
            box-shadow: 0 2px 4px rgba(153, 27, 27, 0.3);
        }
        
        .history-chart-tooltip {
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .history-chart-tooltip.show {
            opacity: 1;
        }
        
        .history-chart-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 4px solid transparent;
            border-top-color: #1f2937;
        }
        
        /* Risk Level Impact Indicators and Business Implications Styles */
        .impact-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-top: 24px;
        }
        
        .impact-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .impact-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .impact-title i {
            color: #7c3aed;
            font-size: 20px;
        }
        
        .impact-severity {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .impact-severity.low {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #16a34a;
        }
        
        .impact-severity.medium {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #d97706;
        }
        
        .impact-severity.high {
            background: linear-gradient(135deg, #fecaca, #fca5a5);
            color: #dc2626;
        }
        
        .impact-severity.critical {
            background: linear-gradient(135deg, #fecaca, #f87171);
            color: #991b1b;
        }
        
        .impact-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .impact-indicators {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
        }
        
        .impact-indicators-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .impact-indicators-title i {
            color: #7c3aed;
            font-size: 16px;
        }
        
        .impact-indicator {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }
        
        .impact-indicator:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .impact-indicator-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            font-weight: 600;
        }
        
        .impact-indicator-icon.financial {
            background: linear-gradient(135deg, #16a34a, #15803d);
        }
        
        .impact-indicator-icon.operational {
            background: linear-gradient(135deg, #d97706, #b45309);
        }
        
        .impact-indicator-icon.compliance {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
        }
        
        .impact-indicator-icon.reputational {
            background: linear-gradient(135deg, #7c3aed, #6d28d9);
        }
        
        .impact-indicator-content {
            flex: 1;
        }
        
        .impact-indicator-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 13px;
            margin-bottom: 4px;
        }
        
        .impact-indicator-description {
            font-size: 11px;
            color: #6b7280;
            line-height: 1.4;
        }
        
        .impact-indicator-value {
            font-size: 14px;
            font-weight: 700;
            color: #1e293b;
        }
        
        .business-implications {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
        }
        
        .business-implications-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .business-implications-title i {
            color: #7c3aed;
            font-size: 16px;
        }
        
        .implication-category {
            margin-bottom: 16px;
        }
        
        .implication-category-title {
            font-weight: 600;
            color: #374151;
            font-size: 12px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .implication-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .implication-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            padding: 8px 0;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .implication-item:last-child {
            border-bottom: none;
        }
        
        .implication-item-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            color: white;
            font-weight: 600;
            margin-top: 2px;
            flex-shrink: 0;
        }
        
        .implication-item-icon.positive {
            background: #16a34a;
        }
        
        .implication-item-icon.negative {
            background: #dc2626;
        }
        
        .implication-item-icon.neutral {
            background: #d97706;
        }
        
        .implication-item-text {
            font-size: 11px;
            color: #374151;
            line-height: 1.4;
        }
        
        .implication-item-text strong {
            color: #1e293b;
            font-weight: 600;
        }
        
        .action-recommendations {
            grid-column: 1 / -1;
            background: white;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
            margin-top: 20px;
        }
        
        .action-recommendations-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .action-recommendations-title i {
            color: #7c3aed;
            font-size: 16px;
        }
        
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
        }
        
        .action-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .action-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .action-card-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .action-card-icon {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
            font-weight: 600;
        }
        
        .action-card-icon.immediate {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
        }
        
        .action-card-icon.short-term {
            background: linear-gradient(135deg, #d97706, #b45309);
        }
        
        .action-card-icon.long-term {
            background: linear-gradient(135deg, #16a34a, #15803d);
        }
        
        .action-card-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 12px;
        }
        
        .action-card-description {
            font-size: 11px;
            color: #6b7280;
            line-height: 1.4;
            margin-bottom: 8px;
        }
        
        .action-card-priority {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 10px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .action-card-priority.high {
            background: #fecaca;
            color: #dc2626;
        }
        
        .action-card-priority.medium {
            background: #fef3c7;
            color: #d97706;
        }
        
        .action-card-priority.low {
            background: #dcfce7;
            color: #16a34a;
        }
        
        .impact-alert {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border: 1px solid #fecaca;
            border-radius: 8px;
            padding: 16px;
            margin-top: 20px;
        }
        
        .impact-alert-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .impact-alert-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #dc2626;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
        }
        
        .impact-alert-title {
            font-weight: 600;
            color: #dc2626;
            font-size: 14px;
        }
        
        .impact-alert-message {
            font-size: 12px;
            color: #991b1b;
            line-height: 1.4;
        }
        
        /* Accessibility Features Styles */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .focus-visible {
            outline: 2px solid #7c3aed;
            outline-offset: 2px;
        }
        
        .focus-visible:focus {
            outline: 2px solid #7c3aed;
            outline-offset: 2px;
        }
        
        .keyboard-navigation {
            position: relative;
        }
        
        .keyboard-navigation .focusable {
            position: relative;
        }
        
        .keyboard-navigation .focusable:focus {
            outline: 2px solid #7c3aed;
            outline-offset: 2px;
            z-index: 10;
        }
        
        .keyboard-navigation .focusable:focus::before {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            border: 2px solid #7c3aed;
            border-radius: 8px;
            z-index: -1;
        }
        
        .aria-live-region {
            position: absolute;
            left: -10000px;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        
        .aria-live-region[aria-live="polite"] {
            /* Polite announcements */
        }
        
        .aria-live-region[aria-live="assertive"] {
            /* Urgent announcements */
        }
        
        .high-contrast-mode {
            filter: contrast(150%) brightness(110%);
        }
        
        .high-contrast-mode .risk-badge {
            border: 2px solid #000;
        }
        
        .high-contrast-mode .risk-badge.low {
            background: #000;
            color: #fff;
        }
        
        .high-contrast-mode .risk-badge.medium {
            background: #fff;
            color: #000;
            border-color: #000;
        }
        
        .high-contrast-mode .risk-badge.high {
            background: #000;
            color: #fff;
        }
        
        .high-contrast-mode .risk-badge.critical {
            background: #fff;
            color: #000;
            border-color: #000;
        }
        
        .reduced-motion {
            animation: none !important;
            transition: none !important;
        }
        
        .reduced-motion * {
            animation: none !important;
            transition: none !important;
        }
        
        .large-text-mode {
            font-size: 1.2em;
        }
        
        .large-text-mode .risk-badge {
            font-size: 1.3em;
            padding: 12px 20px;
        }
        
        .large-text-mode .progress-bar {
            height: 20px;
        }
        
        .large-text-mode .tooltip {
            font-size: 1.1em;
            padding: 12px 16px;
        }
        
        .accessibility-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .accessibility-controls h3 {
            margin: 0 0 8px 0;
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .accessibility-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #374151;
        }
        
        .accessibility-toggle input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #7c3aed;
        }
        
        .accessibility-toggle label {
            cursor: pointer;
            user-select: none;
        }
        
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #7c3aed;
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 1001;
            font-weight: 600;
        }
        
        .skip-link:focus {
            top: 6px;
        }
        
        .aria-describedby {
            /* Elements with aria-describedby */
        }
        
        .aria-labelledby {
            /* Elements with aria-labelledby */
        }
        
        .aria-expanded[aria-expanded="true"] {
            /* Expanded state styling */
        }
        
        .aria-expanded[aria-expanded="false"] {
            /* Collapsed state styling */
        }
        
        .aria-selected[aria-selected="true"] {
            background: #7c3aed;
            color: white;
        }
        
        .aria-selected[aria-selected="false"] {
            background: transparent;
            color: inherit;
        }
        
        .aria-hidden[aria-hidden="true"] {
            display: none;
        }
        
        .aria-hidden[aria-hidden="false"] {
            display: block;
        }
        
        .role-button {
            cursor: pointer;
            user-select: none;
        }
        
        .role-button:focus {
            outline: 2px solid #7c3aed;
            outline-offset: 2px;
        }
        
        .role-button:active {
            transform: translateY(1px);
        }
        
        .role-tab {
            cursor: pointer;
            user-select: none;
        }
        
        .role-tab:focus {
            outline: 2px solid #7c3aed;
            outline-offset: 2px;
        }
        
        .role-tab[aria-selected="true"] {
            background: #7c3aed;
            color: white;
        }
        
        .role-tabpanel {
            display: block;
        }
        
        .role-tabpanel[aria-hidden="true"] {
            display: none;
        }
        
        .role-alert {
            border: 2px solid #dc2626;
            background: #fef2f2;
            color: #991b1b;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
        }
        
        .role-status {
            /* Status role styling */
        }
        
        .role-progressbar {
            /* Progressbar role styling */
        }
        
        .role-slider {
            /* Slider role styling */
        }
        
        .role-slider:focus {
            outline: 2px solid #7c3aed;
            outline-offset: 2px;
        }
        
        .role-slider::-webkit-slider-thumb {
            background: #7c3aed;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .role-slider::-webkit-slider-thumb:focus {
            outline: 2px solid #7c3aed;
            outline-offset: 2px;
        }
        
        .role-slider::-moz-range-thumb {
            background: #7c3aed;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .role-slider::-moz-range-thumb:focus {
            outline: 2px solid #7c3aed;
            outline-offset: 2px;
        }
        
        .keyboard-shortcuts {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            max-width: 300px;
            display: none;
        }
        
        .keyboard-shortcuts.show {
            display: block;
        }
        
        .keyboard-shortcuts h3 {
            margin: 0 0 8px 0;
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .keyboard-shortcut {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
            font-size: 12px;
            color: #374151;
        }
        
        .keyboard-shortcut kbd {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            padding: 2px 6px;
            font-family: monospace;
            font-size: 11px;
            color: #374151;
        }
        
        /* Mobile Responsive Optimizations */
        @media (max-width: 768px) {
            /* Navigation Mobile Optimizations */
            .nav-container {
                padding: 0 16px;
            }
            
            .nav-brand {
                font-size: 18px;
            }
            
            .nav-menu {
                display: none;
            }
            
            .nav-mobile-menu {
                display: block;
            }
            
            /* Main Content Mobile Optimizations */
            .main-content {
                padding: 16px;
            }
            
            .page-title {
                font-size: 24px;
                margin-bottom: 16px;
            }
            
            /* Form Mobile Optimizations */
            .form-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .form-group {
                margin-bottom: 16px;
            }
            
            .form-label {
                font-size: 14px;
                margin-bottom: 8px;
            }
            
            .form-input {
                padding: 12px;
                font-size: 16px;
            }
            
            .form-button {
                width: 100%;
                padding: 14px;
                font-size: 16px;
            }
            
            /* Risk Score Mobile Optimizations */
            .risk-score-container {
                padding: 16px;
                margin-bottom: 16px;
            }
            
            .risk-score-title {
                font-size: 20px;
                margin-bottom: 12px;
            }
            
            .risk-score-value {
                font-size: 36px;
                margin-bottom: 8px;
            }
            
            .risk-score-label {
                font-size: 14px;
            }
            
            /* Risk Badges Mobile Optimizations */
            .risk-badge {
                padding: 8px 12px;
                font-size: 12px;
                margin: 4px;
            }
            
            .risk-badges-container {
                flex-wrap: wrap;
                justify-content: center;
                gap: 8px;
            }
            
            /* Progress Bars Mobile Optimizations */
            .progress-container {
                margin-bottom: 12px;
            }
            
            .progress-label {
                font-size: 12px;
                margin-bottom: 6px;
            }
            
            .progress-bar {
                height: 12px;
            }
            
            .progress-value {
                font-size: 12px;
            }
            
            /* Heat Map Mobile Optimizations */
            .heat-map-container {
                padding: 12px;
                margin-bottom: 16px;
            }
            
            .heat-map-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .heat-map-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .heat-map-item {
                padding: 8px;
                font-size: 11px;
            }
            
            .heat-map-item-title {
                font-size: 10px;
                margin-bottom: 4px;
            }
            
            .heat-map-item-value {
                font-size: 12px;
            }
            
            /* Radar Chart Mobile Optimizations */
            .radar-container {
                padding: 12px;
                margin-bottom: 16px;
            }
            
            .radar-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .radar-chart {
                width: 100%;
                height: 250px;
            }
            
            .radar-legend {
                flex-direction: column;
                gap: 8px;
                margin-top: 12px;
            }
            
            .radar-legend-item {
                font-size: 11px;
            }
            
            /* Benchmark Comparison Mobile Optimizations */
            .benchmark-container {
                padding: 12px;
                margin-bottom: 16px;
            }
            
            .benchmark-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .benchmark-header {
                flex-direction: column;
                gap: 12px;
                align-items: flex-start;
            }
            
            .benchmark-industry-selector {
                width: 100%;
            }
            
            .benchmark-select {
                width: 100%;
                padding: 8px;
            }
            
            .benchmark-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .benchmark-card {
                padding: 12px;
            }
            
            .benchmark-comparison {
                flex-direction: column;
                gap: 8px;
            }
            
            .benchmark-chart {
                height: 120px;
            }
            
            /* Threshold Display Mobile Optimizations */
            .threshold-container {
                padding: 12px;
                margin-bottom: 16px;
            }
            
            .threshold-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .threshold-header {
                flex-direction: column;
                gap: 12px;
                align-items: flex-start;
            }
            
            .threshold-scale {
                height: 8px;
                margin: 12px 0;
            }
            
            .threshold-levels {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            
            .threshold-level {
                padding: 12px;
            }
            
            .threshold-level-header {
                flex-direction: column;
                gap: 8px;
                align-items: flex-start;
            }
            
            /* Interactive Controls Mobile Optimizations */
            .controls-container {
                padding: 12px;
                margin-bottom: 16px;
            }
            
            .controls-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .control-panel {
                padding: 12px;
            }
            
            .control-panel-title {
                font-size: 14px;
                margin-bottom: 8px;
            }
            
            .control-slider {
                margin: 8px 0;
            }
            
            .control-buttons {
                flex-direction: column;
                gap: 8px;
            }
            
            .control-button {
                width: 100%;
                padding: 10px;
            }
            
            /* History and Timeline Mobile Optimizations */
            .history-container {
                padding: 12px;
                margin-bottom: 16px;
            }
            
            .history-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .history-header {
                flex-direction: column;
                gap: 12px;
                align-items: flex-start;
            }
            
            .history-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .history-content {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .history-metrics {
                grid-template-columns: 1fr 1fr;
                gap: 8px;
            }
            
            .history-metric {
                padding: 6px;
            }
            
            .history-metric-value {
                font-size: 16px;
            }
            
            .history-metric-label {
                font-size: 9px;
            }
            
            .timeline-container {
                max-height: 300px;
            }
            
            .timeline-item {
                margin-bottom: 12px;
            }
            
            .timeline-content {
                padding: 8px;
            }
            
            .timeline-header {
                flex-direction: column;
                gap: 4px;
                align-items: flex-start;
            }
            
            .timeline-date {
                font-size: 10px;
            }
            
            .timeline-score {
                font-size: 12px;
            }
            
            .timeline-details {
                font-size: 10px;
            }
            
            /* Impact Indicators Mobile Optimizations */
            .impact-container {
                padding: 12px;
                margin-bottom: 16px;
            }
            
            .impact-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .impact-header {
                flex-direction: column;
                gap: 12px;
                align-items: flex-start;
            }
            
            .impact-content {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .impact-indicator {
                padding: 8px;
                margin-bottom: 8px;
            }
            
            .impact-indicator-icon {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            
            .impact-indicator-title {
                font-size: 12px;
            }
            
            .impact-indicator-description {
                font-size: 10px;
            }
            
            .impact-indicator-value {
                font-size: 12px;
            }
            
            .implication-category {
                margin-bottom: 12px;
            }
            
            .implication-category-title {
                font-size: 11px;
            }
            
            .implication-item {
                padding: 6px 0;
            }
            
            .implication-item-text {
                font-size: 10px;
            }
            
            .action-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            
            .action-card {
                padding: 8px;
            }
            
            .action-card-title {
                font-size: 11px;
            }
            
            .action-card-description {
                font-size: 10px;
            }
            
            /* Accessibility Controls Mobile Optimizations */
            .accessibility-controls {
                top: 10px;
                right: 10px;
                padding: 8px;
                max-width: 200px;
            }
            
            .accessibility-controls h3 {
                font-size: 12px;
                margin-bottom: 6px;
            }
            
            .accessibility-toggle {
                font-size: 11px;
            }
            
            .accessibility-toggle input[type="checkbox"] {
                width: 14px;
                height: 14px;
            }
            
            /* Keyboard Shortcuts Mobile Optimizations */
            .keyboard-shortcuts {
                bottom: 10px;
                left: 10px;
                right: 10px;
                max-width: none;
                padding: 8px;
            }
            
            .keyboard-shortcuts h3 {
                font-size: 12px;
                margin-bottom: 6px;
            }
            
            .keyboard-shortcut {
                font-size: 11px;
                padding: 3px 0;
            }
            
            .keyboard-shortcut kbd {
                font-size: 10px;
                padding: 1px 4px;
            }
            
            /* Tooltip Mobile Optimizations */
            .tooltip {
                font-size: 12px;
                padding: 8px 12px;
                max-width: 250px;
            }
            
            /* Alert Mobile Optimizations */
            .alert {
                padding: 12px;
                margin-bottom: 12px;
            }
            
            .alert-title {
                font-size: 14px;
                margin-bottom: 6px;
            }
            
            .alert-message {
                font-size: 12px;
            }
            
            /* Button Mobile Optimizations */
            .btn {
                padding: 12px 16px;
                font-size: 14px;
            }
            
            .btn-sm {
                padding: 8px 12px;
                font-size: 12px;
            }
            
            /* Card Mobile Optimizations */
            .card {
                padding: 16px;
                margin-bottom: 16px;
            }
            
            .card-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            /* Grid Mobile Optimizations */
            .grid {
                gap: 12px;
            }
            
            .grid-cols-1 {
                grid-template-columns: 1fr;
            }
            
            .grid-cols-2 {
                grid-template-columns: 1fr;
            }
            
            .grid-cols-3 {
                grid-template-columns: 1fr;
            }
            
            .grid-cols-4 {
                grid-template-columns: 1fr 1fr;
            }
            
            /* Spacing Mobile Optimizations */
            .mb-8 {
                margin-bottom: 16px;
            }
            
            .mb-6 {
                margin-bottom: 12px;
            }
            
            .mb-4 {
                margin-bottom: 8px;
            }
            
            .mt-8 {
                margin-top: 16px;
            }
            
            .mt-6 {
                margin-top: 12px;
            }
            
            .mt-4 {
                margin-top: 8px;
            }
            
            .p-6 {
                padding: 16px;
            }
            
            .p-4 {
                padding: 12px;
            }
            
            .py-8 {
                padding-top: 16px;
                padding-bottom: 16px;
            }
            
            .py-6 {
                padding-top: 12px;
                padding-bottom: 12px;
            }
            
            .px-8 {
                padding-left: 16px;
                padding-right: 16px;
            }
            
            .px-6 {
                padding-left: 12px;
                padding-right: 12px;
            }
        }
        
        /* Tablet Responsive Optimizations */
        @media (min-width: 769px) and (max-width: 1024px) {
            /* Navigation Tablet Optimizations */
            .nav-container {
                padding: 0 24px;
            }
            
            /* Main Content Tablet Optimizations */
            .main-content {
                padding: 24px;
            }
            
            /* Form Tablet Optimizations */
            .form-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            /* Risk Score Tablet Optimizations */
            .risk-score-container {
                padding: 20px;
            }
            
            /* Heat Map Tablet Optimizations */
            .heat-map-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 12px;
            }
            
            /* Benchmark Comparison Tablet Optimizations */
            .benchmark-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
            
            /* Threshold Display Tablet Optimizations */
            .threshold-levels {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            /* Interactive Controls Tablet Optimizations */
            .controls-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
            
            /* History and Timeline Tablet Optimizations */
            .history-content {
                grid-template-columns: 1fr 1.5fr;
                gap: 16px;
            }
            
            /* Impact Indicators Tablet Optimizations */
            .impact-content {
                grid-template-columns: 1fr 1fr;
                gap: 16px;
            }
            
            .action-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
        }
        
        /* Large Screen Optimizations */
        @media (min-width: 1025px) {
            /* Navigation Large Screen Optimizations */
            .nav-container {
                padding: 0 32px;
            }
            
            /* Main Content Large Screen Optimizations */
            .main-content {
                padding: 32px;
            }
            
            /* Form Large Screen Optimizations */
            .form-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 24px;
            }
            
            /* Risk Score Large Screen Optimizations */
            .risk-score-container {
                padding: 24px;
            }
            
            /* Heat Map Large Screen Optimizations */
            .heat-map-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 16px;
            }
            
            /* Benchmark Comparison Large Screen Optimizations */
            .benchmark-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            
            /* Threshold Display Large Screen Optimizations */
            .threshold-levels {
                grid-template-columns: repeat(4, 1fr);
                gap: 16px;
            }
            
            /* Interactive Controls Large Screen Optimizations */
            .controls-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
            }
            
            /* History and Timeline Large Screen Optimizations */
            .history-content {
                grid-template-columns: 1fr 2fr;
                gap: 20px;
            }
            
            /* Impact Indicators Large Screen Optimizations */
            .impact-content {
                grid-template-columns: 1fr 1fr;
                gap: 20px;
            }
            
            .action-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 16px;
            }
        }
        
        /* Touch Device Optimizations */
        @media (hover: none) and (pointer: coarse) {
            /* Touch-friendly button sizes */
            .btn, .control-button, .action-card {
                min-height: 44px;
                min-width: 44px;
            }
            
            /* Touch-friendly form elements */
            .form-input, .form-select {
                min-height: 44px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            /* Touch-friendly interactive elements */
            .risk-badge, .heat-map-item, .timeline-item {
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Remove hover effects on touch devices */
            .risk-badge:hover,
            .heat-map-item:hover,
            .timeline-item:hover,
            .action-card:hover,
            .control-button:hover {
                transform: none;
                box-shadow: none;
            }
            
            /* Touch-friendly tooltips */
            .tooltip {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                max-width: 90vw;
            }
        }
        
        /* Print Optimizations */
        @media print {
            .accessibility-controls,
            .keyboard-shortcuts,
            .nav-mobile-menu,
            .skip-link {
                display: none !important;
            }
            
            .main-content {
                padding: 0;
            }
            
            .card {
                break-inside: avoid;
                margin-bottom: 20px;
            }
            
            .risk-score-container {
                background: white !important;
                border: 1px solid #000 !important;
            }
            
            .risk-badge {
                background: white !important;
                color: #000 !important;
                border: 1px solid #000 !important;
            }
        }
        
        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .slide-up {
            animation: slideUp 0.6s ease-out;
        }
        
        .slide-down {
            animation: slideDown 0.6s ease-out;
        }
        
        .slide-left {
            animation: slideLeft 0.6s ease-out;
        }
        
        .slide-right {
            animation: slideRight 0.6s ease-out;
        }
        
        .scale-in {
            animation: scaleIn 0.5s ease-out;
        }
        
        .scale-out {
            animation: scaleOut 0.3s ease-in;
        }
        
        .bounce-in {
            animation: bounceIn 0.8s ease-out;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        .glow {
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        .float {
            animation: float 3s ease-in-out infinite;
        }
        
        .rotate {
            animation: rotate 2s linear infinite;
        }
        
        .wiggle {
            animation: wiggle 0.5s ease-in-out;
        }
        
        .zoom-in {
            animation: zoomIn 0.4s ease-out;
        }
        
        .zoom-out {
            animation: zoomOut 0.4s ease-in;
        }
        
        .flip-in {
            animation: flipIn 0.6s ease-out;
        }
        
        .flip-out {
            animation: flipOut 0.4s ease-in;
        }
        
        /* Keyframe Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Enhanced Progress Bar Styles */
        .progress-bar {
            width: 100%;
            height: 12px;
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 6px;
            position: relative;
            transition: width 0.8s ease-in-out;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        @keyframes slideDown {
            from { 
                opacity: 0;
                transform: translateY(-20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideLeft {
            from { 
                opacity: 0;
                transform: translateX(20px);
            }
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideRight {
            from { 
                opacity: 0;
                transform: translateX(-20px);
            }
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes scaleIn {
            from { 
                opacity: 0;
                transform: scale(0.8);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes scaleOut {
            from { 
                opacity: 1;
                transform: scale(1);
            }
            to { 
                opacity: 0;
                transform: scale(0.8);
            }
        }
        
        @keyframes bounceIn {
            0% { 
                opacity: 0;
                transform: scale(0.3);
            }
            50% { 
                opacity: 1;
                transform: scale(1.05);
            }
            70% { 
                transform: scale(0.9);
            }
            100% { 
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes pulse {
            0%, 100% { 
                transform: scale(1);
            }
            50% { 
                transform: scale(1.05);
            }
        }
        
        @keyframes shake {
            0%, 100% { 
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% { 
                transform: translateX(-2px);
            }
            20%, 40%, 60%, 80% { 
                transform: translateX(2px);
            }
        }
        
        @keyframes glow {
            from { 
                box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
            }
            to { 
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
            }
        }
        
        @keyframes float {
            0%, 100% { 
                transform: translateY(0px);
            }
            50% { 
                transform: translateY(-10px);
            }
        }
        
        @keyframes rotate {
            from { 
                transform: rotate(0deg);
            }
            to { 
                transform: rotate(360deg);
            }
        }
        
        @keyframes wiggle {
            0%, 100% { 
                transform: rotate(0deg);
            }
            25% { 
                transform: rotate(5deg);
            }
            75% { 
                transform: rotate(-5deg);
            }
        }
        
        @keyframes zoomIn {
            from { 
                opacity: 0;
                transform: scale(0.5);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes zoomOut {
            from { 
                opacity: 1;
                transform: scale(1);
            }
            to { 
                opacity: 0;
                transform: scale(0.5);
            }
        }
        
        @keyframes flipIn {
            from { 
                opacity: 0;
                transform: perspective(400px) rotateY(90deg);
            }
            to { 
                opacity: 1;
                transform: perspective(400px) rotateY(0deg);
            }
        }
        
        @keyframes flipOut {
            from { 
                opacity: 1;
                transform: perspective(400px) rotateY(0deg);
            }
            to { 
                opacity: 0;
                transform: perspective(400px) rotateY(90deg);
            }
        }
        
        /* Enhanced Transition Effects */
        .transition-all {
            transition: all 0.3s ease-in-out;
        }
        
        .transition-colors {
            transition: color 0.3s ease-in-out, background-color 0.3s ease-in-out, border-color 0.3s ease-in-out;
        }
        
        .transition-transform {
            transition: transform 0.3s ease-in-out;
        }
        
        .transition-opacity {
            transition: opacity 0.3s ease-in-out;
        }
        
        .transition-shadow {
            transition: box-shadow 0.3s ease-in-out;
        }
        
        .transition-scale {
            transition: transform 0.2s ease-in-out;
        }
        
        .transition-bounce {
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .transition-elastic {
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        /* Hover Animation Effects */
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .hover-scale:hover {
            transform: scale(1.05);
        }
        
        .hover-glow:hover {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
        }
        
        .hover-rotate:hover {
            transform: rotate(5deg);
        }
        
        .hover-bounce:hover {
            animation: bounceIn 0.6s ease-out;
        }
        
        .hover-pulse:hover {
            animation: pulse 1s infinite;
        }
        
        .hover-shake:hover {
            animation: shake 0.5s ease-in-out;
        }
        
        .hover-wiggle:hover {
            animation: wiggle 0.5s ease-in-out;
        }
        
        /* Focus Animation Effects */
        .focus-glow:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
            animation: glow 0.3s ease-in-out;
        }
        
        .focus-scale:focus {
            outline: none;
            transform: scale(1.02);
        }
        
        .focus-bounce:focus {
            outline: none;
            animation: bounceIn 0.4s ease-out;
        }
        
        /* Loading Animation Effects */
        .loading-pulse {
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        .loading-spin {
            animation: rotate 1s linear infinite;
        }
        
        .loading-bounce {
            animation: bounceIn 1s ease-in-out infinite;
        }
        
        .loading-shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        /* Stagger Animation Effects */
        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
        .stagger-4 { animation-delay: 0.4s; }
        .stagger-5 { animation-delay: 0.5s; }
        .stagger-6 { animation-delay: 0.6s; }
        .stagger-7 { animation-delay: 0.7s; }
        .stagger-8 { animation-delay: 0.8s; }
        
        /* Animation Performance Optimizations */
        .gpu-accelerated {
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }
        
        .will-change-transform {
            will-change: transform;
        }
        
        .will-change-opacity {
            will-change: opacity;
        }
        
        .will-change-auto {
            will-change: auto;
        }
        
        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {
            .fade-in,
            .slide-up,
            .slide-down,
            .slide-left,
            .slide-right,
            .scale-in,
            .scale-out,
            .bounce-in,
            .pulse,
            .shake,
            .glow,
            .float,
            .rotate,
            .wiggle,
            .zoom-in,
            .zoom-out,
            .flip-in,
            .flip-out {
                animation: none;
            }
            
            .transition-all,
            .transition-colors,
            .transition-transform,
            .transition-opacity,
            .transition-shadow,
            .transition-scale,
            .transition-bounce,
            .transition-elastic {
                transition: none;
            }
            
            .hover-lift:hover,
            .hover-scale:hover,
            .hover-glow:hover,
            .hover-rotate:hover,
            .hover-bounce:hover,
            .hover-pulse:hover,
            .hover-shake:hover,
            .hover-wiggle:hover {
                transform: none;
                animation: none;
                box-shadow: none;
            }
        }
        
        .progress-low { 
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }
        .progress-medium { 
            background: linear-gradient(135deg, #eab308, #d97706);
        }
        .progress-high { 
            background: linear-gradient(135deg, #f97316, #ea580c);
        }
        .progress-critical { 
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        /* Loading Skeleton */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .risk-gauge {
                width: 150px;
                height: 150px;
            }
            
            .gauge-inner {
                top: 15px;
                left: 15px;
                width: 120px;
                height: 120px;
            }
            
            .gauge-needle {
                height: 60px;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Skip Link for Screen Readers -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Accessibility Controls -->
    <div class="accessibility-controls">
        <h3>Accessibility Options</h3>
        <div class="accessibility-toggle">
            <input type="checkbox" id="highContrastToggle" aria-describedby="highContrastDesc">
            <label for="highContrastToggle">High Contrast</label>
        </div>
        <div class="accessibility-toggle">
            <input type="checkbox" id="reducedMotionToggle" aria-describedby="reducedMotionDesc">
            <label for="reducedMotionToggle">Reduce Motion</label>
        </div>
        <div class="accessibility-toggle">
            <input type="checkbox" id="largeTextToggle" aria-describedby="largeTextDesc">
            <label for="largeTextToggle">Large Text</label>
        </div>
        <div class="accessibility-toggle">
            <input type="checkbox" id="keyboardShortcutsToggle" aria-describedby="keyboardShortcutsDesc">
            <label for="keyboardShortcutsToggle">Show Shortcuts</label>
        </div>
    </div>
    
    <!-- Keyboard Shortcuts Panel -->
    <div id="keyboardShortcuts" class="keyboard-shortcuts" role="dialog" aria-labelledby="shortcuts-title" aria-hidden="true">
        <h3 id="shortcuts-title">Keyboard Shortcuts</h3>
        <div class="keyboard-shortcut">
            <span>Toggle High Contrast</span>
            <kbd>Ctrl</kbd> + <kbd>H</kbd>
        </div>
        <div class="keyboard-shortcut">
            <span>Toggle Reduced Motion</span>
            <kbd>Ctrl</kbd> + <kbd>M</kbd>
        </div>
        <div class="keyboard-shortcut">
            <span>Toggle Large Text</span>
            <kbd>Ctrl</kbd> + <kbd>T</kbd>
        </div>
        <div class="keyboard-shortcut">
            <span>Show/Hide Shortcuts</span>
            <kbd>?</kbd>
        </div>
        <div class="keyboard-shortcut">
            <span>Focus Risk Score</span>
            <kbd>R</kbd>
        </div>
        <div class="keyboard-shortcut">
            <span>Focus Risk Categories</span>
            <kbd>C</kbd>
        </div>
        <div class="keyboard-shortcut">
            <span>Focus Alerts</span>
            <kbd>A</kbd>
        </div>
        <div class="keyboard-shortcut">
            <span>Focus History</span>
            <kbd>H</kbd>
        </div>
    </div>
    
    <!-- ARIA Live Regions for Screen Reader Announcements -->
    <div id="aria-live-polite" class="aria-live-region" aria-live="polite" aria-atomic="true"></div>
    <div id="aria-live-assertive" class="aria-live-region" aria-live="assertive" aria-atomic="true"></div>
    
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-gray-900">KYB Risk Assessment Dashboard</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded">RISK</span>
                    <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded">LIVE</span>
                    <button id="refreshBtn" class="text-gray-600 hover:text-gray-900" title="Refresh Data">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8" role="main" aria-labelledby="page-title">
        <!-- Business Selection -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 id="page-title" class="text-2xl font-bold text-gray-900 mb-6">Risk Assessment Analysis</h2>
            
            <form id="riskAssessmentForm" class="space-y-6">
                <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                    <div>
                        <label for="businessId" class="block text-sm font-medium text-gray-700 mb-2">
                            Business ID *
                        </label>
                        <input type="text" id="businessId" name="businessId" required
                               placeholder="e.g., business_12345"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    
                    <div>
                        <label for="businessName" class="block text-sm font-medium text-gray-700 mb-2">
                            Business Name *
                        </label>
                        <input type="text" id="businessName" name="businessName" required
                               placeholder="e.g., Acme Corporation"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    
                    <div>
                        <label for="assessmentType" class="block text-sm font-medium text-gray-700 mb-2">
                            Assessment Type
                        </label>
                        <select id="assessmentType" name="assessmentType"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            <option value="comprehensive">Comprehensive Assessment</option>
                            <option value="financial">Financial Risk Only</option>
                            <option value="operational">Operational Risk Only</option>
                            <option value="regulatory">Regulatory Risk Only</option>
                            <option value="reputational">Reputational Risk Only</option>
                            <option value="cybersecurity">Cybersecurity Risk Only</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex justify-center">
                    <button type="submit" 
                            class="bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-md text-lg font-medium transition-colors">
                        <i class="fas fa-shield-alt mr-2"></i>
                        Assess Risk
                    </button>
                </div>
            </form>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="hidden">
            <div class="bg-white rounded-lg shadow-lg p-8 text-center">
                <div class="inline-flex items-center mb-4">
                    <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span class="text-lg text-gray-700">Analyzing risk factors...</span>
                </div>
                <div class="space-y-2">
                    <div class="skeleton h-4 bg-gray-200 rounded w-3/4 mx-auto"></div>
                    <div class="skeleton h-4 bg-gray-200 rounded w-1/2 mx-auto"></div>
                    <div class="skeleton h-4 bg-gray-200 rounded w-2/3 mx-auto"></div>
                </div>
            </div>
        </div>

        <!-- Risk Dashboard Results -->
        <div id="riskDashboardResults" class="hidden space-y-8">
            <!-- Overall Risk Score -->
            <div id="overallRiskScore" class="fade-in">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-900">Overall Risk Assessment</h3>
                        <div class="flex items-center space-x-2">
                            <span id="riskLevelBadge" class="px-3 py-1 rounded-full text-sm font-medium"></span>
                            <span id="confidenceBadge" class="px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"></span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Risk Gauge -->
                        <div class="text-center">
                            <div class="risk-gauge">
                                <div class="gauge-background">
                                    <div class="gauge-inner">
                                        <span id="riskScoreValue" class="text-3xl font-bold text-gray-900">0</span>
                                        <span class="text-sm text-gray-500">Risk Score</span>
                                    </div>
                                    <div id="gaugeNeedle" class="gauge-needle"></div>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 mt-4">Overall Risk Level</p>
                        </div>
                        
                        <!-- Risk Summary -->
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-medium text-gray-900 mb-2">Risk Summary</h4>
                                <p id="riskSummary" class="text-sm text-gray-600">Loading risk assessment...</p>
                            </div>
                            
                            <div>
                                <h4 class="font-medium text-gray-900 mb-2">Key Risk Factors</h4>
                                <div id="keyRiskFactors" class="space-y-2">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="font-medium text-gray-900 mb-2">Assessment Details</h4>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Assessed At:</span>
                                        <span id="assessedAt" class="font-medium">-</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Valid Until:</span>
                                        <span id="validUntil" class="font-medium">-</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Confidence:</span>
                                        <span id="confidenceScore" class="font-medium">-</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Alert Level:</span>
                                        <span id="alertLevel" class="font-medium">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Risk Category Breakdown -->
            <div id="riskCategoryBreakdown" class="slide-up">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-900">Risk Category Breakdown</h3>
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="toggleSection('categoryDetails')">
                            <i class="fas fa-chevron-down mr-1"></i>
                            Show Details
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Financial Risk -->
                        <div class="p-4 border rounded-lg card-hover risk-card-with-trend risk-card-confidence">
                            <div class="trend-overlay">
                                <div id="financialRiskTrend" class="risk-trend trend-stable">
                                    <div class="trend-icon">
                                        <i class="fas fa-minus trend-arrow-right"></i>
                                    </div>
                                    <span>Stable</span>
                                </div>
                            </div>
                            <div class="confidence-overlay">
                                <div id="financialConfidenceIndicator" class="confidence-indicator confidence-high">
                                    <div class="confidence-icon high"></div>
                                    <span>High</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center">
                                    <div class="risk-icon risk-icon-low">
                                        <i class="fas fa-dollar-sign text-xs"></i>
                                    </div>
                                    <h4 class="font-medium text-gray-900">Financial Risk</h4>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span id="financialRiskLevel" class="risk-badge px-3 py-1 text-xs font-bold"></span>
                                    <div id="financialTrendChart" class="trend-chart-mini">
                                        <div class="trend-line"></div>
                                        <div class="trend-points"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="progress-bar mb-2">
                                <div id="financialRiskProgress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Score:</span>
                                <span id="financialRiskScore" class="font-medium">-</span>
                            </div>
                            <div class="confidence-details">
                                <div class="confidence-meter">
                                    <div id="financialConfidenceMeter" class="confidence-fill high"></div>
                                </div>
                                <span id="financialConfidenceScore" class="confidence-score high">92%</span>
                            </div>
                        </div>
                        
                        <!-- Operational Risk -->
                        <div class="p-4 border rounded-lg card-hover risk-card-with-trend risk-card-confidence">
                            <div class="trend-overlay">
                                <div id="operationalRiskTrend" class="risk-trend trend-improving">
                                    <div class="trend-icon">
                                        <i class="fas fa-arrow-down trend-arrow-down"></i>
                                    </div>
                                    <span>Improving</span>
                                </div>
                            </div>
                            <div class="confidence-overlay">
                                <div id="operationalConfidenceIndicator" class="confidence-indicator confidence-medium">
                                    <div class="confidence-icon medium"></div>
                                    <span>Med</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center">
                                    <div class="risk-icon risk-icon-medium">
                                        <i class="fas fa-cogs text-xs"></i>
                                    </div>
                                    <h4 class="font-medium text-gray-900">Operational Risk</h4>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span id="operationalRiskLevel" class="risk-badge px-3 py-1 text-xs font-bold"></span>
                                    <div id="operationalTrendChart" class="trend-chart-mini">
                                        <div class="trend-line"></div>
                                        <div class="trend-points"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="progress-bar mb-2">
                                <div id="operationalRiskProgress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Score:</span>
                                <span id="operationalRiskScore" class="font-medium">-</span>
                            </div>
                            <div class="confidence-details">
                                <div class="confidence-meter">
                                    <div id="operationalConfidenceMeter" class="confidence-fill medium"></div>
                                </div>
                                <span id="operationalConfidenceScore" class="confidence-score medium">68%</span>
                            </div>
                        </div>
                        
                        <!-- Regulatory Risk -->
                        <div class="p-4 border rounded-lg card-hover risk-card-with-trend risk-card-confidence">
                            <div class="trend-overlay">
                                <div id="regulatoryRiskTrend" class="risk-trend trend-rising">
                                    <div class="trend-icon">
                                        <i class="fas fa-arrow-up trend-arrow-up"></i>
                                    </div>
                                    <span>Rising</span>
                                </div>
                            </div>
                            <div class="confidence-overlay">
                                <div id="regulatoryConfidenceIndicator" class="confidence-indicator confidence-low">
                                    <div class="confidence-icon low"></div>
                                    <span>Low</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center">
                                    <div class="risk-icon risk-icon-high">
                                        <i class="fas fa-gavel text-xs"></i>
                                    </div>
                                    <h4 class="font-medium text-gray-900">Regulatory Risk</h4>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span id="regulatoryRiskLevel" class="risk-badge px-3 py-1 text-xs font-bold"></span>
                                    <div id="regulatoryTrendChart" class="trend-chart-mini">
                                        <div class="trend-line"></div>
                                        <div class="trend-points"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="progress-bar mb-2">
                                <div id="regulatoryRiskProgress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Score:</span>
                                <span id="regulatoryRiskScore" class="font-medium">-</span>
                            </div>
                            <div class="confidence-details">
                                <div class="confidence-meter">
                                    <div id="regulatoryConfidenceMeter" class="confidence-fill low"></div>
                                </div>
                                <span id="regulatoryConfidenceScore" class="confidence-score low">45%</span>
                            </div>
                        </div>
                        
                        <!-- Reputational Risk -->
                        <div class="p-4 border rounded-lg card-hover risk-card-with-trend risk-card-confidence">
                            <div class="trend-overlay">
                                <div id="reputationalRiskTrend" class="risk-trend trend-improving">
                                    <div class="trend-icon">
                                        <i class="fas fa-arrow-down trend-arrow-down"></i>
                                    </div>
                                    <span>Improving</span>
                                </div>
                            </div>
                            <div class="confidence-overlay">
                                <div id="reputationalConfidenceIndicator" class="confidence-indicator confidence-high">
                                    <div class="confidence-icon high"></div>
                                    <span>High</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center">
                                    <div class="risk-icon risk-icon-low">
                                        <i class="fas fa-star text-xs"></i>
                                    </div>
                                    <h4 class="font-medium text-gray-900">Reputational Risk</h4>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span id="reputationalRiskLevel" class="risk-badge px-3 py-1 text-xs font-bold"></span>
                                    <div id="reputationalTrendChart" class="trend-chart-mini">
                                        <div class="trend-line"></div>
                                        <div class="trend-points"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="progress-bar mb-2">
                                <div id="reputationalRiskProgress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Score:</span>
                                <span id="reputationalRiskScore" class="font-medium">-</span>
                            </div>
                            <div class="confidence-details">
                                <div class="confidence-meter">
                                    <div id="reputationalConfidenceMeter" class="confidence-fill high"></div>
                                </div>
                                <span id="reputationalConfidenceScore" class="confidence-score high">88%</span>
                            </div>
                        </div>
                        
                        <!-- Cybersecurity Risk -->
                        <div class="p-4 border rounded-lg card-hover risk-card-with-trend risk-card-confidence">
                            <div class="trend-overlay">
                                <div id="cybersecurityRiskTrend" class="risk-trend trend-rising">
                                    <div class="trend-icon">
                                        <i class="fas fa-arrow-up trend-arrow-up"></i>
                                    </div>
                                    <span>Rising</span>
                                </div>
                            </div>
                            <div class="confidence-overlay">
                                <div id="cybersecurityConfidenceIndicator" class="confidence-indicator confidence-medium">
                                    <div class="confidence-icon medium"></div>
                                    <span>Med</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center">
                                    <div class="risk-icon risk-icon-critical">
                                        <i class="fas fa-shield-alt text-xs"></i>
                                    </div>
                                    <h4 class="font-medium text-gray-900">Cybersecurity Risk</h4>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span id="cybersecurityRiskLevel" class="risk-badge px-3 py-1 text-xs font-bold"></span>
                                    <div id="cybersecurityTrendChart" class="trend-chart-mini">
                                        <div class="trend-line"></div>
                                        <div class="trend-points"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="progress-bar mb-2">
                                <div id="cybersecurityRiskProgress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Score:</span>
                                <span id="cybersecurityRiskScore" class="font-medium">-</span>
                            </div>
                            <div class="confidence-details">
                                <div class="confidence-meter">
                                    <div id="cybersecurityConfidenceMeter" class="confidence-fill medium"></div>
                                </div>
                                <span id="cybersecurityConfidenceScore" class="confidence-score medium">72%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Risk Heat Map -->
                    <div class="mt-8">
                        <div class="risk-heatmap">
                            <div class="heatmap-header">
                                <div class="heatmap-title">
                                    <i class="fas fa-th"></i>
                                    Risk Factor Heat Map
                                </div>
                                <div class="heatmap-legend">
                                    <div class="legend-item">
                                        <div class="legend-color heat-low"></div>
                                        <span>Low (0-20)</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color heat-medium-low"></div>
                                        <span>Med-Low (21-40)</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color heat-medium"></div>
                                        <span>Medium (41-60)</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color heat-medium-high"></div>
                                        <span>Med-High (61-80)</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color heat-high"></div>
                                        <span>High (81-95)</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color heat-critical"></div>
                                        <span>Critical (96-100)</span>
                                    </div>
                                </div>
                            </div>
                            <div id="heatmapGrid" class="heatmap-grid">
                                <!-- Heat map categories will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Risk Radar Chart -->
                    <div class="risk-radar-container">
                        <div class="radar-header">
                            <div class="radar-title">
                                <i class="fas fa-chart-radar"></i>
                                Multi-Dimensional Risk Analysis
                            </div>
                            <div class="radar-controls">
                                <div class="radar-toggle">
                                    <button class="active" data-view="current">Current</button>
                                    <button data-view="benchmark">vs Industry</button>
                                    <button data-view="historical">Historical</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="radar-chart-wrapper">
                            <div class="radar-chart">
                                <div class="radar-grid">
                                    <!-- Grid circles will be created by JavaScript -->
                                </div>
                                <div class="radar-labels">
                                    <!-- Labels will be created by JavaScript -->
                                </div>
                                <div class="radar-data-area">
                                    <svg width="350" height="350" viewBox="0 0 350 350">
                                        <polygon id="radarPolygon" class="radar-polygon" points=""></polygon>
                                    </svg>
                                </div>
                                <div class="radar-points">
                                    <!-- Data points will be created by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="radar-legend">
                            <div class="legend-item-radar">
                                <div class="legend-color-radar" style="background: #3b82f6;"></div>
                                <span>Current Risk</span>
                            </div>
                            <div class="legend-item-radar">
                                <div class="legend-color-radar" style="background: #10b981;"></div>
                                <span>Industry Average</span>
                            </div>
                            <div class="legend-item-radar">
                                <div class="legend-color-radar" style="background: #f59e0b;"></div>
                                <span>Previous Period</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Industry Benchmark Comparison -->
                    <div class="benchmark-container">
                        <div class="benchmark-header">
                            <div class="benchmark-title">
                                <i class="fas fa-chart-line"></i>
                                Industry Benchmark Comparison
                            </div>
                            <div class="benchmark-industry-selector">
                                <span>Industry:</span>
                                <select id="industrySelector" class="benchmark-select">
                                    <option value="technology">Technology</option>
                                    <option value="finance">Financial Services</option>
                                    <option value="healthcare">Healthcare</option>
                                    <option value="manufacturing">Manufacturing</option>
                                    <option value="retail">Retail</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="benchmarkGrid" class="benchmark-grid">
                            <!-- Benchmark cards will be populated by JavaScript -->
                        </div>
                        
                        <div class="benchmark-legend">
                            <div class="legend-item-benchmark">
                                <div class="legend-color-benchmark legend-current"></div>
                                <span>Your Business</span>
                            </div>
                            <div class="legend-item-benchmark">
                                <div class="legend-color-benchmark legend-industry"></div>
                                <span>Industry Average</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Risk Level Threshold Display -->
                    <div class="threshold-container">
                        <div class="threshold-header">
                            <div class="threshold-title">
                                <i class="fas fa-layer-group"></i>
                                Risk Level Thresholds & Explanations
                            </div>
                            <div class="threshold-toggle">
                                <span>Show Details</span>
                                <div id="thresholdSwitch" class="threshold-switch active"></div>
                            </div>
                        </div>
                        
                        <div class="threshold-scale">
                            <div id="thresholdMarker" class="threshold-marker" style="left: 0%;"></div>
                        </div>
                        
                        <div class="threshold-labels">
                            <span>0</span>
                            <span>25</span>
                            <span>50</span>
                            <span>75</span>
                            <span>100</span>
                        </div>
                        
                        <div class="threshold-levels">
                            <div class="threshold-level" data-level="low">
                                <div class="threshold-level-header">
                                    <div class="threshold-level-icon low">L</div>
                                    <div class="threshold-level-name">Low Risk</div>
                                </div>
                                <div class="threshold-level-range">0 - 25</div>
                                <div class="threshold-level-description">
                                    Minimal risk exposure with strong controls and monitoring in place.
                                </div>
                                <div class="threshold-level-actions">
                                    Continue monitoring
                                </div>
                            </div>
                            
                            <div class="threshold-level" data-level="medium">
                                <div class="threshold-level-header">
                                    <div class="threshold-level-icon medium">M</div>
                                    <div class="threshold-level-name">Medium Risk</div>
                                </div>
                                <div class="threshold-level-range">26 - 50</div>
                                <div class="threshold-level-description">
                                    Moderate risk requiring regular review and potential mitigation actions.
                                </div>
                                <div class="threshold-level-actions">
                                    Review & monitor
                                </div>
                            </div>
                            
                            <div class="threshold-level" data-level="high">
                                <div class="threshold-level-header">
                                    <div class="threshold-level-icon high">H</div>
                                    <div class="threshold-level-name">High Risk</div>
                                </div>
                                <div class="threshold-level-range">51 - 75</div>
                                <div class="threshold-level-description">
                                    Significant risk requiring immediate attention and mitigation strategies.
                                </div>
                                <div class="threshold-level-actions">
                                    Take action
                                </div>
                            </div>
                            
                            <div class="threshold-level" data-level="critical">
                                <div class="threshold-level-header">
                                    <div class="threshold-level-icon critical">C</div>
                                    <div class="threshold-level-name">Critical Risk</div>
                                </div>
                                <div class="threshold-level-range">76 - 100</div>
                                <div class="threshold-level-description">
                                    Critical risk requiring immediate intervention and emergency response.
                                </div>
                                <div class="threshold-level-actions">
                                    Emergency action
                                </div>
                            </div>
                        </div>
                        
                        <div id="thresholdDetails" class="threshold-details">
                            <div class="threshold-details-header">
                                <i class="fas fa-info-circle" style="color: #8b5cf6;"></i>
                                <div class="threshold-details-title">Risk Level Guidelines</div>
                            </div>
                            <div class="threshold-details-content">
                                Risk levels are calculated based on multiple factors including historical data, 
                                current controls, external threats, and business impact. Each level has specific 
                                recommended actions and monitoring requirements.
                            </div>
                            <ul class="threshold-details-list">
                                <li>Risk scores are updated in real-time based on current conditions</li>
                                <li>Thresholds may vary by industry and business type</li>
                                <li>Regular reviews ensure accuracy and relevance</li>
                                <li>Escalation procedures are triggered automatically</li>
                            </ul>
                        </div>
                        
                        <div id="thresholdAlert" class="threshold-alert" style="display: none;">
                            <div class="threshold-alert-header">
                                <i class="fas fa-exclamation-triangle threshold-alert-icon"></i>
                                <div class="threshold-alert-title">Risk Level Alert</div>
                            </div>
                            <div class="threshold-alert-message">
                                Your current risk level requires immediate attention. Please review the 
                                recommended actions and consider implementing additional controls.
                            </div>
                        </div>
                    </div>
                    
                    <!-- Interactive Risk Level Controls -->
                    <div class="controls-container">
                        <div class="controls-header">
                            <div class="controls-title">
                                <i class="fas fa-sliders-h"></i>
                                Interactive Risk Level Controls
                            </div>
                            <div class="controls-status">
                                <div id="statusIndicator" class="status-indicator"></div>
                                <span id="statusText">Live Updates Active</span>
                            </div>
                        </div>
                        
                        <div class="controls-grid">
                            <!-- Risk Level Adjustment Controls -->
                            <div class="control-panel">
                                <div class="control-panel-header">
                                    <div class="control-panel-title">Risk Level Adjustment</div>
                                    <div id="riskAdjustmentToggle" class="control-toggle active"></div>
                                </div>
                                
                                <div class="control-slider">
                                    <div class="control-slider-label">
                                        <span>Risk Sensitivity</span>
                                        <span id="riskSensitivityValue">50%</span>
                                    </div>
                                    <input type="range" id="riskSensitivitySlider" class="control-slider-input" 
                                           min="0" max="100" value="50" step="5">
                                </div>
                                
                                <div class="control-slider">
                                    <div class="control-slider-label">
                                        <span>Alert Threshold</span>
                                        <span id="alertThresholdValue">75%</span>
                                    </div>
                                    <input type="range" id="alertThresholdSlider" class="control-slider-input" 
                                           min="0" max="100" value="75" step="5">
                                </div>
                                
                                <div class="control-buttons">
                                    <button class="control-button primary" id="applyRiskSettings">Apply Settings</button>
                                    <button class="control-button" id="resetRiskSettings">Reset</button>
                                </div>
                                
                                <div id="riskAdjustmentFeedback" class="control-feedback"></div>
                            </div>
                            
                            <!-- Real-Time Monitoring Controls -->
                            <div class="control-panel">
                                <div class="control-panel-header">
                                    <div class="control-panel-title">Real-Time Monitoring</div>
                                    <div id="monitoringToggle" class="control-toggle active"></div>
                                </div>
                                
                                <div class="control-slider">
                                    <div class="control-slider-label">
                                        <span>Update Frequency</span>
                                        <span id="updateFrequencyValue">30s</span>
                                    </div>
                                    <input type="range" id="updateFrequencySlider" class="control-slider-input" 
                                           min="10" max="300" value="30" step="10">
                                </div>
                                
                                <div class="control-buttons">
                                    <button class="control-button primary" id="startMonitoring">Start Monitoring</button>
                                    <button class="control-button danger" id="stopMonitoring">Stop</button>
                                </div>
                                
                                <div id="monitoringFeedback" class="control-feedback"></div>
                            </div>
                            
                            <!-- Alert Management Controls -->
                            <div class="control-panel">
                                <div class="control-panel-header">
                                    <div class="control-panel-title">Alert Management</div>
                                    <div id="alertToggle" class="control-toggle active"></div>
                                </div>
                                
                                <div class="control-slider">
                                    <div class="control-slider-label">
                                        <span>Alert Sensitivity</span>
                                        <span id="alertSensitivityValue">Medium</span>
                                    </div>
                                    <input type="range" id="alertSensitivitySlider" class="control-slider-input" 
                                           min="1" max="3" value="2" step="1">
                                </div>
                                
                                <div class="control-buttons">
                                    <button class="control-button primary" id="testAlert">Test Alert</button>
                                    <button class="control-button" id="clearAlerts">Clear All</button>
                                </div>
                                
                                <div id="alertFeedback" class="control-feedback"></div>
                            </div>
                            
                            <!-- Data Refresh Controls -->
                            <div class="control-panel">
                                <div class="control-panel-header">
                                    <div class="control-panel-title">Data Refresh</div>
                                    <div id="refreshToggle" class="control-toggle active"></div>
                                </div>
                                
                                <div class="control-slider">
                                    <div class="control-slider-label">
                                        <span>Auto Refresh</span>
                                        <span id="autoRefreshValue">5min</span>
                                    </div>
                                    <input type="range" id="autoRefreshSlider" class="control-slider-input" 
                                           min="1" max="60" value="5" step="1">
                                </div>
                                
                                <div class="control-buttons">
                                    <button class="control-button primary" id="refreshNow">Refresh Now</button>
                                    <button class="control-button" id="pauseRefresh">Pause</button>
                                </div>
                                
                                <div id="refreshFeedback" class="control-feedback"></div>
                            </div>
                        </div>
                        
                        <!-- Live Updates Log -->
                        <div class="live-updates">
                            <div class="live-updates-header">
                                <div class="live-updates-title">
                                    <i class="fas fa-broadcast-tower"></i>
                                    Live Updates Log
                                </div>
                                <div class="update-frequency">
                                    <span id="updateFrequencyDisplay">30s intervals</span>
                                </div>
                            </div>
                            
                            <div id="updateLog" class="update-log">
                                <!-- Update entries will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Risk Level History and Timeline -->
                    <div class="history-container">
                        <div class="history-header">
                            <div class="history-title">
                                <i class="fas fa-history"></i>
                                Risk Level History & Timeline
                            </div>
                            <div class="history-controls">
                                <div class="history-period-selector">
                                    <span>Period:</span>
                                    <select id="historyPeriodSelect" class="history-select">
                                        <option value="7d">Last 7 Days</option>
                                        <option value="30d" selected>Last 30 Days</option>
                                        <option value="90d">Last 90 Days</option>
                                        <option value="1y">Last Year</option>
                                    </select>
                                </div>
                                <div class="history-view-toggle">
                                    <button class="history-view-button active" data-view="timeline">Timeline</button>
                                    <button class="history-view-button" data-view="chart">Chart</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="history-content">
                            <!-- History Summary -->
                            <div class="history-summary">
                                <div class="history-summary-title">Risk History Summary</div>
                                
                                <div class="history-metrics">
                                    <div class="history-metric">
                                        <div class="history-metric-value" id="historyAverageScore">65</div>
                                        <div class="history-metric-label">Average Score</div>
                                    </div>
                                    <div class="history-metric">
                                        <div class="history-metric-value" id="historyHighestScore">78</div>
                                        <div class="history-metric-label">Highest Score</div>
                                    </div>
                                    <div class="history-metric">
                                        <div class="history-metric-value" id="historyLowestScore">42</div>
                                        <div class="history-metric-label">Lowest Score</div>
                                    </div>
                                    <div class="history-metric">
                                        <div class="history-metric-value" id="historyTotalAssessments">24</div>
                                        <div class="history-metric-label">Assessments</div>
                                    </div>
                                </div>
                                
                                <div class="history-trend">
                                    <div class="history-trend-icon improving">â†—</div>
                                    <div class="history-trend-text">
                                        <div>Overall Trend</div>
                                        <div class="history-trend-value">Improving (+8 points)</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Timeline -->
                            <div class="timeline-container">
                                <div class="timeline-title">Risk Assessment Timeline</div>
                                <div id="historyTimeline" class="timeline">
                                    <!-- Timeline items will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- History Chart -->
                        <div id="historyChart" class="history-chart" style="display: none;">
                            <div class="history-chart-title">Risk Score Trend Chart</div>
                            <div class="history-chart-container">
                                <div class="history-chart-line">
                                    <svg class="history-chart-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                                        <path id="historyChartPath" class="history-chart-path" d=""></path>
                                    </svg>
                                    <div id="historyChartPoints" class="history-chart-points">
                                        <!-- Chart points will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Risk Level Impact Indicators and Business Implications -->
                    <div class="impact-container">
                        <div class="impact-header">
                            <div class="impact-title">
                                <i class="fas fa-exclamation-triangle"></i>
                                Risk Impact & Business Implications
                            </div>
                            <div id="impactSeverity" class="impact-severity medium">
                                Medium Impact
                            </div>
                        </div>
                        
                        <div class="impact-content">
                            <!-- Impact Indicators -->
                            <div class="impact-indicators">
                                <div class="impact-indicators-title">
                                    <i class="fas fa-chart-line"></i>
                                    Impact Indicators
                                </div>
                                <div id="impactIndicatorsList">
                                    <!-- Impact indicators will be populated by JavaScript -->
                                </div>
                            </div>
                            
                            <!-- Business Implications -->
                            <div class="business-implications">
                                <div class="business-implications-title">
                                    <i class="fas fa-building"></i>
                                    Business Implications
                                </div>
                                <div id="businessImplicationsList">
                                    <!-- Business implications will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Action Recommendations -->
                        <div class="action-recommendations">
                            <div class="action-recommendations-title">
                                <i class="fas fa-tasks"></i>
                                Recommended Actions
                            </div>
                            <div id="actionRecommendationsGrid" class="action-grid">
                                <!-- Action recommendations will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Impact Alert (shown for high/critical risk levels) -->
                        <div id="impactAlert" class="impact-alert" style="display: none;">
                            <div class="impact-alert-header">
                                <div class="impact-alert-icon">!</div>
                                <div class="impact-alert-title">High Risk Alert</div>
                            </div>
                            <div class="impact-alert-message">
                                This risk level requires immediate attention and may have significant business impact. Please review the recommended actions and consider escalating to senior management.
                            </div>
                        </div>
                    </div>
                    
                    <!-- Enhanced Risk Factor Breakdown -->
                    <div id="categoryDetails" class="hidden mt-6 pt-6 border-t">
                        <div class="space-y-6">
                            <!-- Risk Factor Categories -->
                            <div>
                                <h5 class="font-medium text-gray-900 mb-4">Risk Factor Breakdown</h5>
                                <div id="riskFactorCategories" class="space-y-4">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                            
                            <!-- Risk Factor Comparison Chart -->
                            <div>
                                <h5 class="font-medium text-gray-900 mb-4">Risk Factor Comparison</h5>
                                <div class="bg-white p-4 rounded-lg border">
                                    <canvas id="riskFactorComparisonChart" width="400" height="200"></canvas>
                                </div>
                            </div>
                            
                            <!-- Detailed Risk Factor Analysis -->
                            <div>
                                <h5 class="font-medium text-gray-900 mb-4">Detailed Risk Factor Analysis</h5>
                                <div id="detailedRiskAnalysis" class="space-y-4">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                            
                            <!-- Risk Trends Chart -->
                            <div>
                                <h5 class="font-medium text-gray-900 mb-4">Risk Trends</h5>
                                <div class="h-64">
                                    <canvas id="riskTrendChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Risk Alerts -->
            <div id="riskAlerts" class="slide-up">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-900">Active Risk Alerts</h3>
                        <span id="alertCount" class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded">0 alerts</span>
                    </div>
                    
                    <div id="alertsList" class="space-y-4">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Enhanced Risk Recommendations Engine -->
            <div id="riskRecommendations" class="slide-up">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-xl font-bold text-gray-900">Risk Mitigation Recommendations</h3>
                            <p class="text-sm text-gray-600 mt-1">AI-powered recommendations to reduce business risk</p>
                        </div>
                        <div class="flex space-x-2">
                            <button id="priorityFilter" class="px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200" onclick="filterRecommendations('all')">
                                All
                            </button>
                            <button class="px-3 py-1 text-xs font-medium text-gray-600 hover:bg-gray-100 rounded-full" onclick="filterRecommendations('high')">
                                High Priority
                            </button>
                            <button class="px-3 py-1 text-xs font-medium text-gray-600 hover:bg-gray-100 rounded-full" onclick="filterRecommendations('medium')">
                                Medium Priority
                            </button>
                            <button class="px-3 py-1 text-xs font-medium text-gray-600 hover:bg-gray-100 rounded-full" onclick="filterRecommendations('low')">
                                Low Priority
                            </button>
                        </div>
                    </div>
                    
                    <!-- Recommendation Summary Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-red-800">High Priority</p>
                                    <p class="text-2xl font-bold text-red-900" id="highPriorityCount">0</p>
                                </div>
                                <i class="fas fa-exclamation-triangle text-red-500 text-xl"></i>
                            </div>
                        </div>
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-yellow-800">Medium Priority</p>
                                    <p class="text-2xl font-bold text-yellow-900" id="mediumPriorityCount">0</p>
                                </div>
                                <i class="fas fa-exclamation-circle text-yellow-500 text-xl"></i>
                            </div>
                        </div>
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-green-800">Low Priority</p>
                                    <p class="text-2xl font-bold text-green-900" id="lowPriorityCount">0</p>
                                </div>
                                <i class="fas fa-info-circle text-green-500 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recommendations List with Enhanced Features -->
                    <div id="recommendationsList" class="space-y-4">
                        <!-- Populated by JavaScript -->
                    </div>
                    
                    <!-- Implementation Timeline -->
                    <div class="mt-8 pt-6 border-t">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">Implementation Timeline</h4>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <canvas id="recommendationTimelineChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                    
                    <!-- Recommendation Impact Analysis -->
                    <div class="mt-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">Expected Impact Analysis</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-white border rounded-lg p-4">
                                <h5 class="font-medium text-gray-900 mb-3">Risk Reduction Potential</h5>
                                <canvas id="riskReductionChart" width="300" height="200"></canvas>
                            </div>
                            <div class="bg-white border rounded-lg p-4">
                                <h5 class="font-medium text-gray-900 mb-3">Implementation Effort vs Impact</h5>
                                <canvas id="effortImpactChart" width="300" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error State -->
        <div id="errorState" class="hidden">
            <div class="bg-red-50 border border-red-200 rounded-lg p-6">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fas fa-exclamation-triangle text-red-400"></i>
                    </div>
                    <div class="ml-3">
                        <h3 class="text-sm font-medium text-red-800">Risk Assessment Error</h3>
                        <div class="mt-2 text-sm text-red-700">
                            <p id="errorMessage">An error occurred during risk assessment. Please try again.</p>
                        </div>
                        <div class="mt-4">
                            <button onclick="retryAssessment()" class="bg-red-100 text-red-800 px-4 py-2 rounded-md text-sm font-medium hover:bg-red-200">
                                Retry Assessment
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // API Base URL
        const API_BASE_URL = window.location.origin + '/v1';
        
        // DOM Elements
        const riskAssessmentForm = document.getElementById('riskAssessmentForm');
        const loadingState = document.getElementById('loadingState');
        const riskDashboardResults = document.getElementById('riskDashboardResults');
        const errorState = document.getElementById('errorState');
        
        // Chart instances
        let riskTrendChart = null;

        // Event Listeners
        riskAssessmentForm.addEventListener('submit', handleRiskAssessment);
        document.getElementById('refreshBtn').addEventListener('click', refreshData);

        // Risk Assessment Handler
        async function handleRiskAssessment(e) {
            e.preventDefault();
            
            const formData = new FormData(riskAssessmentForm);
            const data = {
                business_id: formData.get('businessId'),
                business_name: formData.get('businessName'),
                categories: getSelectedCategories(formData.get('assessmentType')),
                include_history: true,
                include_predictions: true
            };

            showLoading();
            hideResults();
            hideError();

            try {
                const response = await fetch(`${API_BASE_URL}/risk/assess`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                
                if (response.ok && result.assessment) {
                    displayRiskDashboardResults(result);
                } else {
                    showError('Risk assessment failed. Please try again.');
                }
                
            } catch (error) {
                console.error('Error:', error);
                showError('An error occurred during risk assessment. Please try again.');
            }
        }

        // Display Risk Dashboard Results
        function displayRiskDashboardResults(result) {
            hideLoading();
            riskDashboardResults.classList.remove('hidden');
            
            const assessment = result.assessment;
            
            // Populate overall risk score
            populateOverallRiskScore(assessment);
            
            // Populate risk category breakdown
            populateRiskCategoryBreakdown(assessment);
            
            // Populate risk alerts
            populateRiskAlerts(assessment.alerts || []);
            
            // Populate risk recommendations
            populateRiskRecommendations(assessment.recommendations || []);
            
            // Animate progressive disclosure
            setTimeout(() => {
                document.getElementById('overallRiskScore').classList.add('fade-in');
            }, 100);
            
            setTimeout(() => {
                document.getElementById('riskCategoryBreakdown').classList.add('slide-up');
            }, 300);
            
            setTimeout(() => {
                document.getElementById('riskAlerts').classList.add('slide-up');
            }, 500);
            
            setTimeout(() => {
                document.getElementById('riskRecommendations').classList.add('slide-up');
            }, 700);
        }

        // Populate Overall Risk Score
        function populateOverallRiskScore(assessment) {
            const riskScore = assessment.overall_score || 0;
            const riskLevel = assessment.overall_level || 'low';
            const confidence = assessment.factor_scores?.[0]?.confidence || 0.8;
            
            // Update risk score display
            document.getElementById('riskScoreValue').textContent = Math.round(riskScore);
            
            // Update risk level badge
            const riskLevelBadge = document.getElementById('riskLevelBadge');
            riskLevelBadge.textContent = riskLevel.toUpperCase();
            riskLevelBadge.className = `px-3 py-1 rounded-full text-sm font-medium ${getRiskLevelClass(riskLevel)}`;
            
            // Update confidence badge
            document.getElementById('confidenceBadge').textContent = `${Math.round(confidence * 100)}% Confidence`;
            
            // Update gauge needle
            updateGaugeNeedle(riskScore);
            
            // Update risk summary
            document.getElementById('riskSummary').textContent = getRiskSummary(riskScore, riskLevel);
            
            // Update key risk factors
            populateKeyRiskFactors(assessment.factor_scores || []);
            
            // Update assessment details
            document.getElementById('assessedAt').textContent = formatDate(assessment.assessed_at);
            document.getElementById('validUntil').textContent = formatDate(assessment.valid_until);
            document.getElementById('confidenceScore').textContent = `${Math.round(confidence * 100)}%`;
            document.getElementById('alertLevel').textContent = assessment.alert_level || 'None';
        }

        // Populate Risk Category Breakdown
        function populateRiskCategoryBreakdown(assessment) {
            const categories = ['financial', 'operational', 'regulatory', 'reputational', 'cybersecurity'];
            
            categories.forEach(category => {
                const categoryScore = assessment.category_scores?.[category]?.score || 0;
                const categoryLevel = assessment.category_scores?.[category]?.level || 'low';
                
                // Update score display
                document.getElementById(`${category}RiskScore`).textContent = Math.round(categoryScore);
                
                // Update level badge with enhanced styling
                const levelElement = document.getElementById(`${category}RiskLevel`);
                levelElement.textContent = categoryLevel.toUpperCase();
                levelElement.className = `risk-badge px-3 py-1 text-xs font-bold ${getRiskLevelClass(categoryLevel)}`;
                
                // Update risk icon
                const iconElement = levelElement.closest('.p-4').querySelector('.risk-icon');
                iconElement.className = `risk-icon ${getRiskIconClass(categoryLevel)}`;
                
                // Update progress bar with enhanced styling
                const progressElement = document.getElementById(`${category}RiskProgress`);
                progressElement.style.width = `${categoryScore}%`;
                progressElement.className = `progress-fill ${getRiskProgressClass(categoryLevel)}`;
            });
            
            // Populate enhanced risk factor breakdown
            populateRiskFactorCategories(assessment.factor_scores || []);
            populateDetailedRiskAnalysis(assessment.factor_scores || []);
            createRiskFactorComparisonChart(assessment.factor_scores || []);
            
            // Create risk trend chart
            createRiskTrendChart(assessment);
            
            // Create risk heat map
            createRiskHeatMap(assessment);
            
            // Update risk trends
            updateRiskTrends(assessment);
            
            // Create risk radar chart
            createRiskRadarChart(assessment);
            
            // Update risk confidence indicators
            updateRiskConfidenceIndicators(assessment);
            
            // Create industry benchmark comparison
            createIndustryBenchmarkComparison(assessment);
            
            // Create risk level threshold display
            createRiskLevelThresholdDisplay(assessment);
            
            // Create interactive risk level controls
            createInteractiveRiskControls(assessment);
            
            // Create risk level history and timeline
            createRiskLevelHistory(assessment);
            
            // Create risk level impact indicators and business implications
            createRiskLevelImpactIndicators(assessment);
            
            // Initialize tooltips after data is populated
            setTimeout(() => {
                initializeTooltips();
            }, 100);
        }

        // Populate Risk Alerts
        function populateRiskAlerts(alerts) {
            const alertsList = document.getElementById('alertsList');
            const alertCount = document.getElementById('alertCount');
            
            alertCount.textContent = `${alerts.length} alert${alerts.length !== 1 ? 's' : ''}`;
            
            if (alerts.length === 0) {
                alertsList.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-check-circle text-green-500 text-3xl mb-2"></i>
                        <p>No active risk alerts</p>
                    </div>
                `;
                return;
            }
            
            alertsList.innerHTML = alerts.map(alert => `
                <div class="flex items-center justify-between p-4 border rounded-lg ${getAlertBorderClass(alert.level)}">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle ${getAlertIconClass(alert.level)} mr-3"></i>
                        <div>
                            <h4 class="font-medium text-gray-900">${alert.message}</h4>
                            <p class="text-sm text-gray-600">${alert.risk_factor} â€¢ ${formatDate(alert.triggered_at)}</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="px-2 py-1 rounded text-xs font-medium ${getRiskLevelClass(alert.level)}">${alert.level.toUpperCase()}</span>
                        <button class="text-blue-600 hover:text-blue-800 text-sm" onclick="acknowledgeAlert('${alert.id}')">
                            Acknowledge
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Enhanced Risk Recommendations Engine
        let allRecommendations = [];
        let currentFilter = 'all';
        
        function populateRiskRecommendations(recommendations) {
            allRecommendations = recommendations || [];
            
            if (allRecommendations.length === 0) {
                allRecommendations = generateDefaultRecommendations();
            }
            
            // Update priority counts
            updatePriorityCounts();
            
            // Render recommendations based on current filter
            renderRecommendations();
            
            // Create timeline chart
            createRecommendationTimelineChart();
            
            // Create impact analysis charts
            createRiskReductionChart();
            createEffortImpactChart();
        }
        
        function generateDefaultRecommendations() {
            return [
                {
                    id: 'rec-1',
                    title: 'Implement Multi-Factor Authentication',
                    description: 'Add MFA to all business accounts to prevent unauthorized access and reduce cybersecurity risk.',
                    priority: 'high',
                    category: 'Cybersecurity',
                    impact: 'High',
                    effort: 'Medium',
                    timeline: '2-4 weeks',
                    riskReduction: 25,
                    status: 'pending',
                    actions: [
                        'Select MFA provider',
                        'Configure user accounts',
                        'Train staff on MFA usage',
                        'Monitor implementation'
                    ],
                    cost: '$500-2000',
                    roi: 'High'
                },
                {
                    id: 'rec-2',
                    title: 'Establish Financial Monitoring System',
                    description: 'Implement automated financial monitoring to detect unusual transactions and prevent fraud.',
                    priority: 'high',
                    category: 'Financial',
                    impact: 'High',
                    effort: 'High',
                    timeline: '4-6 weeks',
                    riskReduction: 30,
                    status: 'pending',
                    actions: [
                        'Research monitoring tools',
                        'Set up automated alerts',
                        'Define risk thresholds',
                        'Train finance team'
                    ],
                    cost: '$2000-5000',
                    roi: 'Very High'
                },
                {
                    id: 'rec-3',
                    title: 'Create Business Continuity Plan',
                    description: 'Develop comprehensive business continuity plan to ensure operations during disruptions.',
                    priority: 'medium',
                    category: 'Operational',
                    impact: 'Medium',
                    effort: 'High',
                    timeline: '6-8 weeks',
                    riskReduction: 20,
                    status: 'pending',
                    actions: [
                        'Assess critical processes',
                        'Identify backup systems',
                        'Create communication plan',
                        'Test and refine plan'
                    ],
                    cost: '$1000-3000',
                    roi: 'Medium'
                },
                {
                    id: 'rec-4',
                    title: 'Enhance Data Privacy Compliance',
                    description: 'Update data handling procedures to ensure compliance with privacy regulations.',
                    priority: 'medium',
                    category: 'Regulatory',
                    impact: 'Medium',
                    effort: 'Medium',
                    timeline: '3-5 weeks',
                    riskReduction: 15,
                    status: 'pending',
                    actions: [
                        'Audit current practices',
                        'Update privacy policies',
                        'Train staff on compliance',
                        'Implement monitoring'
                    ],
                    cost: '$800-2000',
                    roi: 'Medium'
                },
                {
                    id: 'rec-5',
                    title: 'Improve Customer Communication',
                    description: 'Enhance customer communication channels to build trust and reduce reputational risk.',
                    priority: 'low',
                    category: 'Reputational',
                    impact: 'Low',
                    effort: 'Low',
                    timeline: '1-2 weeks',
                    riskReduction: 10,
                    status: 'pending',
                    actions: [
                        'Update website content',
                        'Improve response times',
                        'Create feedback system',
                        'Monitor customer satisfaction'
                    ],
                    cost: '$200-800',
                    roi: 'Low'
                }
            ];
        }
        
        function updatePriorityCounts() {
            const counts = {
                high: allRecommendations.filter(r => r.priority === 'high').length,
                medium: allRecommendations.filter(r => r.priority === 'medium').length,
                low: allRecommendations.filter(r => r.priority === 'low').length
            };
            
            document.getElementById('highPriorityCount').textContent = counts.high;
            document.getElementById('mediumPriorityCount').textContent = counts.medium;
            document.getElementById('lowPriorityCount').textContent = counts.low;
        }
        
        function filterRecommendations(filter) {
            currentFilter = filter;
            
            // Update filter buttons
            document.querySelectorAll('[onclick^="filterRecommendations"]').forEach(btn => {
                btn.className = 'px-3 py-1 text-xs font-medium text-gray-600 hover:bg-gray-100 rounded-full';
            });
            
            const activeButton = document.querySelector(`[onclick="filterRecommendations('${filter}')"]`);
            if (activeButton) {
                activeButton.className = 'px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200';
            }
            
            renderRecommendations();
        }
        
        function renderRecommendations() {
            const recommendationsList = document.getElementById('recommendationsList');
            
            let filteredRecommendations = allRecommendations;
            if (currentFilter !== 'all') {
                filteredRecommendations = allRecommendations.filter(r => r.priority === currentFilter);
            }
            
            if (filteredRecommendations.length === 0) {
                recommendationsList.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-filter text-gray-400 text-3xl mb-2"></i>
                        <p>No recommendations found for the selected filter</p>
                    </div>
                `;
                return;
            }
            
            recommendationsList.innerHTML = filteredRecommendations.map(rec => createRecommendationCard(rec)).join('');
        }
        
        function createRecommendationCard(rec) {
            const priorityColors = {
                high: 'bg-red-100 text-red-800 border-red-200',
                medium: 'bg-yellow-100 text-yellow-800 border-yellow-200',
                low: 'bg-green-100 text-green-800 border-green-200'
            };
            
            const statusColors = {
                pending: 'bg-gray-100 text-gray-800',
                in_progress: 'bg-blue-100 text-blue-800',
                completed: 'bg-green-100 text-green-800',
                cancelled: 'bg-red-100 text-red-800'
            };
            
            return `
                <div class="bg-white border rounded-lg p-6 hover:shadow-md transition-shadow" data-recommendation-id="${rec.id}">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0">
                                <i class="fas fa-lightbulb text-yellow-500 text-xl"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-900 mb-1">${rec.title}</h4>
                                <p class="text-sm text-gray-600 mb-3">${rec.description}</p>
                                
                                <!-- Recommendation Metadata -->
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs">
                                    <div>
                                        <span class="font-medium text-gray-700">Category:</span>
                                        <p class="text-gray-600">${rec.category}</p>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Timeline:</span>
                                        <p class="text-gray-600">${rec.timeline}</p>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Cost:</span>
                                        <p class="text-gray-600">${rec.cost}</p>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">ROI:</span>
                                        <p class="text-gray-600">${rec.roi}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col items-end space-y-2">
                            <span class="px-3 py-1 rounded-full text-xs font-medium border ${priorityColors[rec.priority]}">
                                ${rec.priority.toUpperCase()}
                            </span>
                            <span class="px-3 py-1 rounded-full text-xs font-medium ${statusColors[rec.status]}">
                                ${rec.status.replace('_', ' ').toUpperCase()}
                            </span>
                        </div>
                    </div>
                    
                    <!-- Progress and Impact -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div class="bg-gray-50 rounded-lg p-3">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-xs font-medium text-gray-700">Risk Reduction</span>
                                <span class="text-xs font-bold text-green-600">${rec.riskReduction}%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full" style="width: ${rec.riskReduction}%"></div>
                            </div>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-3">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-xs font-medium text-gray-700">Impact</span>
                                <span class="text-xs font-bold text-blue-600">${rec.impact}</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-500 h-2 rounded-full" style="width: ${getImpactWidth(rec.impact)}%"></div>
                            </div>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-3">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-xs font-medium text-gray-700">Effort</span>
                                <span class="text-xs font-bold text-orange-600">${rec.effort}</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-orange-500 h-2 rounded-full" style="width: ${getEffortWidth(rec.effort)}%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Items -->
                    <div class="mb-4">
                        <h5 class="text-sm font-medium text-gray-900 mb-2">Action Items:</h5>
                        <div class="space-y-1">
                            ${rec.actions.map((action, index) => `
                                <div class="flex items-center space-x-2 text-xs">
                                    <input type="checkbox" class="rounded border-gray-300" id="action-${rec.id}-${index}">
                                    <label for="action-${rec.id}-${index}" class="text-gray-600">${action}</label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="flex justify-between items-center pt-4 border-t">
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 text-xs font-medium bg-blue-600 text-white rounded hover:bg-blue-700" onclick="startRecommendation('${rec.id}')">
                                <i class="fas fa-play mr-1"></i>Start
                            </button>
                            <button class="px-3 py-1 text-xs font-medium bg-gray-600 text-white rounded hover:bg-gray-700" onclick="viewRecommendationDetails('${rec.id}')">
                                <i class="fas fa-eye mr-1"></i>Details
                            </button>
                        </div>
                        <div class="text-xs text-gray-500">
                            <i class="fas fa-chart-line mr-1"></i>Expected ROI: ${rec.roi}
                        </div>
                    </div>
                </div>
            `;
        }
        
        function getImpactWidth(impact) {
            const impactMap = { 'Low': 25, 'Medium': 50, 'High': 75, 'Very High': 100 };
            return impactMap[impact] || 50;
        }
        
        function getEffortWidth(effort) {
            const effortMap = { 'Low': 25, 'Medium': 50, 'High': 75, 'Very High': 100 };
            return effortMap[effort] || 50;
        }
        
        function startRecommendation(recommendationId) {
            const recommendation = allRecommendations.find(r => r.id === recommendationId);
            if (recommendation) {
                recommendation.status = 'in_progress';
                renderRecommendations();
                showNotification(`Started implementation of: ${recommendation.title}`, 'success');
            }
        }
        
        function viewRecommendationDetails(recommendationId) {
            const recommendation = allRecommendations.find(r => r.id === recommendationId);
            if (recommendation) {
                // Create modal or detailed view
                showRecommendationModal(recommendation);
            }
        }
        
        function showRecommendationModal(recommendation) {
            // Implementation for detailed recommendation modal
            alert(`Detailed view for: ${recommendation.title}\n\nDescription: ${recommendation.description}\n\nActions: ${recommendation.actions.join('\nâ€¢ ')}`);
        }
        
        function showNotification(message, type = 'info') {
            // Simple notification implementation
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-4 py-2 rounded-lg text-white text-sm z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 'bg-blue-500'
            }`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 3000);
        }
        
        // Chart Creation Functions for Recommendations
        function createRecommendationTimelineChart() {
            const ctx = document.getElementById('recommendationTimelineChart');
            if (!ctx) return;
            
            // Destroy existing chart if it exists
            if (window.recommendationTimelineChart) {
                window.recommendationTimelineChart.destroy();
            }
            
            const timelineData = allRecommendations.map(rec => ({
                label: rec.title,
                start: 0,
                duration: getTimelineWeeks(rec.timeline),
                priority: rec.priority
            }));
            
            window.recommendationTimelineChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: timelineData.map(d => d.label.length > 30 ? d.label.substring(0, 30) + '...' : d.label),
                    datasets: [{
                        label: 'Implementation Timeline (weeks)',
                        data: timelineData.map(d => d.duration),
                        backgroundColor: timelineData.map(d => 
                            d.priority === 'high' ? 'rgba(239, 68, 68, 0.8)' :
                            d.priority === 'medium' ? 'rgba(245, 158, 11, 0.8)' :
                            'rgba(34, 197, 94, 0.8)'
                        ),
                        borderColor: timelineData.map(d => 
                            d.priority === 'high' ? 'rgba(239, 68, 68, 1)' :
                            d.priority === 'medium' ? 'rgba(245, 158, 11, 1)' :
                            'rgba(34, 197, 94, 1)'
                        ),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const rec = allRecommendations[context.dataIndex];
                                    return [
                                        `Timeline: ${rec.timeline}`,
                                        `Priority: ${rec.priority.toUpperCase()}`,
                                        `Cost: ${rec.cost}`,
                                        `ROI: ${rec.roi}`
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Weeks'
                            }
                        },
                        x: {
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }
        
        function createRiskReductionChart() {
            const ctx = document.getElementById('riskReductionChart');
            if (!ctx) return;
            
            // Destroy existing chart if it exists
            if (window.riskReductionChart) {
                window.riskReductionChart.destroy();
            }
            
            const categories = ['Cybersecurity', 'Financial', 'Operational', 'Regulatory', 'Reputational'];
            const categoryData = categories.map(category => {
                const categoryRecs = allRecommendations.filter(rec => rec.category === category);
                const totalReduction = categoryRecs.reduce((sum, rec) => sum + rec.riskReduction, 0);
                return totalReduction;
            });
            
            window.riskReductionChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: categories,
                    datasets: [{
                        data: categoryData,
                        backgroundColor: [
                            'rgba(239, 68, 68, 0.8)',
                            'rgba(34, 197, 94, 0.8)',
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(168, 85, 247, 0.8)'
                        ],
                        borderColor: [
                            'rgba(239, 68, 68, 1)',
                            'rgba(34, 197, 94, 1)',
                            'rgba(59, 130, 246, 1)',
                            'rgba(245, 158, 11, 1)',
                            'rgba(168, 85, 247, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return `${context.label}: ${context.parsed}% risk reduction (${percentage}% of total)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function createEffortImpactChart() {
            const ctx = document.getElementById('effortImpactChart');
            if (!ctx) return;
            
            // Destroy existing chart if it exists
            if (window.effortImpactChart) {
                window.effortImpactChart.destroy();
            }
            
            const scatterData = allRecommendations.map(rec => ({
                x: getEffortValue(rec.effort),
                y: getImpactValue(rec.impact),
                label: rec.title,
                priority: rec.priority,
                cost: rec.cost,
                roi: rec.roi
            }));
            
            window.effortImpactChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Recommendations',
                        data: scatterData,
                        backgroundColor: scatterData.map(d => 
                            d.priority === 'high' ? 'rgba(239, 68, 68, 0.6)' :
                            d.priority === 'medium' ? 'rgba(245, 158, 11, 0.6)' :
                            'rgba(34, 197, 94, 0.6)'
                        ),
                        borderColor: scatterData.map(d => 
                            d.priority === 'high' ? 'rgba(239, 68, 68, 1)' :
                            d.priority === 'medium' ? 'rgba(245, 158, 11, 1)' :
                            'rgba(34, 197, 94, 1)'
                        ),
                        borderWidth: 2,
                        pointRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    return context[0].raw.label;
                                },
                                label: function(context) {
                                    const data = context.raw;
                                    return [
                                        `Effort: ${getEffortLabel(data.x)}`,
                                        `Impact: ${getImpactLabel(data.y)}`,
                                        `Priority: ${data.priority.toUpperCase()}`,
                                        `Cost: ${data.cost}`,
                                        `ROI: ${data.roi}`
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Implementation Effort'
                            },
                            min: 0,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return getEffortLabel(value);
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Expected Impact'
                            },
                            min: 0,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return getImpactLabel(value);
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Helper functions for chart data
        function getTimelineWeeks(timeline) {
            const match = timeline.match(/(\d+)-(\d+)/);
            if (match) {
                return (parseInt(match[1]) + parseInt(match[2])) / 2;
            }
            const singleMatch = timeline.match(/(\d+)/);
            return singleMatch ? parseInt(singleMatch[1]) : 4;
        }
        
        function getEffortValue(effort) {
            const effortMap = { 'Low': 25, 'Medium': 50, 'High': 75, 'Very High': 100 };
            return effortMap[effort] || 50;
        }
        
        function getImpactValue(impact) {
            const impactMap = { 'Low': 25, 'Medium': 50, 'High': 75, 'Very High': 100 };
            return impactMap[impact] || 50;
        }
        
        function getEffortLabel(value) {
            if (value <= 25) return 'Low';
            if (value <= 50) return 'Medium';
            if (value <= 75) return 'High';
            return 'Very High';
        }
        
        function getImpactLabel(value) {
            if (value <= 25) return 'Low';
            if (value <= 50) return 'Medium';
            if (value <= 75) return 'High';
            return 'Very High';
        }

        // Utility Functions
        function showLoading() {
            loadingState.classList.remove('hidden');
        }

        function hideLoading() {
            loadingState.classList.add('hidden');
        }

        function hideResults() {
            riskDashboardResults.classList.add('hidden');
        }

        function showError(message) {
            hideLoading();
            errorState.classList.remove('hidden');
            document.getElementById('errorMessage').textContent = message;
        }

        function hideError() {
            errorState.classList.add('hidden');
        }

        function retryAssessment() {
            hideError();
            riskAssessmentForm.dispatchEvent(new Event('submit'));
        }

        function refreshData() {
            if (riskDashboardResults.classList.contains('hidden')) {
                return;
            }
            riskAssessmentForm.dispatchEvent(new Event('submit'));
        }

        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const button = event.target;
            const icon = button.querySelector('i');
            
            if (section.classList.contains('hidden')) {
                section.classList.remove('hidden');
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
                button.innerHTML = '<i class="fas fa-chevron-up mr-1"></i>Hide Details';
            } else {
                section.classList.add('hidden');
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
                button.innerHTML = '<i class="fas fa-chevron-down mr-1"></i>Show Details';
            }
        }

        function getSelectedCategories(assessmentType) {
            if (assessmentType === 'comprehensive') {
                return ['financial', 'operational', 'regulatory', 'reputational', 'cybersecurity'];
            }
            return [assessmentType];
        }

        function getRiskLevelClass(level) {
            switch (level.toLowerCase()) {
                case 'low': return 'risk-low';
                case 'medium': return 'risk-medium';
                case 'high': return 'risk-high';
                case 'critical': return 'risk-critical';
                default: return 'risk-low';
            }
        }
        
        function getRiskIconClass(level) {
            switch (level.toLowerCase()) {
                case 'low': return 'risk-icon-low';
                case 'medium': return 'risk-icon-medium';
                case 'high': return 'risk-icon-high';
                case 'critical': return 'risk-icon-critical';
                default: return 'risk-icon-low';
            }
        }

        function getRiskProgressClass(level) {
            switch (level.toLowerCase()) {
                case 'low': return 'progress-low';
                case 'medium': return 'progress-medium';
                case 'high': return 'progress-high';
                case 'critical': return 'progress-critical';
                default: return 'progress-low';
            }
        }

        function getAlertBorderClass(level) {
            switch (level.toLowerCase()) {
                case 'low': return 'border-green-200 bg-green-50';
                case 'medium': return 'border-yellow-200 bg-yellow-50';
                case 'high': return 'border-orange-200 bg-orange-50';
                case 'critical': return 'border-red-200 bg-red-50';
                default: return 'border-gray-200 bg-gray-50';
            }
        }

        function getAlertIconClass(level) {
            switch (level.toLowerCase()) {
                case 'low': return 'text-green-500';
                case 'medium': return 'text-yellow-500';
                case 'high': return 'text-orange-500';
                case 'critical': return 'text-red-500';
                default: return 'text-gray-500';
            }
        }

        function updateGaugeNeedle(score) {
            const needle = document.getElementById('gaugeNeedle');
            const angle = (score / 100) * 180 - 90; // Convert score to angle (-90 to 90 degrees)
            needle.style.transform = `translate(-50%, -100%) rotate(${angle}deg)`;
        }

        function getRiskSummary(score, level) {
            if (score <= 25) {
                return "The business demonstrates a low risk profile with strong operational controls and compliance measures in place.";
            } else if (score <= 50) {
                return "The business shows a moderate risk profile with some areas requiring attention and monitoring.";
            } else if (score <= 75) {
                return "The business presents elevated risk factors that require immediate attention and mitigation strategies.";
            } else {
                return "The business shows critical risk indicators that require urgent intervention and comprehensive risk management.";
            }
        }

        function populateKeyRiskFactors(factorScores) {
            const container = document.getElementById('keyRiskFactors');
            const topFactors = factorScores.slice(0, 3);
            
            container.innerHTML = topFactors.map(factor => `
                <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-600">${factor.factor_name}</span>
                    <span class="text-sm font-medium ${getRiskLevelClass(factor.level)}">${factor.level.toUpperCase()}</span>
                </div>
            `).join('');
        }

        // Enhanced Risk Factor Breakdown Functions
        function populateRiskFactorCategories(factorScores) {
            const container = document.getElementById('riskFactorCategories');
            
            // Group factors by category
            const categories = {
                'Financial': [],
                'Operational': [],
                'Regulatory': [],
                'Reputational': [],
                'Cybersecurity': []
            };
            
            factorScores.forEach(factor => {
                const category = factor.category || 'Operational';
                if (categories[category]) {
                    categories[category].push(factor);
                }
            });
            
            container.innerHTML = Object.entries(categories).map(([categoryName, factors]) => {
                if (factors.length === 0) return '';
                
                const categoryScore = factors.reduce((sum, factor) => sum + factor.score, 0) / factors.length;
                const categoryLevel = getRiskLevelFromScore(categoryScore);
                
                return `
                    <div class="bg-white border rounded-lg overflow-hidden">
                        <div class="p-4 border-b bg-gray-50 cursor-pointer" onclick="toggleCategory('${categoryName}')">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 rounded-full ${getRiskLevelClass(categoryLevel)}"></div>
                                    <h6 class="font-medium text-gray-900">${categoryName} Risk</h6>
                                    <span class="text-sm text-gray-500">(${factors.length} factors)</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-sm font-medium ${getRiskLevelClass(categoryLevel)}">${categoryLevel.toUpperCase()}</span>
                                    <span class="text-sm text-gray-600">${Math.round(categoryScore)}</span>
                                    <svg class="w-4 h-4 text-gray-400 transform transition-transform" id="icon-${categoryName}">
                                        <path fill="currentColor" d="M7 10l5 5 5-5z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="hidden" id="category-${categoryName}">
                            <div class="p-4 space-y-3">
                                ${factors.map(factor => createRiskFactorCard(factor)).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function createRiskFactorCard(factor) {
            const progressWidth = (factor.score / 100) * 100;
            
            return `
                <div class="bg-gray-50 p-3 rounded-lg border-l-4 ${getRiskLevelClass(factor.level)}">
                    <div class="flex justify-between items-start mb-2">
                        <div class="flex-1">
                            <h6 class="font-medium text-gray-900 text-sm">${factor.factor_name}</h6>
                            <p class="text-xs text-gray-600 mt-1">${factor.explanation}</p>
                        </div>
                        <div class="text-right ml-3">
                            <span class="text-sm font-medium ${getRiskLevelClass(factor.level)}">${factor.level.toUpperCase()}</span>
                            <p class="text-xs text-gray-600">${Math.round(factor.score)}</p>
                        </div>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="h-2 rounded-full ${getRiskProgressClass(factor.level)}" style="width: ${progressWidth}%"></div>
                    </div>
                    <div class="mt-2 flex justify-between text-xs text-gray-500">
                        <span>Impact: ${factor.impact || 'Medium'}</span>
                        <span>Trend: ${factor.trend || 'Stable'}</span>
                    </div>
                </div>
            `;
        }
        
        function toggleCategory(categoryName) {
            const categoryDiv = document.getElementById(`category-${categoryName}`);
            const icon = document.getElementById(`icon-${categoryName}`);
            
            if (categoryDiv.classList.contains('hidden')) {
                categoryDiv.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
            } else {
                categoryDiv.classList.add('hidden');
                icon.style.transform = 'rotate(0deg)';
            }
        }
        
        function populateDetailedRiskAnalysis(factorScores) {
            const container = document.getElementById('detailedRiskAnalysis');
            
            // Sort factors by score (highest risk first)
            const sortedFactors = factorScores.sort((a, b) => b.score - a.score);
            
            container.innerHTML = sortedFactors.map((factor, index) => {
                const progressWidth = (factor.score / 100) * 100;
                const recommendations = getRiskFactorRecommendations(factor);
                
                return `
                    <div class="bg-white border rounded-lg p-4">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center">
                                    <span class="text-sm font-medium text-gray-600">${index + 1}</span>
                                </div>
                                <div>
                                    <h6 class="font-medium text-gray-900">${factor.factor_name}</h6>
                                    <p class="text-sm text-gray-600">${factor.category || 'General'} Risk</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="text-lg font-bold ${getRiskLevelClass(factor.level)}">${Math.round(factor.score)}</span>
                                <p class="text-sm text-gray-600">${factor.level.toUpperCase()}</p>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                <span>Risk Score</span>
                                <span>${Math.round(factor.score)}/100</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="h-3 rounded-full ${getRiskProgressClass(factor.level)}" style="width: ${progressWidth}%"></div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <p class="text-sm text-gray-700">${factor.explanation}</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-3">
                            <div class="text-center p-2 bg-gray-50 rounded">
                                <p class="text-xs text-gray-600">Impact</p>
                                <p class="text-sm font-medium">${factor.impact || 'Medium'}</p>
                            </div>
                            <div class="text-center p-2 bg-gray-50 rounded">
                                <p class="text-xs text-gray-600">Trend</p>
                                <p class="text-sm font-medium">${factor.trend || 'Stable'}</p>
                            </div>
                            <div class="text-center p-2 bg-gray-50 rounded">
                                <p class="text-xs text-gray-600">Priority</p>
                                <p class="text-sm font-medium">${factor.priority || 'Medium'}</p>
                            </div>
                        </div>
                        
                        <div class="border-t pt-3">
                            <h6 class="text-sm font-medium text-gray-900 mb-2">Recommendations</h6>
                            <ul class="text-sm text-gray-600 space-y-1">
                                ${recommendations.map(rec => `<li>â€¢ ${rec}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function getRiskFactorRecommendations(factor) {
            const recommendations = {
                'Financial': [
                    'Review financial statements and cash flow projections',
                    'Implement financial monitoring and reporting systems',
                    'Consider diversifying revenue streams'
                ],
                'Operational': [
                    'Review and update operational procedures',
                    'Implement quality control measures',
                    'Provide staff training and development'
                ],
                'Regulatory': [
                    'Review compliance requirements and regulations',
                    'Implement compliance monitoring systems',
                    'Consider legal consultation for complex issues'
                ],
                'Reputational': [
                    'Monitor customer feedback and satisfaction',
                    'Implement reputation management strategies',
                    'Develop crisis communication plans'
                ],
                'Cybersecurity': [
                    'Implement security best practices',
                    'Conduct regular security assessments',
                    'Provide cybersecurity training for staff'
                ]
            };
            
            return recommendations[factor.category] || [
                'Monitor this risk factor closely',
                'Develop mitigation strategies',
                'Review and update risk management plans'
            ];
        }
        
        function createRiskFactorComparisonChart(factorScores) {
            const ctx = document.getElementById('riskFactorComparisonChart').getContext('2d');
            
            // Group factors by category
            const categories = {};
            factorScores.forEach(factor => {
                const category = factor.category || 'General';
                if (!categories[category]) {
                    categories[category] = [];
                }
                categories[category].push(factor.score);
            });
            
            const categoryNames = Object.keys(categories);
            const categoryScores = categoryNames.map(category => {
                const scores = categories[category];
                return scores.reduce((sum, score) => sum + score, 0) / scores.length;
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: categoryNames,
                    datasets: [{
                        label: 'Average Risk Score',
                        data: categoryScores,
                        backgroundColor: categoryScores.map(score => {
                            const level = getRiskLevelFromScore(score);
                            return getRiskColor(level);
                        }),
                        borderColor: categoryScores.map(score => {
                            const level = getRiskLevelFromScore(score);
                            return getRiskColor(level);
                        }),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Average Risk: ${Math.round(context.parsed.y)}%`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function getRiskColor(level) {
            const colors = {
                'low': '#10B981',
                'medium': '#F59E0B',
                'high': '#EF4444',
                'critical': '#DC2626'
            };
            return colors[level] || '#6B7280';
        }

        function createRiskTrendChart(assessment) {
            const ctx = document.getElementById('riskTrendChart').getContext('2d');
            
            // Mock trend data - in real implementation, this would come from the API
            const trendData = {
                labels: ['3M ago', '2M ago', '1M ago', 'Current'],
                datasets: [{
                    label: 'Overall Risk Score',
                    data: [45, 52, 38, assessment.overall_score || 0],
                    borderColor: '#ef4444',
                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                    tension: 0.4
                }]
            };
            
            if (riskTrendChart) {
                riskTrendChart.destroy();
            }
            
            riskTrendChart = new Chart(ctx, {
                type: 'line',
                data: trendData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function formatDate(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
        }

        function acknowledgeAlert(alertId) {
            // In a real implementation, this would call the API to acknowledge the alert
            console.log('Acknowledging alert:', alertId);
            // For now, just show a success message
            alert('Alert acknowledged successfully');
        }
        
        // Tooltip functionality
        function createTooltip(element, content) {
            const tooltip = document.createElement('div');
            tooltip.className = 'risk-tooltip';
            tooltip.innerHTML = content;
            element.appendChild(tooltip);
            
            element.addEventListener('mouseenter', () => {
                tooltip.classList.add('show');
            });
            
            element.addEventListener('mouseleave', () => {
                tooltip.classList.remove('show');
            });
        }
        
        function getRiskTooltipContent(level, score, category) {
            const levelInfo = getRiskLevelInfo(level);
            const categoryInfo = getCategoryInfo(category);
            
            return `
                <div class="risk-tooltip-title">${levelInfo.title}</div>
                <div class="risk-tooltip-content">
                    <div>Score: <span class="risk-tooltip-score">${score}/100</span></div>
                    <div>${levelInfo.description}</div>
                </div>
                <div class="risk-tooltip-impact">
                    <strong>Business Impact:</strong> ${levelInfo.impact}
                </div>
            `;
        }
        
        function getRiskLevelInfo(level) {
            const levelInfo = {
                low: {
                    title: 'Low Risk',
                    description: 'Minimal risk exposure with strong controls in place.',
                    impact: 'Minimal business impact expected. Continue monitoring.'
                },
                medium: {
                    title: 'Medium Risk',
                    description: 'Moderate risk exposure requiring attention and monitoring.',
                    impact: 'Some business impact possible. Review and address key factors.'
                },
                high: {
                    title: 'High Risk',
                    description: 'Elevated risk exposure requiring immediate attention.',
                    impact: 'Significant business impact likely. Take corrective action.'
                },
                critical: {
                    title: 'Critical Risk',
                    description: 'Severe risk exposure requiring urgent intervention.',
                    impact: 'Severe business impact expected. Immediate action required.'
                }
            };
            return levelInfo[level.toLowerCase()] || levelInfo.low;
        }
        
        function getCategoryInfo(category) {
            const categoryInfo = {
                financial: 'Financial risk factors including revenue, cash flow, and credit exposure.',
                operational: 'Operational risk factors including processes, staff, and technology.',
                regulatory: 'Regulatory risk factors including compliance, licensing, and legal issues.',
                reputational: 'Reputational risk factors including customer satisfaction and brand perception.',
                cybersecurity: 'Cybersecurity risk factors including data protection and system security.'
            };
            return categoryInfo[category] || 'Risk assessment category.';
        }
        
        function initializeTooltips() {
            // Add tooltips to risk badges and icons
            const riskElements = document.querySelectorAll('.risk-badge, .risk-icon, .progress-fill');
            riskElements.forEach(element => {
                const level = element.classList.contains('risk-low') ? 'low' :
                             element.classList.contains('risk-medium') ? 'medium' :
                             element.classList.contains('risk-high') ? 'high' :
                             element.classList.contains('risk-critical') ? 'critical' : 'low';
                
                const category = element.closest('.p-4')?.querySelector('h4')?.textContent?.toLowerCase().replace(' risk', '') || 'general';
                const score = element.closest('.p-4')?.querySelector('.font-medium')?.textContent || '0';
                
                const tooltipContent = getRiskTooltipContent(level, score, category);
                createTooltip(element, tooltipContent);
            });
        }
        
        // Risk Heat Map Functions
        function createRiskHeatMap(assessment) {
            const heatmapGrid = document.getElementById('heatmapGrid');
            if (!heatmapGrid) return;
            
            // Clear existing content
            heatmapGrid.innerHTML = '';
            
            // Define risk categories and their factors
            const riskCategories = {
                financial: {
                    name: 'Financial Risk',
                    icon: 'fas fa-dollar-sign',
                    factors: [
                        { name: 'Revenue', key: 'revenue_volatility' },
                        { name: 'Cash Flow', key: 'cash_flow_stability' },
                        { name: 'Credit', key: 'credit_risk' },
                        { name: 'Debt', key: 'debt_ratio' },
                        { name: 'Liquidity', key: 'liquidity_risk' },
                        { name: 'Market', key: 'market_risk' }
                    ]
                },
                operational: {
                    name: 'Operational Risk',
                    icon: 'fas fa-cogs',
                    factors: [
                        { name: 'Process', key: 'process_efficiency' },
                        { name: 'Staff', key: 'staff_turnover' },
                        { name: 'Technology', key: 'tech_reliability' },
                        { name: 'Supply', key: 'supply_chain' },
                        { name: 'Capacity', key: 'capacity_utilization' },
                        { name: 'Quality', key: 'quality_control' }
                    ]
                },
                regulatory: {
                    name: 'Regulatory Risk',
                    icon: 'fas fa-gavel',
                    factors: [
                        { name: 'Compliance', key: 'compliance_status' },
                        { name: 'Licensing', key: 'licensing_risk' },
                        { name: 'Legal', key: 'legal_exposure' },
                        { name: 'Audit', key: 'audit_findings' },
                        { name: 'Policy', key: 'policy_changes' },
                        { name: 'Penalties', key: 'penalty_risk' }
                    ]
                },
                reputational: {
                    name: 'Reputational Risk',
                    icon: 'fas fa-star',
                    factors: [
                        { name: 'Customer', key: 'customer_satisfaction' },
                        { name: 'Brand', key: 'brand_perception' },
                        { name: 'Media', key: 'media_coverage' },
                        { name: 'Social', key: 'social_sentiment' },
                        { name: 'Reviews', key: 'review_rating' },
                        { name: 'Crisis', key: 'crisis_management' }
                    ]
                },
                cybersecurity: {
                    name: 'Cybersecurity Risk',
                    icon: 'fas fa-shield-alt',
                    factors: [
                        { name: 'Data', key: 'data_protection' },
                        { name: 'Network', key: 'network_security' },
                        { name: 'Access', key: 'access_control' },
                        { name: 'Incident', key: 'incident_response' },
                        { name: 'Training', key: 'security_training' },
                        { name: 'Vendor', key: 'vendor_security' }
                    ]
                }
            };
            
            // Create heat map categories
            Object.entries(riskCategories).forEach(([categoryKey, categoryData]) => {
                const categoryElement = createHeatMapCategory(categoryKey, categoryData, assessment);
                heatmapGrid.appendChild(categoryElement);
            });
        }
        
        function createHeatMapCategory(categoryKey, categoryData, assessment) {
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'heatmap-category';
            
            // Get category score
            const categoryScore = assessment.category_scores?.[categoryKey]?.score || 0;
            const categoryLevel = assessment.category_scores?.[categoryKey]?.level || 'low';
            
            // Create category header
            const headerDiv = document.createElement('div');
            headerDiv.className = 'category-header';
            headerDiv.innerHTML = `
                <div class="category-name">${categoryData.name}</div>
                <div class="category-score ${getRiskLevelClass(categoryLevel)}">${Math.round(categoryScore)}</div>
            `;
            
            // Create factors grid
            const factorsDiv = document.createElement('div');
            factorsDiv.className = 'heatmap-factors';
            
            // Create factor elements
            categoryData.factors.forEach(factor => {
                const factorScore = getFactorScore(assessment, categoryKey, factor.key);
                const factorElement = createHeatMapFactor(factor.name, factorScore, categoryKey, factor.key);
                factorsDiv.appendChild(factorElement);
            });
            
            categoryDiv.appendChild(headerDiv);
            categoryDiv.appendChild(factorsDiv);
            
            return categoryDiv;
        }
        
        function createHeatMapFactor(factorName, score, category, factorKey) {
            const factorDiv = document.createElement('div');
            factorDiv.className = `heatmap-factor ${getHeatMapColorClass(score)}`;
            factorDiv.textContent = factorName;
            factorDiv.setAttribute('data-score', score);
            factorDiv.setAttribute('data-category', category);
            factorDiv.setAttribute('data-factor', factorKey);
            
            // Add tooltip
            const tooltip = document.createElement('div');
            tooltip.className = 'heatmap-tooltip';
            tooltip.innerHTML = `
                <div><strong>${factorName}</strong></div>
                <div>Score: ${score}/100</div>
                <div>Level: ${getRiskLevelFromScore(score)}</div>
            `;
            factorDiv.appendChild(tooltip);
            
            // Add hover events
            factorDiv.addEventListener('mouseenter', () => {
                tooltip.classList.add('show');
                positionTooltip(tooltip, factorDiv);
            });
            
            factorDiv.addEventListener('mouseleave', () => {
                tooltip.classList.remove('show');
            });
            
            return factorDiv;
        }
        
        function getFactorScore(assessment, category, factorKey) {
            // Try to get factor score from assessment data
            if (assessment.factor_scores) {
                const factor = assessment.factor_scores.find(f => 
                    f.category === category && f.factor === factorKey
                );
                if (factor) return factor.score;
            }
            
            // Generate realistic mock data based on category
            const baseScore = assessment.category_scores?.[category]?.score || 0;
            const variation = (Math.random() - 0.5) * 40; // Â±20 points variation
            return Math.max(0, Math.min(100, Math.round(baseScore + variation)));
        }
        
        function getHeatMapColorClass(score) {
            if (score <= 20) return 'heat-low';
            if (score <= 40) return 'heat-medium-low';
            if (score <= 60) return 'heat-medium';
            if (score <= 80) return 'heat-medium-high';
            if (score <= 95) return 'heat-high';
            return 'heat-critical';
        }
        
        function getRiskLevelFromScore(score) {
            if (score <= 20) return 'Low';
            if (score <= 40) return 'Med-Low';
            if (score <= 60) return 'Medium';
            if (score <= 80) return 'Med-High';
            if (score <= 95) return 'High';
            return 'Critical';
        }
        
        function positionTooltip(tooltip, element) {
            const rect = element.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            
            // Position tooltip above the element
            tooltip.style.left = `${rect.left + rect.width / 2 - tooltipRect.width / 2}px`;
            tooltip.style.top = `${rect.top - tooltipRect.height - 8}px`;
        }
        
        // Risk Trend Functions
        function updateRiskTrends(assessment) {
            const categories = ['financial', 'operational', 'regulatory', 'reputational', 'cybersecurity'];
            
            categories.forEach(category => {
                const trendData = generateTrendData(category, assessment);
                updateTrendIndicator(category, trendData);
                updateTrendChart(category, trendData);
            });
        }
        
        function generateTrendData(category, assessment) {
            // Generate realistic trend data based on category and current score
            const currentScore = assessment.category_scores?.[category]?.score || 0;
            const trendType = getTrendType(category, currentScore);
            
            // Generate historical data points (last 7 days)
            const dataPoints = [];
            const baseScore = currentScore;
            
            for (let i = 6; i >= 0; i--) {
                let score = baseScore;
                
                // Apply trend variation
                switch (trendType) {
                    case 'improving':
                        score = baseScore + (6 - i) * 2 + (Math.random() - 0.5) * 4;
                        break;
                    case 'rising':
                        score = baseScore - (6 - i) * 2 + (Math.random() - 0.5) * 4;
                        break;
                    case 'stable':
                        score = baseScore + (Math.random() - 0.5) * 6;
                        break;
                }
                
                dataPoints.push(Math.max(0, Math.min(100, Math.round(score))));
            }
            
            return {
                type: trendType,
                dataPoints: dataPoints,
                change: dataPoints[6] - dataPoints[0],
                changePercent: ((dataPoints[6] - dataPoints[0]) / dataPoints[0] * 100).toFixed(1)
            };
        }
        
        function getTrendType(category, currentScore) {
            // Define trend patterns for different categories
            const trendPatterns = {
                financial: currentScore > 70 ? 'rising' : currentScore < 30 ? 'improving' : 'stable',
                operational: currentScore > 60 ? 'rising' : 'improving',
                regulatory: currentScore > 50 ? 'rising' : 'stable',
                reputational: currentScore > 40 ? 'improving' : 'stable',
                cybersecurity: currentScore > 80 ? 'rising' : 'stable'
            };
            
            return trendPatterns[category] || 'stable';
        }
        
        function updateTrendIndicator(category, trendData) {
            const trendElement = document.getElementById(`${category}RiskTrend`);
            if (!trendElement) return;
            
            // Update trend class and content
            trendElement.className = `risk-trend trend-${trendData.type}`;
            
            const iconElement = trendElement.querySelector('.trend-icon i');
            const textElement = trendElement.querySelector('span');
            
            // Update icon and text based on trend type
            switch (trendData.type) {
                case 'improving':
                    iconElement.className = 'fas fa-arrow-down trend-arrow-down';
                    textElement.textContent = 'Improving';
                    break;
                case 'rising':
                    iconElement.className = 'fas fa-arrow-up trend-arrow-up';
                    textElement.textContent = 'Rising';
                    break;
                case 'stable':
                    iconElement.className = 'fas fa-minus trend-arrow-right';
                    textElement.textContent = 'Stable';
                    break;
            }
        }
        
        function updateTrendChart(category, trendData) {
            const chartElement = document.getElementById(`${category}TrendChart`);
            if (!chartElement) return;
            
            const trendLine = chartElement.querySelector('.trend-line');
            const trendPoints = chartElement.querySelector('.trend-points');
            
            // Clear existing points
            trendPoints.innerHTML = '';
            
            // Create trend line path
            const points = trendData.dataPoints;
            const width = 40;
            const height = 20;
            const padding = 2;
            
            // Calculate positions for data points
            const xStep = (width - padding * 2) / (points.length - 1);
            const yRange = height - padding * 2;
            const minValue = Math.min(...points);
            const maxValue = Math.max(...points);
            const valueRange = maxValue - minValue || 1;
            
            // Create SVG path for trend line
            let pathData = '';
            points.forEach((point, index) => {
                const x = padding + index * xStep;
                const y = padding + ((maxValue - point) / valueRange) * yRange;
                
                if (index === 0) {
                    pathData += `M ${x} ${y}`;
                } else {
                    pathData += ` L ${x} ${y}`;
                }
                
                // Create trend point
                const pointElement = document.createElement('div');
                pointElement.className = 'trend-point';
                pointElement.style.left = `${x - 2}px`;
                pointElement.style.top = `${y - 2}px`;
                trendPoints.appendChild(pointElement);
            });
            
            // Update trend line color based on trend type
            const colors = {
                improving: 'linear-gradient(90deg, #10b981, #059669)',
                rising: 'linear-gradient(90deg, #ef4444, #dc2626)',
                stable: 'linear-gradient(90deg, #6b7280, #4b5563)'
            };
            
            trendLine.style.background = colors[trendData.type] || colors.stable;
        }
        
        // Risk Radar Chart Functions
        function createRiskRadarChart(assessment) {
            const categories = ['financial', 'operational', 'regulatory', 'reputational', 'cybersecurity'];
            const categoryLabels = {
                financial: 'Financial',
                operational: 'Operational', 
                regulatory: 'Regulatory',
                reputational: 'Reputational',
                cybersecurity: 'Cybersecurity'
            };
            
            // Create radar grid
            createRadarGrid();
            
            // Create radar labels
            createRadarLabels(categories, categoryLabels);
            
            // Create radar data
            createRadarData(assessment, categories);
            
            // Add radar controls
            initializeRadarControls();
        }
        
        function createRadarGrid() {
            const gridContainer = document.querySelector('.radar-grid');
            if (!gridContainer) return;
            
            // Create concentric circles
            for (let i = 0; i < 5; i++) {
                const circle = document.createElement('div');
                circle.className = 'radar-circle';
                gridContainer.appendChild(circle);
            }
            
            // Create axis lines
            const categories = 5;
            for (let i = 0; i < categories; i++) {
                const axis = document.createElement('div');
                axis.className = 'radar-axis';
                axis.style.transform = `translate(-50%, -50%) rotate(${i * (360 / categories)}deg)`;
                gridContainer.appendChild(axis);
            }
        }
        
        function createRadarLabels(categories, categoryLabels) {
            const labelsContainer = document.querySelector('.radar-labels');
            if (!labelsContainer) return;
            
            const radius = 160; // Distance from center
            const centerX = 175;
            const centerY = 175;
            
            categories.forEach((category, index) => {
                const angle = (index * (360 / categories) - 90) * (Math.PI / 180);
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                
                const label = document.createElement('div');
                label.className = 'radar-label';
                label.textContent = categoryLabels[category];
                label.style.left = `${x}px`;
                label.style.top = `${y}px`;
                labelsContainer.appendChild(label);
            });
        }
        
        function createRadarData(assessment, categories) {
            const dataPoints = categories.map(category => {
                const score = assessment.category_scores?.[category]?.score || 0;
                return score;
            });
            
            // Create radar polygon
            createRadarPolygon(dataPoints, categories);
            
            // Create radar points
            createRadarPoints(dataPoints, categories);
            
            // Add tooltips
            addRadarTooltips(categories, dataPoints);
        }
        
        function createRadarPolygon(dataPoints, categories) {
            const polygon = document.getElementById('radarPolygon');
            if (!polygon) return;
            
            const centerX = 175;
            const centerY = 175;
            const maxRadius = 140;
            
            const points = dataPoints.map((score, index) => {
                const angle = (index * (360 / categories) - 90) * (Math.PI / 180);
                const radius = (score / 100) * maxRadius;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                return `${x},${y}`;
            }).join(' ');
            
            polygon.setAttribute('points', points);
        }
        
        function createRadarPoints(dataPoints, categories) {
            const pointsContainer = document.querySelector('.radar-points');
            if (!pointsContainer) return;
            
            // Clear existing points
            pointsContainer.innerHTML = '';
            
            const centerX = 175;
            const centerY = 175;
            const maxRadius = 140;
            
            dataPoints.forEach((score, index) => {
                const angle = (index * (360 / categories) - 90) * (Math.PI / 180);
                const radius = (score / 100) * maxRadius;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                
                const point = document.createElement('div');
                point.className = 'radar-point';
                point.style.left = `${x}px`;
                point.style.top = `${y}px`;
                point.setAttribute('data-category', categories[index]);
                point.setAttribute('data-score', score);
                pointsContainer.appendChild(point);
            });
        }
        
        function addRadarTooltips(categories, dataPoints) {
            const points = document.querySelectorAll('.radar-point');
            const categoryLabels = {
                financial: 'Financial Risk',
                operational: 'Operational Risk',
                regulatory: 'Regulatory Risk',
                reputational: 'Reputational Risk',
                cybersecurity: 'Cybersecurity Risk'
            };
            
            points.forEach((point, index) => {
                const category = categories[index];
                const score = dataPoints[index];
                
                const tooltip = document.createElement('div');
                tooltip.className = 'radar-tooltip';
                tooltip.innerHTML = `
                    <div><strong>${categoryLabels[category]}</strong></div>
                    <div>Score: ${Math.round(score)}/100</div>
                    <div>Level: ${getRiskLevelFromScore(score)}</div>
                `;
                point.appendChild(tooltip);
                
                point.addEventListener('mouseenter', () => {
                    tooltip.classList.add('show');
                    positionRadarTooltip(tooltip, point);
                });
                
                point.addEventListener('mouseleave', () => {
                    tooltip.classList.remove('show');
                });
            });
        }
        
        function positionRadarTooltip(tooltip, point) {
            const rect = point.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            
            // Position tooltip above the point
            tooltip.style.left = `${rect.left + rect.width / 2 - tooltipRect.width / 2}px`;
            tooltip.style.top = `${rect.top - tooltipRect.height - 8}px`;
        }
        
        function initializeRadarControls() {
            const toggleButtons = document.querySelectorAll('.radar-toggle button');
            
            toggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    toggleButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    button.classList.add('active');
                    
                    // Handle view change
                    const view = button.getAttribute('data-view');
                    switchRadarView(view);
                });
            });
        }
        
        function switchRadarView(view) {
            // This function would handle switching between different radar views
            // For now, we'll just log the view change
            console.log(`Switching to ${view} view`);
            
            // In a real implementation, this would:
            // - Load different datasets based on the view
            // - Update the radar chart with new data
            // - Show/hide different data series
        }
        
        // Risk Level Confidence Functions
        function updateRiskConfidenceIndicators(assessment) {
            const categories = ['financial', 'operational', 'regulatory', 'reputational', 'cybersecurity'];
            
            categories.forEach(category => {
                const confidenceData = generateConfidenceData(category, assessment);
                updateConfidenceIndicator(category, confidenceData);
                updateConfidenceMeter(category, confidenceData);
                updateConfidenceScore(category, confidenceData);
            });
        }
        
        function generateConfidenceData(category, assessment) {
            // Generate realistic confidence data based on category and assessment quality
            const baseConfidence = getBaseConfidenceForCategory(category);
            const assessmentQuality = assessment.assessment_quality || 0.8;
            const dataCompleteness = assessment.data_completeness || 0.75;
            
            // Calculate confidence based on multiple factors
            let confidence = baseConfidence * assessmentQuality * dataCompleteness;
            
            // Add some variation based on category characteristics
            const variation = (Math.random() - 0.5) * 0.2; // Â±10% variation
            confidence = Math.max(0.3, Math.min(1.0, confidence + variation));
            
            return {
                score: Math.round(confidence * 100),
                level: getConfidenceLevel(confidence),
                factors: {
                    assessmentQuality: Math.round(assessmentQuality * 100),
                    dataCompleteness: Math.round(dataCompleteness * 100),
                    baseConfidence: Math.round(baseConfidence * 100)
                }
            };
        }
        
        function getBaseConfidenceForCategory(category) {
            // Different categories have different inherent confidence levels
            const baseConfidences = {
                financial: 0.85,      // Financial data is usually well-documented
                operational: 0.75,    // Operational data can be variable
                regulatory: 0.65,     // Regulatory data can be complex and changing
                reputational: 0.80,   // Reputational data is often publicly available
                cybersecurity: 0.70   // Cybersecurity data can be sensitive and incomplete
            };
            
            return baseConfidences[category] || 0.75;
        }
        
        function getConfidenceLevel(confidence) {
            if (confidence >= 0.8) return 'high';
            if (confidence >= 0.6) return 'medium';
            return 'low';
        }
        
        function updateConfidenceIndicator(category, confidenceData) {
            const indicatorElement = document.getElementById(`${category}ConfidenceIndicator`);
            if (!indicatorElement) return;
            
            // Update confidence class and content
            indicatorElement.className = `confidence-indicator confidence-${confidenceData.level}`;
            
            const iconElement = indicatorElement.querySelector('.confidence-icon');
            const textElement = indicatorElement.querySelector('span');
            
            // Update icon class
            iconElement.className = `confidence-icon ${confidenceData.level}`;
            
            // Update text based on confidence level
            switch (confidenceData.level) {
                case 'high':
                    textElement.textContent = 'High';
                    break;
                case 'medium':
                    textElement.textContent = 'Med';
                    break;
                case 'low':
                    textElement.textContent = 'Low';
                    break;
            }
            
            // Add tooltip
            addConfidenceTooltip(indicatorElement, confidenceData, category);
        }
        
        function updateConfidenceMeter(category, confidenceData) {
            const meterElement = document.getElementById(`${category}ConfidenceMeter`);
            if (!meterElement) return;
            
            // Update meter class and width
            meterElement.className = `confidence-fill ${confidenceData.level}`;
            meterElement.style.width = `${confidenceData.score}%`;
        }
        
        function updateConfidenceScore(category, confidenceData) {
            const scoreElement = document.getElementById(`${category}ConfidenceScore`);
            if (!scoreElement) return;
            
            // Update score text and class
            scoreElement.textContent = `${confidenceData.score}%`;
            scoreElement.className = `confidence-score ${confidenceData.level}`;
        }
        
        function addConfidenceTooltip(element, confidenceData, category) {
            // Remove existing tooltip if any
            const existingTooltip = element.querySelector('.confidence-tooltip');
            if (existingTooltip) {
                existingTooltip.remove();
            }
            
            const tooltip = document.createElement('div');
            tooltip.className = 'confidence-tooltip';
            tooltip.innerHTML = `
                <div><strong>Confidence Level: ${confidenceData.level.toUpperCase()}</strong></div>
                <div>Overall Score: ${confidenceData.score}%</div>
                <div>Assessment Quality: ${confidenceData.factors.assessmentQuality}%</div>
                <div>Data Completeness: ${confidenceData.factors.dataCompleteness}%</div>
            `;
            element.appendChild(tooltip);
            
            element.addEventListener('mouseenter', () => {
                tooltip.classList.add('show');
                positionConfidenceTooltip(tooltip, element);
            });
            
            element.addEventListener('mouseleave', () => {
                tooltip.classList.remove('show');
            });
        }
        
        function positionConfidenceTooltip(tooltip, element) {
            const rect = element.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            
            // Position tooltip above the element
            tooltip.style.left = `${rect.left + rect.width / 2 - tooltipRect.width / 2}px`;
            tooltip.style.top = `${rect.top - tooltipRect.height - 8}px`;
        }
        
        // Industry Benchmark Comparison Functions
        function createIndustryBenchmarkComparison(assessment) {
            const categories = ['financial', 'operational', 'regulatory', 'reputational', 'cybersecurity'];
            const categoryLabels = {
                financial: 'Financial Risk',
                operational: 'Operational Risk',
                regulatory: 'Regulatory Risk',
                reputational: 'Reputational Risk',
                cybersecurity: 'Cybersecurity Risk'
            };
            
            // Create benchmark cards
            createBenchmarkCards(categories, categoryLabels, assessment);
            
            // Initialize industry selector
            initializeIndustrySelector();
        }
        
        function createBenchmarkCards(categories, categoryLabels, assessment) {
            const benchmarkGrid = document.getElementById('benchmarkGrid');
            if (!benchmarkGrid) return;
            
            // Clear existing content
            benchmarkGrid.innerHTML = '';
            
            categories.forEach(category => {
                const benchmarkCard = createBenchmarkCard(category, categoryLabels[category], assessment);
                benchmarkGrid.appendChild(benchmarkCard);
            });
        }
        
        function createBenchmarkCard(category, categoryLabel, assessment) {
            const currentScore = assessment.category_scores?.[category]?.score || 0;
            const industryScore = getIndustryBenchmark(category);
            const comparison = getBenchmarkComparison(currentScore, industryScore);
            
            const card = document.createElement('div');
            card.className = 'benchmark-card';
            card.innerHTML = `
                <div class="benchmark-card-header">
                    <div class="benchmark-category">${categoryLabel}</div>
                    <div class="benchmark-comparison">
                        <span class="benchmark-${comparison.type}">${comparison.label}</span>
                    </div>
                </div>
                
                <div class="benchmark-chart">
                    <div class="benchmark-bar">
                        <div class="benchmark-current" style="width: ${currentScore}%"></div>
                        <div class="benchmark-industry" style="width: ${industryScore}%"></div>
                    </div>
                </div>
                
                <div class="benchmark-labels">
                    <span>Your Business</span>
                    <span>Industry Avg</span>
                </div>
                
                <div class="benchmark-scores">
                    <span class="benchmark-current-score">${Math.round(currentScore)}</span>
                    <span class="benchmark-industry-score">${Math.round(industryScore)}</span>
                </div>
                
                <div class="benchmark-difference">
                    <strong>Difference:</strong> ${comparison.difference} points ${comparison.direction}
                </div>
                
                <div class="benchmark-insight">
                    ${getBenchmarkInsight(category, comparison)}
                </div>
            `;
            
            return card;
        }
        
        function getIndustryBenchmark(category) {
            // Industry benchmark data (realistic values based on industry standards)
            const benchmarks = {
                financial: 45,      // Financial services typically have moderate financial risk
                operational: 55,    // Operational risk varies by industry
                regulatory: 60,     // Regulatory risk is generally moderate to high
                reputational: 40,   // Reputational risk is typically lower
                cybersecurity: 65   // Cybersecurity risk is generally high across industries
            };
            
            return benchmarks[category] || 50;
        }
        
        function getBenchmarkComparison(currentScore, industryScore) {
            const difference = Math.abs(currentScore - industryScore);
            const threshold = 10; // 10 point threshold for "similar"
            
            if (difference <= threshold) {
                return {
                    type: 'similar',
                    label: 'Similar',
                    difference: difference,
                    direction: 'to industry average'
                };
            } else if (currentScore < industryScore) {
                return {
                    type: 'better',
                    label: 'Better',
                    difference: difference,
                    direction: 'below industry average'
                };
            } else {
                return {
                    type: 'worse',
                    label: 'Higher Risk',
                    difference: difference,
                    direction: 'above industry average'
                };
            }
        }
        
        function getBenchmarkInsight(category, comparison) {
            const insights = {
                financial: {
                    better: "Your financial risk management appears stronger than industry peers.",
                    worse: "Consider reviewing financial controls and risk management practices.",
                    similar: "Your financial risk level aligns with industry standards."
                },
                operational: {
                    better: "Operational efficiency appears above industry standards.",
                    worse: "Operational processes may need optimization and review.",
                    similar: "Operational risk is consistent with industry benchmarks."
                },
                regulatory: {
                    better: "Compliance management exceeds industry standards.",
                    worse: "Regulatory compliance may require additional attention.",
                    similar: "Regulatory risk management meets industry expectations."
                },
                reputational: {
                    better: "Brand reputation and stakeholder trust are well-managed.",
                    worse: "Reputation management strategies may need enhancement.",
                    similar: "Reputational risk is in line with industry norms."
                },
                cybersecurity: {
                    better: "Cybersecurity posture appears stronger than industry average.",
                    worse: "Cybersecurity measures may need strengthening.",
                    similar: "Cybersecurity risk aligns with industry standards."
                }
            };
            
            return insights[category]?.[comparison.type] || "Risk level compared to industry benchmark.";
        }
        
        function initializeIndustrySelector() {
            const industrySelector = document.getElementById('industrySelector');
            if (!industrySelector) return;
            
            industrySelector.addEventListener('change', (e) => {
                const selectedIndustry = e.target.value;
                updateIndustryBenchmarks(selectedIndustry);
            });
        }
        
        function updateIndustryBenchmarks(industry) {
            // This function would update benchmarks based on selected industry
            // For now, we'll just log the industry change
            console.log(`Updating benchmarks for industry: ${industry}`);
            
            // In a real implementation, this would:
            // - Load industry-specific benchmark data
            // - Update all benchmark cards with new industry data
            // - Recalculate comparisons and insights
        }
        
        // Risk Level Threshold Display Functions
        function createRiskLevelThresholdDisplay(assessment) {
            const overallScore = assessment.overall_score || 0;
            
            // Update threshold marker position
            updateThresholdMarker(overallScore);
            
            // Update active threshold level
            updateActiveThresholdLevel(overallScore);
            
            // Show/hide alert if needed
            updateThresholdAlert(overallScore);
            
            // Initialize threshold interactions
            initializeThresholdInteractions();
        }
        
        function updateThresholdMarker(score) {
            const marker = document.getElementById('thresholdMarker');
            if (!marker) return;
            
            // Position marker based on score (0-100)
            const position = Math.min(Math.max(score, 0), 100);
            marker.style.left = `${position}%`;
        }
        
        function updateActiveThresholdLevel(score) {
            const levels = document.querySelectorAll('.threshold-level');
            levels.forEach(level => {
                level.classList.remove('active');
            });
            
            // Determine which level is active based on score
            let activeLevel = 'low';
            if (score >= 76) activeLevel = 'critical';
            else if (score >= 51) activeLevel = 'high';
            else if (score >= 26) activeLevel = 'medium';
            
            const activeElement = document.querySelector(`[data-level="${activeLevel}"]`);
            if (activeElement) {
                activeElement.classList.add('active');
            }
        }
        
        function updateThresholdAlert(score) {
            const alert = document.getElementById('thresholdAlert');
            if (!alert) return;
            
            // Show alert for high or critical risk levels
            if (score >= 51) {
                alert.style.display = 'block';
                updateAlertMessage(score);
            } else {
                alert.style.display = 'none';
            }
        }
        
        function updateAlertMessage(score) {
            const alertMessage = document.querySelector('.threshold-alert-message');
            if (!alertMessage) return;
            
            let message = '';
            if (score >= 76) {
                message = 'CRITICAL RISK ALERT: Your risk level requires immediate emergency response. ' +
                         'Please implement emergency controls and notify senior management immediately.';
            } else if (score >= 51) {
                message = 'HIGH RISK ALERT: Your risk level requires immediate attention. ' +
                         'Please review recommended actions and implement additional controls.';
            }
            
            alertMessage.textContent = message;
        }
        
        function initializeThresholdInteractions() {
            // Initialize threshold switch
            const thresholdSwitch = document.getElementById('thresholdSwitch');
            if (thresholdSwitch) {
                thresholdSwitch.addEventListener('click', toggleThresholdDetails);
            }
            
            // Initialize threshold level clicks
            const thresholdLevels = document.querySelectorAll('.threshold-level');
            thresholdLevels.forEach(level => {
                level.addEventListener('click', () => {
                    const levelType = level.dataset.level;
                    showThresholdLevelDetails(levelType);
                });
            });
        }
        
        function toggleThresholdDetails() {
            const switchElement = document.getElementById('thresholdSwitch');
            const detailsElement = document.getElementById('thresholdDetails');
            
            if (!switchElement || !detailsElement) return;
            
            const isActive = switchElement.classList.contains('active');
            
            if (isActive) {
                switchElement.classList.remove('active');
                detailsElement.style.display = 'none';
            } else {
                switchElement.classList.add('active');
                detailsElement.style.display = 'block';
            }
        }
        
        function showThresholdLevelDetails(levelType) {
            const details = getThresholdLevelDetails(levelType);
            
            // Create detailed modal or expand details section
            const detailsElement = document.getElementById('thresholdDetails');
            if (detailsElement) {
                detailsElement.innerHTML = `
                    <div class="threshold-details-header">
                        <i class="fas fa-info-circle" style="color: #8b5cf6;"></i>
                        <div class="threshold-details-title">${details.title}</div>
                    </div>
                    <div class="threshold-details-content">
                        ${details.description}
                    </div>
                    <ul class="threshold-details-list">
                        ${details.actions.map(action => `<li>${action}</li>`).join('')}
                    </ul>
                    <div class="threshold-details-content" style="margin-top: 12px;">
                        <strong>Monitoring Frequency:</strong> ${details.monitoring}
                    </div>
                `;
                detailsElement.style.display = 'block';
            }
        }
        
        function getThresholdLevelDetails(levelType) {
            const details = {
                low: {
                    title: 'Low Risk Level Details',
                    description: 'Low risk indicates minimal exposure with strong controls in place. ' +
                               'This level requires routine monitoring and standard operational procedures.',
                    actions: [
                        'Continue regular monitoring and reporting',
                        'Maintain current control effectiveness',
                        'Review risk factors quarterly',
                        'Update risk assessments annually'
                    ],
                    monitoring: 'Monthly review, quarterly assessment'
                },
                medium: {
                    title: 'Medium Risk Level Details',
                    description: 'Medium risk indicates moderate exposure requiring regular review ' +
                               'and potential mitigation actions. Enhanced monitoring is recommended.',
                    actions: [
                        'Increase monitoring frequency',
                        'Review and strengthen existing controls',
                        'Develop mitigation strategies',
                        'Assign dedicated risk owner'
                    ],
                    monitoring: 'Bi-weekly review, monthly assessment'
                },
                high: {
                    title: 'High Risk Level Details',
                    description: 'High risk indicates significant exposure requiring immediate attention ' +
                               'and comprehensive mitigation strategies. Senior management involvement is required.',
                    actions: [
                        'Implement immediate mitigation measures',
                        'Escalate to senior management',
                        'Develop emergency response plan',
                        'Increase monitoring to daily'
                    ],
                    monitoring: 'Daily review, weekly assessment'
                },
                critical: {
                    title: 'Critical Risk Level Details',
                    description: 'Critical risk indicates severe exposure requiring immediate emergency ' +
                               'response and intervention. All available resources should be mobilized.',
                    actions: [
                        'Activate emergency response procedures',
                        'Notify all stakeholders immediately',
                        'Implement emergency controls',
                        'Prepare for potential business impact'
                    ],
                    monitoring: 'Continuous monitoring, daily assessment'
                }
            };
            
            return details[levelType] || details.medium;
        }
        
        // Interactive Risk Level Controls Functions
        let liveUpdateInterval = null;
        let updateLog = [];
        let isMonitoringActive = false;
        
        function createInteractiveRiskControls(assessment) {
            // Initialize all control panels
            initializeRiskAdjustmentControls();
            initializeMonitoringControls();
            initializeAlertControls();
            initializeRefreshControls();
            
            // Start live updates
            startLiveUpdates();
            
            // Initialize update log
            initializeUpdateLog();
        }
        
        function initializeRiskAdjustmentControls() {
            const sensitivitySlider = document.getElementById('riskSensitivitySlider');
            const sensitivityValue = document.getElementById('riskSensitivityValue');
            const thresholdSlider = document.getElementById('alertThresholdSlider');
            const thresholdValue = document.getElementById('alertThresholdValue');
            const applyButton = document.getElementById('applyRiskSettings');
            const resetButton = document.getElementById('resetRiskSettings');
            const toggle = document.getElementById('riskAdjustmentToggle');
            
            // Update sensitivity value display
            sensitivitySlider.addEventListener('input', (e) => {
                sensitivityValue.textContent = `${e.target.value}%`;
            });
            
            // Update threshold value display
            thresholdSlider.addEventListener('input', (e) => {
                thresholdValue.textContent = `${e.target.value}%`;
            });
            
            // Apply settings
            applyButton.addEventListener('click', () => {
                const sensitivity = sensitivitySlider.value;
                const threshold = thresholdSlider.value;
                
                showFeedback('riskAdjustmentFeedback', 'success', 
                    `Risk settings applied: Sensitivity ${sensitivity}%, Threshold ${threshold}%`);
                
                addUpdateLog('success', `Risk settings updated - Sensitivity: ${sensitivity}%, Threshold: ${threshold}%`);
                
                // In a real implementation, this would send the settings to the backend
                console.log('Applying risk settings:', { sensitivity, threshold });
            });
            
            // Reset settings
            resetButton.addEventListener('click', () => {
                sensitivitySlider.value = 50;
                thresholdSlider.value = 75;
                sensitivityValue.textContent = '50%';
                thresholdValue.textContent = '75%';
                
                showFeedback('riskAdjustmentFeedback', 'info', 'Risk settings reset to defaults');
                addUpdateLog('info', 'Risk settings reset to default values');
            });
            
            // Toggle control
            toggle.addEventListener('click', () => {
                toggle.classList.toggle('active');
                const isActive = toggle.classList.contains('active');
                
                // Enable/disable controls
                sensitivitySlider.disabled = !isActive;
                thresholdSlider.disabled = !isActive;
                applyButton.disabled = !isActive;
                resetButton.disabled = !isActive;
                
                addUpdateLog(isActive ? 'success' : 'warning', 
                    `Risk adjustment controls ${isActive ? 'enabled' : 'disabled'}`);
            });
        }
        
        function initializeMonitoringControls() {
            const frequencySlider = document.getElementById('updateFrequencySlider');
            const frequencyValue = document.getElementById('updateFrequencyValue');
            const startButton = document.getElementById('startMonitoring');
            const stopButton = document.getElementById('stopMonitoring');
            const toggle = document.getElementById('monitoringToggle');
            
            // Update frequency value display
            frequencySlider.addEventListener('input', (e) => {
                const seconds = parseInt(e.target.value);
                frequencyValue.textContent = `${seconds}s`;
                document.getElementById('updateFrequencyDisplay').textContent = `${seconds}s intervals`;
            });
            
            // Start monitoring
            startButton.addEventListener('click', () => {
                startLiveMonitoring();
                showFeedback('monitoringFeedback', 'success', 'Real-time monitoring started');
                addUpdateLog('success', 'Real-time monitoring activated');
            });
            
            // Stop monitoring
            stopButton.addEventListener('click', () => {
                stopLiveMonitoring();
                showFeedback('monitoringFeedback', 'info', 'Real-time monitoring stopped');
                addUpdateLog('warning', 'Real-time monitoring deactivated');
            });
            
            // Toggle control
            toggle.addEventListener('click', () => {
                toggle.classList.toggle('active');
                const isActive = toggle.classList.contains('active');
                
                if (isActive) {
                    startLiveMonitoring();
                } else {
                    stopLiveMonitoring();
                }
                
                addUpdateLog(isActive ? 'success' : 'warning', 
                    `Real-time monitoring ${isActive ? 'enabled' : 'disabled'}`);
            });
        }
        
        function initializeAlertControls() {
            const sensitivitySlider = document.getElementById('alertSensitivitySlider');
            const sensitivityValue = document.getElementById('alertSensitivityValue');
            const testButton = document.getElementById('testAlert');
            const clearButton = document.getElementById('clearAlerts');
            const toggle = document.getElementById('alertToggle');
            
            const sensitivityLevels = ['Low', 'Medium', 'High'];
            
            // Update sensitivity value display
            sensitivitySlider.addEventListener('input', (e) => {
                const level = parseInt(e.target.value) - 1;
                sensitivityValue.textContent = sensitivityLevels[level];
            });
            
            // Test alert
            testButton.addEventListener('click', () => {
                showFeedback('alertFeedback', 'info', 'Test alert triggered successfully');
                addUpdateLog('info', 'Test alert executed');
                
                // Simulate alert
                setTimeout(() => {
                    showFeedback('alertFeedback', 'success', 'Alert system is working correctly');
                }, 1000);
            });
            
            // Clear alerts
            clearButton.addEventListener('click', () => {
                showFeedback('alertFeedback', 'info', 'All alerts cleared');
                addUpdateLog('info', 'All alerts cleared');
            });
            
            // Toggle control
            toggle.addEventListener('click', () => {
                toggle.classList.toggle('active');
                const isActive = toggle.classList.contains('active');
                
                addUpdateLog(isActive ? 'success' : 'warning', 
                    `Alert system ${isActive ? 'enabled' : 'disabled'}`);
            });
        }
        
        function initializeRefreshControls() {
            const refreshSlider = document.getElementById('autoRefreshSlider');
            const refreshValue = document.getElementById('autoRefreshValue');
            const refreshButton = document.getElementById('refreshNow');
            const pauseButton = document.getElementById('pauseRefresh');
            const toggle = document.getElementById('refreshToggle');
            
            // Update refresh value display
            refreshSlider.addEventListener('input', (e) => {
                const minutes = parseInt(e.target.value);
                refreshValue.textContent = `${minutes}min`;
            });
            
            // Refresh now
            refreshButton.addEventListener('click', () => {
                refreshData();
                showFeedback('refreshFeedback', 'success', 'Data refreshed successfully');
                addUpdateLog('success', 'Manual data refresh completed');
            });
            
            // Pause refresh
            pauseButton.addEventListener('click', () => {
                showFeedback('refreshFeedback', 'info', 'Auto-refresh paused');
                addUpdateLog('warning', 'Auto-refresh paused');
            });
            
            // Toggle control
            toggle.addEventListener('click', () => {
                toggle.classList.toggle('active');
                const isActive = toggle.classList.contains('active');
                
                addUpdateLog(isActive ? 'success' : 'warning', 
                    `Auto-refresh ${isActive ? 'enabled' : 'disabled'}`);
            });
        }
        
        function startLiveUpdates() {
            // Add initial update log entries
            addUpdateLog('success', 'Interactive controls initialized');
            addUpdateLog('info', 'Live updates system activated');
            addUpdateLog('success', 'Risk dashboard ready for real-time monitoring');
        }
        
        function startLiveMonitoring() {
            if (isMonitoringActive) return;
            
            isMonitoringActive = true;
            const frequency = parseInt(document.getElementById('updateFrequencySlider').value) * 1000;
            
            liveUpdateInterval = setInterval(() => {
                simulateLiveUpdate();
            }, frequency);
            
            updateStatusIndicator(true);
        }
        
        function stopLiveMonitoring() {
            if (liveUpdateInterval) {
                clearInterval(liveUpdateInterval);
                liveUpdateInterval = null;
            }
            
            isMonitoringActive = false;
            updateStatusIndicator(false);
        }
        
        function simulateLiveUpdate() {
            // Simulate live data updates
            const updateTypes = [
                'Risk score updated',
                'New risk factor detected',
                'Industry benchmark refreshed',
                'Confidence score recalculated',
                'Trend analysis completed',
                'Alert threshold checked',
                'Data quality validated'
            ];
            
            const randomUpdate = updateTypes[Math.floor(Math.random() * updateTypes.length)];
            const statuses = ['success', 'info', 'warning'];
            const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
            
            addUpdateLog(randomStatus, randomUpdate);
        }
        
        function addUpdateLog(status, message) {
            const updateLog = document.getElementById('updateLog');
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            
            const updateEntry = document.createElement('div');
            updateEntry.className = 'update-entry';
            updateEntry.innerHTML = `
                <div class="update-status ${status}"></div>
                <div class="update-message">${message}</div>
                <div class="update-time">${timeString}</div>
            `;
            
            // Add to beginning of log
            updateLog.insertBefore(updateEntry, updateLog.firstChild);
            
            // Keep only last 10 entries
            while (updateLog.children.length > 10) {
                updateLog.removeChild(updateLog.lastChild);
            }
        }
        
        function initializeUpdateLog() {
            // Add some initial log entries
            setTimeout(() => addUpdateLog('success', 'System initialized successfully'), 500);
            setTimeout(() => addUpdateLog('info', 'All control panels loaded'), 1000);
            setTimeout(() => addUpdateLog('success', 'Ready for user interaction'), 1500);
        }
        
        function updateStatusIndicator(isActive) {
            const indicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            
            if (isActive) {
                indicator.classList.remove('offline');
                statusText.textContent = 'Live Updates Active';
            } else {
                indicator.classList.add('offline');
                statusText.textContent = 'Live Updates Inactive';
            }
        }
        
        function showFeedback(elementId, type, message) {
            const feedback = document.getElementById(elementId);
            if (!feedback) return;
            
            feedback.className = `control-feedback ${type}`;
            feedback.textContent = message;
            feedback.style.display = 'block';
            
            // Hide after 3 seconds
            setTimeout(() => {
                feedback.style.display = 'none';
            }, 3000);
        }
        
        function refreshData() {
            // Simulate data refresh
            console.log('Refreshing risk data...');
            
            // In a real implementation, this would:
            // 1. Call the risk assessment API
            // 2. Update all dashboard components
            // 3. Refresh visualizations
            // 4. Update confidence scores
        }
        
        // Risk Level History and Timeline Functions
        function createRiskLevelHistory(assessment) {
            // Generate historical data
            const historicalData = generateHistoricalRiskData();
            
            // Initialize history components
            initializeHistoryControls();
            updateHistorySummary(historicalData);
            createHistoryTimeline(historicalData);
            createHistoryChart(historicalData);
        }
        
        function generateHistoricalRiskData() {
            const data = [];
            const now = new Date();
            const currentScore = 65; // Current assessment score
            
            // Generate 30 days of historical data
            for (let i = 29; i >= 0; i--) {
                const date = new Date(now);
                date.setDate(date.getDate() - i);
                
                // Generate realistic score variations
                const baseScore = currentScore;
                const variation = (Math.random() - 0.5) * 20; // Â±10 points variation
                const trend = (29 - i) * 0.3; // Slight improving trend
                const score = Math.max(0, Math.min(100, Math.round(baseScore + variation + trend)));
                
                const riskLevel = getRiskLevelFromScore(score);
                const change = i > 0 ? score - data[data.length - 1].score : 0;
                
                data.push({
                    date: date,
                    score: score,
                    riskLevel: riskLevel,
                    change: change,
                    details: generateAssessmentDetails(score, riskLevel)
                });
            }
            
            return data;
        }
        
        function generateAssessmentDetails(score, riskLevel) {
            const details = {
                low: [
                    "Strong financial controls maintained",
                    "Operational efficiency improved",
                    "Compliance status verified",
                    "Risk monitoring systems active"
                ],
                medium: [
                    "Some operational challenges noted",
                    "Financial controls adequate",
                    "Compliance requirements met",
                    "Risk factors being monitored"
                ],
                high: [
                    "Significant operational risks identified",
                    "Financial controls need attention",
                    "Compliance gaps detected",
                    "Immediate action required"
                ],
                critical: [
                    "Critical operational failures detected",
                    "Financial controls compromised",
                    "Major compliance violations",
                    "Emergency response activated"
                ]
            };
            
            const levelDetails = details[riskLevel] || details.medium;
            return levelDetails[Math.floor(Math.random() * levelDetails.length)];
        }
        
        function initializeHistoryControls() {
            const periodSelect = document.getElementById('historyPeriodSelect');
            const viewButtons = document.querySelectorAll('.history-view-button');
            
            // Period selector
            periodSelect.addEventListener('change', (e) => {
                const period = e.target.value;
                updateHistoryPeriod(period);
            });
            
            // View toggle buttons
            viewButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const view = e.target.dataset.view;
                    switchHistoryView(view);
                });
            });
        }
        
        function updateHistoryPeriod(period) {
            console.log(`Updating history period to: ${period}`);
            
            // In a real implementation, this would:
            // 1. Fetch historical data for the selected period
            // 2. Update the timeline and chart
            // 3. Recalculate summary metrics
            
            // For now, we'll just log the period change
            addUpdateLog('info', `History period changed to ${period}`);
        }
        
        function switchHistoryView(view) {
            const timelineContainer = document.querySelector('.timeline-container');
            const chartContainer = document.getElementById('historyChart');
            const viewButtons = document.querySelectorAll('.history-view-button');
            
            // Update button states
            viewButtons.forEach(button => {
                button.classList.toggle('active', button.dataset.view === view);
            });
            
            // Show/hide containers
            if (view === 'timeline') {
                timelineContainer.style.display = 'block';
                chartContainer.style.display = 'none';
            } else {
                timelineContainer.style.display = 'none';
                chartContainer.style.display = 'block';
            }
            
            addUpdateLog('info', `History view switched to ${view}`);
        }
        
        function updateHistorySummary(data) {
            const scores = data.map(d => d.score);
            const average = Math.round(scores.reduce((a, b) => a + b, 0) / scores.length);
            const highest = Math.max(...scores);
            const lowest = Math.min(...scores);
            const total = data.length;
            
            // Calculate trend
            const firstHalf = scores.slice(0, Math.floor(scores.length / 2));
            const secondHalf = scores.slice(Math.floor(scores.length / 2));
            const firstAvg = firstHalf.reduce((a, b) => a + b, 0) / firstHalf.length;
            const secondAvg = secondHalf.reduce((a, b) => a + b, 0) / secondHalf.length;
            const trend = Math.round(secondAvg - firstAvg);
            
            // Update summary metrics
            document.getElementById('historyAverageScore').textContent = average;
            document.getElementById('historyHighestScore').textContent = highest;
            document.getElementById('historyLowestScore').textContent = lowest;
            document.getElementById('historyTotalAssessments').textContent = total;
            
            // Update trend
            const trendIcon = document.querySelector('.history-trend-icon');
            const trendValue = document.querySelector('.history-trend-value');
            
            if (trend > 0) {
                trendIcon.className = 'history-trend-icon declining';
                trendIcon.textContent = 'â†˜';
                trendValue.textContent = `Declining (+${trend} points)`;
            } else if (trend < 0) {
                trendIcon.className = 'history-trend-icon improving';
                trendIcon.textContent = 'â†—';
                trendValue.textContent = `Improving (${trend} points)`;
            } else {
                trendIcon.className = 'history-trend-icon stable';
                trendIcon.textContent = 'â†’';
                trendValue.textContent = 'Stable (0 points)';
            }
        }
        
        function createHistoryTimeline(data) {
            const timeline = document.getElementById('historyTimeline');
            timeline.innerHTML = '';
            
            // Show only last 10 entries for timeline view
            const recentData = data.slice(-10);
            
            recentData.forEach((entry, index) => {
                const timelineItem = createTimelineItem(entry, index);
                timeline.appendChild(timelineItem);
            });
        }
        
        function createTimelineItem(entry, index) {
            const item = document.createElement('div');
            item.className = `timeline-item ${entry.riskLevel}`;
            
            const changeClass = entry.change > 0 ? 'negative' : entry.change < 0 ? 'positive' : 'neutral';
            const changeText = entry.change > 0 ? `+${entry.change}` : entry.change.toString();
            const changeIcon = entry.change > 0 ? 'â†—' : entry.change < 0 ? 'â†˜' : 'â†’';
            
            item.innerHTML = `
                <div class="timeline-content">
                    <div class="timeline-header">
                        <div class="timeline-date">${formatDate(entry.date)}</div>
                        <div class="timeline-score">${entry.score}</div>
                    </div>
                    <div class="timeline-details">
                        ${entry.details}
                    </div>
                    ${entry.change !== 0 ? `
                        <div class="timeline-change ${changeClass}">
                            <span>${changeIcon}</span>
                            <span>${changeText} points</span>
                        </div>
                    ` : ''}
                </div>
            `;
            
            return item;
        }
        
        function createHistoryChart(data) {
            const chartContainer = document.getElementById('historyChart');
            const svg = chartContainer.querySelector('.history-chart-svg');
            const path = chartContainer.querySelector('#historyChartPath');
            const pointsContainer = chartContainer.querySelector('#historyChartPoints');
            
            // Clear existing points
            pointsContainer.innerHTML = '';
            
            // Calculate chart dimensions
            const width = 100;
            const height = 100;
            const padding = 10;
            const chartWidth = width - (padding * 2);
            const chartHeight = height - (padding * 2);
            
            // Generate path data
            const pathData = data.map((entry, index) => {
                const x = padding + (index / (data.length - 1)) * chartWidth;
                const y = padding + ((100 - entry.score) / 100) * chartHeight;
                return `${index === 0 ? 'M' : 'L'} ${x} ${y}`;
            }).join(' ');
            
            path.setAttribute('d', pathData);
            
            // Create chart points
            data.forEach((entry, index) => {
                const point = document.createElement('div');
                point.className = `history-chart-point ${entry.riskLevel}`;
                
                const x = padding + (index / (data.length - 1)) * chartWidth;
                const y = padding + ((100 - entry.score) / 100) * chartHeight;
                
                point.style.left = `${x}%`;
                point.style.top = `${y}%`;
                
                // Add tooltip
                point.addEventListener('mouseenter', (e) => {
                    showChartTooltip(e.target, entry);
                });
                
                point.addEventListener('mouseleave', () => {
                    hideChartTooltip();
                });
                
                pointsContainer.appendChild(point);
            });
        }
        
        function showChartTooltip(element, data) {
            const tooltip = document.createElement('div');
            tooltip.className = 'history-chart-tooltip show';
            tooltip.innerHTML = `
                <div><strong>${formatDate(data.date)}</strong></div>
                <div>Score: ${data.score}</div>
                <div>Level: ${data.riskLevel.charAt(0).toUpperCase() + data.riskLevel.slice(1)}</div>
                ${data.change !== 0 ? `<div>Change: ${data.change > 0 ? '+' : ''}${data.change}</div>` : ''}
            `;
            
            document.body.appendChild(tooltip);
            
            // Position tooltip
            const rect = element.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            
            tooltip.style.left = `${rect.left + rect.width / 2 - tooltipRect.width / 2}px`;
            tooltip.style.top = `${rect.top - tooltipRect.height - 8}px`;
        }
        
        function hideChartTooltip() {
            const tooltip = document.querySelector('.history-chart-tooltip');
            if (tooltip) {
                tooltip.remove();
            }
        }
        
        function formatDate(date) {
            return date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        function getRiskLevelFromScore(score) {
            if (score >= 76) return 'critical';
            if (score >= 51) return 'high';
            if (score >= 26) return 'medium';
            return 'low';
        }
        
        // Risk Level Impact Indicators and Business Implications Functions
        function createRiskLevelImpactIndicators(assessment) {
            const riskLevel = getRiskLevelFromScore(assessment.overallScore);
            
            // Update impact severity
            updateImpactSeverity(riskLevel);
            
            // Create impact indicators
            createImpactIndicators(assessment, riskLevel);
            
            // Create business implications
            createBusinessImplications(assessment, riskLevel);
            
            // Create action recommendations
            createActionRecommendations(assessment, riskLevel);
            
            // Show/hide impact alert
            toggleImpactAlert(riskLevel);
        }
        
        function updateImpactSeverity(riskLevel) {
            const severityElement = document.getElementById('impactSeverity');
            const severityText = {
                low: 'Low Impact',
                medium: 'Medium Impact',
                high: 'High Impact',
                critical: 'Critical Impact'
            };
            
            severityElement.textContent = severityText[riskLevel];
            severityElement.className = `impact-severity ${riskLevel}`;
        }
        
        function createImpactIndicators(assessment, riskLevel) {
            const indicatorsList = document.getElementById('impactIndicatorsList');
            indicatorsList.innerHTML = '';
            
            const indicators = generateImpactIndicators(assessment, riskLevel);
            
            indicators.forEach(indicator => {
                const indicatorElement = createImpactIndicator(indicator);
                indicatorsList.appendChild(indicatorElement);
            });
        }
        
        function generateImpactIndicators(assessment, riskLevel) {
            const baseIndicators = [
                {
                    type: 'financial',
                    icon: 'fas fa-dollar-sign',
                    title: 'Financial Impact',
                    description: 'Potential financial losses and cost implications'
                },
                {
                    type: 'operational',
                    icon: 'fas fa-cogs',
                    title: 'Operational Impact',
                    description: 'Business operations and process disruptions'
                },
                {
                    type: 'compliance',
                    icon: 'fas fa-shield-alt',
                    title: 'Compliance Impact',
                    description: 'Regulatory and compliance implications'
                },
                {
                    type: 'reputational',
                    icon: 'fas fa-star',
                    title: 'Reputational Impact',
                    description: 'Brand reputation and stakeholder confidence'
                }
            ];
            
            return baseIndicators.map(indicator => {
                const impactValue = calculateImpactValue(indicator.type, assessment, riskLevel);
                return {
                    ...indicator,
                    value: impactValue.value,
                    description: impactValue.description
                };
            });
        }
        
        function calculateImpactValue(type, assessment, riskLevel) {
            const impactLevels = {
                low: { multiplier: 0.2, description: 'Minimal impact expected' },
                medium: { multiplier: 0.5, description: 'Moderate impact possible' },
                high: { multiplier: 0.8, description: 'Significant impact likely' },
                critical: { multiplier: 1.0, description: 'Severe impact expected' }
            };
            
            const baseValues = {
                financial: { base: 15, description: 'Potential financial losses and cost implications' },
                operational: { base: 12, description: 'Business operations and process disruptions' },
                compliance: { base: 18, description: 'Regulatory and compliance implications' },
                reputational: { base: 10, description: 'Brand reputation and stakeholder confidence' }
            };
            
            const level = impactLevels[riskLevel];
            const base = baseValues[type];
            
            return {
                value: Math.round(base.base * level.multiplier),
                description: base.description
            };
        }
        
        function createImpactIndicator(indicator) {
            const element = document.createElement('div');
            element.className = 'impact-indicator';
            
            element.innerHTML = `
                <div class="impact-indicator-icon ${indicator.type}">
                    <i class="${indicator.icon}"></i>
                </div>
                <div class="impact-indicator-content">
                    <div class="impact-indicator-title">${indicator.title}</div>
                    <div class="impact-indicator-description">${indicator.description}</div>
                </div>
                <div class="impact-indicator-value">${indicator.value}%</div>
            `;
            
            return element;
        }
        
        function createBusinessImplications(assessment, riskLevel) {
            const implicationsList = document.getElementById('businessImplicationsList');
            implicationsList.innerHTML = '';
            
            const implications = generateBusinessImplications(assessment, riskLevel);
            
            implications.forEach(category => {
                const categoryElement = createImplicationCategory(category);
                implicationsList.appendChild(categoryElement);
            });
        }
        
        function generateBusinessImplications(assessment, riskLevel) {
            const implications = {
                low: {
                    'Financial': [
                        { type: 'positive', text: 'Low financial exposure and minimal cost impact' },
                        { type: 'positive', text: 'Maintains current financial stability' },
                        { type: 'neutral', text: 'Standard monitoring procedures sufficient' }
                    ],
                    'Operational': [
                        { type: 'positive', text: 'Operations continue without disruption' },
                        { type: 'positive', text: 'Current processes remain effective' },
                        { type: 'neutral', text: 'Regular operational reviews adequate' }
                    ],
                    'Compliance': [
                        { type: 'positive', text: 'Compliance requirements met' },
                        { type: 'positive', text: 'Regulatory standing maintained' },
                        { type: 'neutral', text: 'Standard compliance monitoring sufficient' }
                    ]
                },
                medium: {
                    'Financial': [
                        { type: 'neutral', text: 'Moderate financial exposure requires monitoring' },
                        { type: 'negative', text: 'Potential for increased operational costs' },
                        { type: 'neutral', text: 'Budget adjustments may be necessary' }
                    ],
                    'Operational': [
                        { type: 'negative', text: 'Some operational inefficiencies may occur' },
                        { type: 'neutral', text: 'Process improvements recommended' },
                        { type: 'negative', text: 'Resource allocation may need adjustment' }
                    ],
                    'Compliance': [
                        { type: 'negative', text: 'Enhanced compliance monitoring required' },
                        { type: 'neutral', text: 'Additional documentation may be needed' },
                        { type: 'negative', text: 'Risk of regulatory scrutiny increases' }
                    ]
                },
                high: {
                    'Financial': [
                        { type: 'negative', text: 'Significant financial exposure and potential losses' },
                        { type: 'negative', text: 'Increased insurance and compliance costs' },
                        { type: 'negative', text: 'Potential impact on credit ratings' }
                    ],
                    'Operational': [
                        { type: 'negative', text: 'Major operational disruptions likely' },
                        { type: 'negative', text: 'Resource reallocation required' },
                        { type: 'negative', text: 'Customer service may be affected' }
                    ],
                    'Compliance': [
                        { type: 'negative', text: 'High risk of regulatory violations' },
                        { type: 'negative', text: 'Potential for fines and penalties' },
                        { type: 'negative', text: 'Increased audit frequency expected' }
                    ]
                },
                critical: {
                    'Financial': [
                        { type: 'negative', text: 'Severe financial losses and business impact' },
                        { type: 'negative', text: 'Potential for business closure or restructuring' },
                        { type: 'negative', text: 'Significant impact on shareholder value' }
                    ],
                    'Operational': [
                        { type: 'negative', text: 'Complete operational shutdown possible' },
                        { type: 'negative', text: 'Emergency response procedures required' },
                        { type: 'negative', text: 'Business continuity at risk' }
                    ],
                    'Compliance': [
                        { type: 'negative', text: 'Immediate regulatory action expected' },
                        { type: 'negative', text: 'Potential for criminal liability' },
                        { type: 'negative', text: 'License revocation possible' }
                    ]
                }
            };
            
            return Object.entries(implications[riskLevel]).map(([category, items]) => ({
                title: category,
                items: items
            }));
        }
        
        function createImplicationCategory(category) {
            const element = document.createElement('div');
            element.className = 'implication-category';
            
            const itemsHtml = category.items.map(item => `
                <li class="implication-item">
                    <div class="implication-item-icon ${item.type}">
                        ${item.type === 'positive' ? 'âœ“' : item.type === 'negative' ? 'âœ—' : 'â—‹'}
                    </div>
                    <div class="implication-item-text">${item.text}</div>
                </li>
            `).join('');
            
            element.innerHTML = `
                <div class="implication-category-title">${category.title}</div>
                <ul class="implication-list">
                    ${itemsHtml}
                </ul>
            `;
            
            return element;
        }
        
        function createActionRecommendations(assessment, riskLevel) {
            const recommendationsGrid = document.getElementById('actionRecommendationsGrid');
            recommendationsGrid.innerHTML = '';
            
            const recommendations = generateActionRecommendations(assessment, riskLevel);
            
            recommendations.forEach(recommendation => {
                const recommendationElement = createActionRecommendation(recommendation);
                recommendationsGrid.appendChild(recommendationElement);
            });
        }
        
        function generateActionRecommendations(assessment, riskLevel) {
            const recommendations = {
                low: [
                    {
                        type: 'long-term',
                        icon: 'fas fa-chart-line',
                        title: 'Continuous Monitoring',
                        description: 'Maintain regular risk monitoring and assessment procedures',
                        priority: 'low'
                    },
                    {
                        type: 'long-term',
                        icon: 'fas fa-shield-alt',
                        title: 'Preventive Measures',
                        description: 'Implement preventive controls to maintain low risk levels',
                        priority: 'low'
                    }
                ],
                medium: [
                    {
                        type: 'short-term',
                        icon: 'fas fa-tools',
                        title: 'Process Improvements',
                        description: 'Enhance existing processes to reduce risk exposure',
                        priority: 'medium'
                    },
                    {
                        type: 'short-term',
                        icon: 'fas fa-users',
                        title: 'Staff Training',
                        description: 'Provide additional training on risk management procedures',
                        priority: 'medium'
                    },
                    {
                        type: 'long-term',
                        icon: 'fas fa-cogs',
                        title: 'System Upgrades',
                        description: 'Consider upgrading systems to improve risk controls',
                        priority: 'low'
                    }
                ],
                high: [
                    {
                        type: 'immediate',
                        icon: 'fas fa-exclamation-triangle',
                        title: 'Immediate Review',
                        description: 'Conduct immediate risk assessment and mitigation review',
                        priority: 'high'
                    },
                    {
                        type: 'immediate',
                        icon: 'fas fa-user-shield',
                        title: 'Management Escalation',
                        description: 'Escalate to senior management for immediate attention',
                        priority: 'high'
                    },
                    {
                        type: 'short-term',
                        icon: 'fas fa-wrench',
                        title: 'Control Implementation',
                        description: 'Implement additional controls and monitoring systems',
                        priority: 'high'
                    },
                    {
                        type: 'short-term',
                        icon: 'fas fa-file-alt',
                        title: 'Documentation Review',
                        description: 'Review and update all risk documentation and procedures',
                        priority: 'medium'
                    }
                ],
                critical: [
                    {
                        type: 'immediate',
                        icon: 'fas fa-fire',
                        title: 'Emergency Response',
                        description: 'Activate emergency response procedures immediately',
                        priority: 'high'
                    },
                    {
                        type: 'immediate',
                        icon: 'fas fa-phone',
                        title: 'Crisis Management',
                        description: 'Engage crisis management team and external advisors',
                        priority: 'high'
                    },
                    {
                        type: 'immediate',
                        icon: 'fas fa-ban',
                        title: 'Business Continuity',
                        description: 'Implement business continuity and disaster recovery plans',
                        priority: 'high'
                    },
                    {
                        type: 'immediate',
                        icon: 'fas fa-gavel',
                        title: 'Legal Consultation',
                        description: 'Engage legal counsel for regulatory and compliance issues',
                        priority: 'high'
                    }
                ]
            };
            
            return recommendations[riskLevel] || recommendations.medium;
        }
        
        function createActionRecommendation(recommendation) {
            const element = document.createElement('div');
            element.className = 'action-card';
            
            element.innerHTML = `
                <div class="action-card-header">
                    <div class="action-card-icon ${recommendation.type}">
                        <i class="${recommendation.icon}"></i>
                    </div>
                    <div class="action-card-title">${recommendation.title}</div>
                </div>
                <div class="action-card-description">${recommendation.description}</div>
                <div class="action-card-priority ${recommendation.priority}">
                    ${recommendation.priority.toUpperCase()} PRIORITY
                </div>
            `;
            
            return element;
        }
        
        function toggleImpactAlert(riskLevel) {
            const alertElement = document.getElementById('impactAlert');
            
            if (riskLevel === 'high' || riskLevel === 'critical') {
                alertElement.style.display = 'block';
            } else {
                alertElement.style.display = 'none';
            }
        }
        
        // Accessibility Features Implementation
        function initializeAccessibilityFeatures() {
            // Initialize accessibility controls
            initializeAccessibilityControls();
            
            // Initialize keyboard navigation
            initializeKeyboardNavigation();
            
            // Initialize ARIA live regions
            initializeARIALiveRegions();
            
            // Initialize focus management
            initializeFocusManagement();
            
            // Initialize screen reader support
            initializeScreenReaderSupport();
        }
        
        function initializeAccessibilityControls() {
            const highContrastToggle = document.getElementById('highContrastToggle');
            const reducedMotionToggle = document.getElementById('reducedMotionToggle');
            const largeTextToggle = document.getElementById('largeTextToggle');
            const keyboardShortcutsToggle = document.getElementById('keyboardShortcutsToggle');
            
            // High contrast toggle
            highContrastToggle.addEventListener('change', (e) => {
                const body = document.body;
                if (e.target.checked) {
                    body.classList.add('high-contrast-mode');
                    announceToScreenReader('High contrast mode enabled', 'polite');
                } else {
                    body.classList.remove('high-contrast-mode');
                    announceToScreenReader('High contrast mode disabled', 'polite');
                }
            });
            
            // Reduced motion toggle
            reducedMotionToggle.addEventListener('change', (e) => {
                const body = document.body;
                if (e.target.checked) {
                    body.classList.add('reduced-motion');
                    announceToScreenReader('Reduced motion enabled', 'polite');
                } else {
                    body.classList.remove('reduced-motion');
                    announceToScreenReader('Reduced motion disabled', 'polite');
                }
            });
            
            // Large text toggle
            largeTextToggle.addEventListener('change', (e) => {
                const body = document.body;
                if (e.target.checked) {
                    body.classList.add('large-text-mode');
                    announceToScreenReader('Large text mode enabled', 'polite');
                } else {
                    body.classList.remove('large-text-mode');
                    announceToScreenReader('Large text mode disabled', 'polite');
                }
            });
            
            // Keyboard shortcuts toggle
            keyboardShortcutsToggle.addEventListener('change', (e) => {
                const shortcutsPanel = document.getElementById('keyboardShortcuts');
                if (e.target.checked) {
                    shortcutsPanel.classList.add('show');
                    shortcutsPanel.setAttribute('aria-hidden', 'false');
                    announceToScreenReader('Keyboard shortcuts panel opened', 'polite');
                } else {
                    shortcutsPanel.classList.remove('show');
                    shortcutsPanel.setAttribute('aria-hidden', 'true');
                    announceToScreenReader('Keyboard shortcuts panel closed', 'polite');
                }
            });
        }
        
        function initializeKeyboardNavigation() {
            // Global keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Ctrl + H: Toggle high contrast
                if (e.ctrlKey && e.key === 'h') {
                    e.preventDefault();
                    const toggle = document.getElementById('highContrastToggle');
                    toggle.checked = !toggle.checked;
                    toggle.dispatchEvent(new Event('change'));
                }
                
                // Ctrl + M: Toggle reduced motion
                if (e.ctrlKey && e.key === 'm') {
                    e.preventDefault();
                    const toggle = document.getElementById('reducedMotionToggle');
                    toggle.checked = !toggle.checked;
                    toggle.dispatchEvent(new Event('change'));
                }
                
                // Ctrl + T: Toggle large text
                if (e.ctrlKey && e.key === 't') {
                    e.preventDefault();
                    const toggle = document.getElementById('largeTextToggle');
                    toggle.checked = !toggle.checked;
                    toggle.dispatchEvent(new Event('change'));
                }
                
                // ?: Toggle keyboard shortcuts
                if (e.key === '?') {
                    e.preventDefault();
                    const toggle = document.getElementById('keyboardShortcutsToggle');
                    toggle.checked = !toggle.checked;
                    toggle.dispatchEvent(new Event('change'));
                }
                
                // R: Focus risk score
                if (e.key === 'r' && !e.ctrlKey && !e.altKey) {
                    e.preventDefault();
                    focusRiskScore();
                }
                
                // C: Focus risk categories
                if (e.key === 'c' && !e.ctrlKey && !e.altKey) {
                    e.preventDefault();
                    focusRiskCategories();
                }
                
                // A: Focus alerts
                if (e.key === 'a' && !e.ctrlKey && !e.altKey) {
                    e.preventDefault();
                    focusAlerts();
                }
                
                // H: Focus history
                if (e.key === 'h' && !e.ctrlKey && !e.altKey) {
                    e.preventDefault();
                    focusHistory();
                }
            });
            
            // Add keyboard navigation to interactive elements
            addKeyboardNavigationToElements();
        }
        
        function addKeyboardNavigationToElements() {
            // Add tabindex and ARIA attributes to interactive elements
            const interactiveElements = document.querySelectorAll('.risk-badge, .progress-bar, .tooltip-trigger, .control-button, .action-card');
            
            interactiveElements.forEach((element, index) => {
                if (!element.hasAttribute('tabindex')) {
                    element.setAttribute('tabindex', '0');
                }
                
                // Add keyboard event listeners
                element.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        element.click();
                    }
                });
                
                // Add focus management
                element.addEventListener('focus', () => {
                    element.classList.add('focus-visible');
                });
                
                element.addEventListener('blur', () => {
                    element.classList.remove('focus-visible');
                });
            });
        }
        
        function initializeARIALiveRegions() {
            // ARIA live regions are already in the HTML
            // This function can be used to update them dynamically
        }
        
        function announceToScreenReader(message, priority = 'polite') {
            const liveRegion = document.getElementById(`aria-live-${priority}`);
            if (liveRegion) {
                liveRegion.textContent = message;
                // Clear the message after a short delay
                setTimeout(() => {
                    liveRegion.textContent = '';
                }, 1000);
            }
        }
        
        function initializeFocusManagement() {
            // Focus management for dynamic content
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach((node) => {
                            if (node.nodeType === Node.ELEMENT_NODE) {
                                addAccessibilityAttributes(node);
                            }
                        });
                    }
                });
            });
            
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        }
        
        function addAccessibilityAttributes(element) {
            // Add ARIA attributes to dynamically created elements
            if (element.classList.contains('risk-badge')) {
                element.setAttribute('role', 'status');
                element.setAttribute('aria-live', 'polite');
            }
            
            if (element.classList.contains('progress-bar')) {
                element.setAttribute('role', 'progressbar');
                element.setAttribute('aria-valuemin', '0');
                element.setAttribute('aria-valuemax', '100');
                element.setAttribute('aria-valuenow', element.dataset.value || '0');
            }
            
            if (element.classList.contains('tooltip-trigger')) {
                element.setAttribute('aria-describedby', element.dataset.tooltipId || '');
            }
            
            if (element.classList.contains('control-button')) {
                element.setAttribute('role', 'button');
                element.setAttribute('tabindex', '0');
            }
            
            if (element.classList.contains('action-card')) {
                element.setAttribute('role', 'button');
                element.setAttribute('tabindex', '0');
            }
        }
        
        function initializeScreenReaderSupport() {
            // Add screen reader support for complex interactions
            const riskScoreElement = document.getElementById('riskScore');
            if (riskScoreElement) {
                riskScoreElement.setAttribute('aria-label', 'Risk Score');
                riskScoreElement.setAttribute('role', 'status');
            }
            
            const riskCategoriesElement = document.getElementById('riskCategories');
            if (riskCategoriesElement) {
                riskCategoriesElement.setAttribute('aria-label', 'Risk Categories');
                riskCategoriesElement.setAttribute('role', 'region');
            }
            
            const alertsElement = document.getElementById('alertsList');
            if (alertsElement) {
                alertsElement.setAttribute('aria-label', 'Risk Alerts');
                alertsElement.setAttribute('role', 'region');
            }
            
            const historyElement = document.getElementById('historyTimeline');
            if (historyElement) {
                historyElement.setAttribute('aria-label', 'Risk History Timeline');
                historyElement.setAttribute('role', 'region');
            }
        }
        
        function focusRiskScore() {
            const riskScoreElement = document.getElementById('riskScore');
            if (riskScoreElement) {
                riskScoreElement.focus();
                announceToScreenReader('Focused on risk score', 'polite');
            }
        }
        
        function focusRiskCategories() {
            const riskCategoriesElement = document.getElementById('riskCategories');
            if (riskCategoriesElement) {
                riskCategoriesElement.focus();
                announceToScreenReader('Focused on risk categories', 'polite');
            }
        }
        
        function focusAlerts() {
            const alertsElement = document.getElementById('alertsList');
            if (alertsElement) {
                alertsElement.focus();
                announceToScreenReader('Focused on risk alerts', 'polite');
            }
        }
        
        function focusHistory() {
            const historyElement = document.getElementById('historyTimeline');
            if (historyElement) {
                historyElement.focus();
                announceToScreenReader('Focused on risk history', 'polite');
            }
        }
        
        function updateProgressBarAccessibility(progressBar, value, label) {
            progressBar.setAttribute('aria-valuenow', value);
            progressBar.setAttribute('aria-label', label);
            progressBar.setAttribute('aria-valuetext', `${value}% - ${label}`);
        }
        
        function updateRiskBadgeAccessibility(badge, riskLevel, score) {
            badge.setAttribute('aria-label', `${riskLevel} risk level with score ${score}`);
            badge.setAttribute('aria-describedby', `risk-level-${riskLevel}-description`);
        }
        
        function updateTooltipAccessibility(tooltip, content) {
            tooltip.setAttribute('aria-label', content);
            tooltip.setAttribute('role', 'tooltip');
        }
        
        // Mobile Responsive Features Implementation
        function initializeMobileResponsiveFeatures() {
            // Initialize mobile navigation
            initializeMobileNavigation();
            
            // Initialize touch interactions
            initializeTouchInteractions();
            
            // Initialize responsive charts
            initializeResponsiveCharts();
            
            // Initialize mobile-specific tooltips
            initializeMobileTooltips();
            
            // Initialize orientation handling
            initializeOrientationHandling();
            
            // Initialize viewport management
            initializeViewportManagement();
        }
        
        function initializeMobileNavigation() {
            // Mobile menu toggle
            const mobileMenuToggle = document.querySelector('.nav-mobile-menu');
            const navMenu = document.querySelector('.nav-menu');
            
            if (mobileMenuToggle && navMenu) {
                mobileMenuToggle.addEventListener('click', () => {
                    navMenu.classList.toggle('mobile-open');
                    mobileMenuToggle.setAttribute('aria-expanded', 
                        navMenu.classList.contains('mobile-open'));
                });
            }
            
            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.nav-container') && navMenu) {
                    navMenu.classList.remove('mobile-open');
                    mobileMenuToggle.setAttribute('aria-expanded', 'false');
                }
            });
            
            // Close mobile menu on escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && navMenu && navMenu.classList.contains('mobile-open')) {
                    navMenu.classList.remove('mobile-open');
                    mobileMenuToggle.setAttribute('aria-expanded', 'false');
                }
            });
        }
        
        function initializeTouchInteractions() {
            // Touch-friendly interactions for interactive elements
            const interactiveElements = document.querySelectorAll('.risk-badge, .heat-map-item, .action-card, .control-button');
            
            interactiveElements.forEach(element => {
                // Add touch feedback
                element.addEventListener('touchstart', (e) => {
                    element.classList.add('touch-active');
                });
                
                element.addEventListener('touchend', (e) => {
                    setTimeout(() => {
                        element.classList.remove('touch-active');
                    }, 150);
                });
                
                // Prevent double-tap zoom on interactive elements
                element.addEventListener('touchend', (e) => {
                    e.preventDefault();
                });
            });
            
            // Swipe gestures for navigation
            let touchStartX = 0;
            let touchStartY = 0;
            
            document.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
            });
            
            document.addEventListener('touchend', (e) => {
                if (!touchStartX || !touchStartY) return;
                
                const touchEndX = e.changedTouches[0].clientX;
                const touchEndY = e.changedTouches[0].clientY;
                
                const diffX = touchStartX - touchEndX;
                const diffY = touchStartY - touchEndY;
                
                // Horizontal swipe detection
                if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                    if (diffX > 0) {
                        // Swipe left - could be used for navigation
                        handleSwipeLeft();
                    } else {
                        // Swipe right - could be used for navigation
                        handleSwipeRight();
                    }
                }
                
                // Reset touch coordinates
                touchStartX = 0;
                touchStartY = 0;
            });
        }
        
        function handleSwipeLeft() {
            // Handle left swipe gesture
            console.log('Swipe left detected');
            // Could be used for navigation or content switching
        }
        
        function handleSwipeRight() {
            // Handle right swipe gesture
            console.log('Swipe right detected');
            // Could be used for navigation or content switching
        }
        
        function initializeResponsiveCharts() {
            // Responsive chart handling
            const charts = document.querySelectorAll('.radar-chart, .history-chart-svg, .benchmark-chart');
            
            charts.forEach(chart => {
                // Resize charts on window resize
                window.addEventListener('resize', debounce(() => {
                    resizeChart(chart);
                }, 250));
                
                // Initial resize
                resizeChart(chart);
            });
        }
        
        function resizeChart(chart) {
            const container = chart.closest('.chart-container, .radar-container, .history-chart-container');
            if (!container) return;
            
            const containerWidth = container.offsetWidth;
            const containerHeight = container.offsetHeight;
            
            // Update chart dimensions based on container size
            if (chart.classList.contains('radar-chart')) {
                const size = Math.min(containerWidth, containerHeight) - 40;
                chart.style.width = size + 'px';
                chart.style.height = size + 'px';
            } else if (chart.classList.contains('history-chart-svg')) {
                chart.setAttribute('viewBox', `0 0 ${containerWidth} ${containerHeight}`);
            }
        }
        
        function initializeMobileTooltips() {
            // Mobile-specific tooltip behavior
            const tooltipTriggers = document.querySelectorAll('.tooltip-trigger');
            
            tooltipTriggers.forEach(trigger => {
                let tooltip = null;
                let tooltipTimeout = null;
                
                // Touch events for mobile
                trigger.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    
                    // Clear any existing timeout
                    if (tooltipTimeout) {
                        clearTimeout(tooltipTimeout);
                    }
                    
                    // Show tooltip after a short delay
                    tooltipTimeout = setTimeout(() => {
                        showMobileTooltip(trigger);
                    }, 500);
                });
                
                trigger.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    
                    // Clear timeout if touch ends quickly
                    if (tooltipTimeout) {
                        clearTimeout(tooltipTimeout);
                        tooltipTimeout = null;
                    }
                });
                
                // Hide tooltip on touch outside
                document.addEventListener('touchstart', (e) => {
                    if (!trigger.contains(e.target) && tooltip) {
                        hideMobileTooltip(tooltip);
                    }
                });
            });
        }
        
        function showMobileTooltip(trigger) {
            const tooltipContent = trigger.getAttribute('data-tooltip') || trigger.getAttribute('title');
            if (!tooltipContent) return;
            
            const tooltip = document.createElement('div');
            tooltip.className = 'mobile-tooltip';
            tooltip.textContent = tooltipContent;
            tooltip.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #1f2937;
                color: white;
                padding: 12px 16px;
                border-radius: 8px;
                font-size: 14px;
                max-width: 90vw;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            `;
            
            document.body.appendChild(tooltip);
            
            // Auto-hide after 3 seconds
            setTimeout(() => {
                hideMobileTooltip(tooltip);
            }, 3000);
        }
        
        function hideMobileTooltip(tooltip) {
            if (tooltip && tooltip.parentNode) {
                tooltip.parentNode.removeChild(tooltip);
            }
        }
        
        function initializeOrientationHandling() {
            // Handle orientation changes
            window.addEventListener('orientationchange', () => {
                // Delay to ensure viewport has updated
                setTimeout(() => {
                    handleOrientationChange();
                }, 100);
            });
            
            // Handle resize events (for devices that don't fire orientationchange)
            window.addEventListener('resize', debounce(() => {
                handleOrientationChange();
            }, 250));
        }
        
        function handleOrientationChange() {
            const isPortrait = window.innerHeight > window.innerWidth;
            const body = document.body;
            
            if (isPortrait) {
                body.classList.add('portrait-mode');
                body.classList.remove('landscape-mode');
            } else {
                body.classList.add('landscape-mode');
                body.classList.remove('portrait-mode');
            }
            
            // Resize charts and other responsive elements
            const charts = document.querySelectorAll('.radar-chart, .history-chart-svg, .benchmark-chart');
            charts.forEach(chart => {
                resizeChart(chart);
            });
            
            // Announce orientation change to screen readers
            announceToScreenReader(
                isPortrait ? 'Switched to portrait mode' : 'Switched to landscape mode',
                'polite'
            );
        }
        
        function initializeViewportManagement() {
            // Prevent zoom on form inputs (iOS)
            const formInputs = document.querySelectorAll('input, select, textarea');
            formInputs.forEach(input => {
                if (input.style.fontSize !== '16px') {
                    input.style.fontSize = '16px';
                }
            });
            
            // Handle viewport height changes (mobile browsers)
            const setViewportHeight = () => {
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            };
            
            setViewportHeight();
            window.addEventListener('resize', setViewportHeight);
            window.addEventListener('orientationchange', setViewportHeight);
        }
        
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        function throttle(func, limit) {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }
        
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        
        function isTouchDevice() {
            return 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        }
        
        function getDeviceType() {
            const width = window.innerWidth;
            if (width <= 768) return 'mobile';
            if (width <= 1024) return 'tablet';
            return 'desktop';
        }
        
        function optimizeForDevice() {
            const deviceType = getDeviceType();
            const body = document.body;
            
            // Remove existing device classes
            body.classList.remove('mobile-device', 'tablet-device', 'desktop-device');
            
            // Add current device class
            body.classList.add(`${deviceType}-device`);
            
            // Device-specific optimizations
            if (deviceType === 'mobile') {
                // Mobile-specific optimizations
                optimizeForMobile();
            } else if (deviceType === 'tablet') {
                // Tablet-specific optimizations
                optimizeForTablet();
            } else {
                // Desktop-specific optimizations
                optimizeForDesktop();
            }
        }
        
        function optimizeForMobile() {
            // Mobile-specific optimizations
            const charts = document.querySelectorAll('.radar-chart');
            charts.forEach(chart => {
                chart.style.width = '100%';
                chart.style.height = '250px';
            });
            
            // Optimize touch targets
            const touchTargets = document.querySelectorAll('.risk-badge, .action-card, .control-button');
            touchTargets.forEach(target => {
                target.style.minHeight = '44px';
                target.style.minWidth = '44px';
            });
        }
        
        function optimizeForTablet() {
            // Tablet-specific optimizations
            const charts = document.querySelectorAll('.radar-chart');
            charts.forEach(chart => {
                chart.style.width = '100%';
                chart.style.height = '300px';
            });
        }
        
        function optimizeForDesktop() {
            // Desktop-specific optimizations
            const charts = document.querySelectorAll('.radar-chart');
            charts.forEach(chart => {
                chart.style.width = '100%';
                chart.style.height = '350px';
            });
        }
        
        // Animation and Transition Effects Implementation
        function initializeAnimationEffects() {
            // Initialize entrance animations
            initializeEntranceAnimations();
            
            // Initialize hover effects
            initializeHoverEffects();
            
            // Initialize focus effects
            initializeFocusEffects();
            
            // Initialize loading animations
            initializeLoadingAnimations();
            
            // Initialize scroll-triggered animations
            initializeScrollAnimations();
            
            // Initialize interaction animations
            initializeInteractionAnimations();
        }
        
        function initializeEntranceAnimations() {
            // Add entrance animations to elements as they load
            const elementsToAnimate = [
                { selector: '.risk-score-container', animation: 'bounce-in', delay: 0 },
                { selector: '.risk-badges-container', animation: 'slide-up', delay: 0.1 },
                { selector: '.progress-container', animation: 'fade-in', delay: 0.2 },
                { selector: '.heat-map-container', animation: 'scale-in', delay: 0.3 },
                { selector: '.radar-container', animation: 'flip-in', delay: 0.4 },
                { selector: '.benchmark-container', animation: 'slide-left', delay: 0.5 },
                { selector: '.threshold-container', animation: 'slide-right', delay: 0.6 },
                { selector: '.controls-container', animation: 'zoom-in', delay: 0.7 },
                { selector: '.history-container', animation: 'fade-in', delay: 0.8 },
                { selector: '.impact-container', animation: 'scale-in', delay: 0.9 }
            ];
            
            elementsToAnimate.forEach(({ selector, animation, delay }) => {
                const elements = document.querySelectorAll(selector);
                elements.forEach((element, index) => {
                    element.style.opacity = '0';
                    element.style.transform = 'translateY(20px)';
                    
                    setTimeout(() => {
                        element.classList.add(animation);
                        element.style.opacity = '1';
                        element.style.transform = 'translateY(0)';
                    }, delay * 1000 + (index * 100));
                });
            });
        }
        
        function initializeHoverEffects() {
            // Add hover effects to interactive elements
            const hoverElements = [
                { selector: '.risk-badge', effects: ['hover-lift', 'hover-glow'] },
                { selector: '.heat-map-item', effects: ['hover-scale', 'hover-glow'] },
                { selector: '.action-card', effects: ['hover-lift', 'hover-scale'] },
                { selector: '.control-button', effects: ['hover-bounce'] },
                { selector: '.timeline-item', effects: ['hover-lift'] },
                { selector: '.benchmark-card', effects: ['hover-scale', 'hover-glow'] },
                { selector: '.threshold-level', effects: ['hover-lift'] },
                { selector: '.impact-indicator', effects: ['hover-scale'] }
            ];
            
            hoverElements.forEach(({ selector, effects }) => {
                const elements = document.querySelectorAll(selector);
                elements.forEach(element => {
                    effects.forEach(effect => {
                        element.classList.add(effect);
                    });
                });
            });
        }
        
        function initializeFocusEffects() {
            // Add focus effects to focusable elements
            const focusElements = document.querySelectorAll('button, input, select, .risk-badge, .heat-map-item, .action-card');
            
            focusElements.forEach(element => {
                element.classList.add('focus-glow', 'focus-scale');
            });
        }
        
        function initializeLoadingAnimations() {
            // Add loading animations to elements that might load data
            const loadingElements = document.querySelectorAll('.progress-fill, .radar-chart, .history-chart-svg');
            
            loadingElements.forEach(element => {
                element.classList.add('loading-shimmer');
                
                // Remove loading animation when content is loaded
                setTimeout(() => {
                    element.classList.remove('loading-shimmer');
                }, 2000);
            });
        }
        
        function initializeScrollAnimations() {
            // Initialize intersection observer for scroll-triggered animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const element = entry.target;
                        const animation = element.dataset.animation || 'fade-in';
                        const delay = element.dataset.delay || 0;
                        
                        setTimeout(() => {
                            element.classList.add(animation);
                            element.classList.add('gpu-accelerated');
                        }, delay);
                        
                        observer.unobserve(element);
                    }
                });
            }, observerOptions);
            
            // Observe elements for scroll animations
            const scrollElements = document.querySelectorAll('.card, .container, .section');
            scrollElements.forEach(element => {
                observer.observe(element);
            });
        }
        
        function initializeInteractionAnimations() {
            // Add interaction animations to buttons and controls
            const buttons = document.querySelectorAll('.btn, .control-button, .action-card');
            
            buttons.forEach(button => {
                button.addEventListener('click', (e) => {
                    // Add click animation
                    button.classList.add('bounce-in');
                    
                    setTimeout(() => {
                        button.classList.remove('bounce-in');
                    }, 600);
                });
            });
            
            // Add form interaction animations
            const formInputs = document.querySelectorAll('.form-input, .form-select');
            
            formInputs.forEach(input => {
                input.addEventListener('focus', () => {
                    input.classList.add('focus-glow');
                });
                
                input.addEventListener('blur', () => {
                    input.classList.remove('focus-glow');
                });
            });
        }
        
        function animateElement(element, animation, duration = 1000) {
            return new Promise((resolve) => {
                element.classList.add(animation);
                element.classList.add('gpu-accelerated');
                
                setTimeout(() => {
                    element.classList.remove(animation);
                    resolve();
                }, duration);
            });
        }
        
        function staggerAnimation(elements, animation, staggerDelay = 100) {
            elements.forEach((element, index) => {
                setTimeout(() => {
                    animateElement(element, animation);
                }, index * staggerDelay);
            });
        }
        
        function createPulseEffect(element, duration = 2000) {
            element.classList.add('pulse');
            
            setTimeout(() => {
                element.classList.remove('pulse');
            }, duration);
        }
        
        function createShakeEffect(element) {
            element.classList.add('shake');
            
            setTimeout(() => {
                element.classList.remove('shake');
            }, 500);
        }
        
        function createGlowEffect(element, duration = 3000) {
            element.classList.add('glow');
            
            setTimeout(() => {
                element.classList.remove('glow');
            }, duration);
        }
        
        // Initialize tooltips, accessibility features, mobile responsive features, and animation effects when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeTooltips();
            initializeAccessibilityFeatures();
            initializeMobileResponsiveFeatures();
            initializeAnimationEffects();
            optimizeForDevice();
        });
    </script>
</body>
</html>
