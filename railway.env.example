# Railway Deployment Environment Configuration
# Copy this file to .env and fill in your actual values

# Application Environment
ENV=production

# Server Configuration
PORT=8080
HOST=0.0.0.0
READ_TIMEOUT=60s
WRITE_TIMEOUT=60s
IDLE_TIMEOUT=60s

# CORS Configuration
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER=100
RATE_LIMIT_WINDOW_SIZE=60
RATE_LIMIT_BURST_SIZE=200

# Supabase Configuration
# Get these values from your Supabase project settings
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_API_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
SUPABASE_JWT_SECRET=your_supabase_jwt_secret

# Database Configuration (Railway provides DATABASE_URL automatically)
# DATABASE_URL is automatically provided by Railway
DB_DRIVER=postgres
DB_SSL_MODE=require
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m
DB_AUTO_MIGRATE=true

# Authentication Configuration
JWT_SECRET=your_jwt_secret_here_make_it_long_and_random
JWT_EXPIRATION=24h
REFRESH_EXPIRATION=168h
MIN_PASSWORD_LENGTH=8
REQUIRE_UPPERCASE=true
REQUIRE_LOWERCASE=true
REQUIRE_NUMBERS=true
REQUIRE_SPECIAL=true
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=15m

# Observability Configuration
LOG_LEVEL=info
LOG_FORMAT=json
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
TRACING_ENABLED=true
TRACING_URL=http://localhost:14268/api/traces
HEALTH_CHECK_PATH=/health

# Feature Flags
FEATURE_BUSINESS_CLASSIFICATION=true
FEATURE_RISK_ASSESSMENT=true
FEATURE_COMPLIANCE_FRAMEWORK=true
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_REAL_TIME_MONITORING=false
FEATURE_BATCH_PROCESSING=false
FEATURE_API_KEY_MANAGEMENT=true
FEATURE_WEBHOOK_SUPPORT=false
FEATURE_EXPORT_FUNCTIONALITY=false

# Classification Cache Configuration
CLASSIFICATION_CACHE_ENABLED=true
CLASSIFICATION_CACHE_TTL=10m
CLASSIFICATION_CACHE_MAX_ENTRIES=10000
CLASSIFICATION_CACHE_JANITOR_INTERVAL=1m

# Security Configuration
IP_BLOCK_ENABLED=true
IP_BLOCK_THRESHOLD=20
IP_BLOCK_WINDOW=5m
IP_BLOCK_DURATION=30m
IP_BLOCK_WHITELIST=
IP_BLOCK_BLACKLIST=

# External HTTP client pooling
EXT_HTTP_MAX_IDLE_CONNS=256
EXT_HTTP_MAX_IDLE_CONNS_PER_HOST=64
EXT_HTTP_IDLE_CONN_TIMEOUT=90s
EXT_HTTP_TLS_HANDSHAKE_TIMEOUT=10s
EXT_HTTP_EXPECT_CONTINUE_TIMEOUT=1s
EXT_HTTP_REQUEST_TIMEOUT=30s

# Scraping Service Configuration
# hrequests-scraper service URL (fast, lightweight scraping)
# Optional: If not set, hrequests strategy will be disabled
HREQUESTS_SERVICE_URL=http://hrequests-scraper:8080

# Playwright-scraper service URL (fallback for JS-heavy sites)
# Optional: If not set, Playwright strategy will be disabled
PLAYWRIGHT_SERVICE_URL=http://playwright-scraper:3000
