<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KYB Platform - Business Growth Analytics</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="components/navigation.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease-in-out;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        /* Growth Analytics Specific Styles */
        .growth-trend-up {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        .growth-trend-down {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        .growth-trend-stable {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
        }
        
        .opportunity-high {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }
        .opportunity-medium {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        .opportunity-low {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
        }
        
        .performance-excellent {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        .performance-good {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }
        .performance-average {
            background: linear-gradient(135deg, #eab308, #ca8a04);
            color: white;
        }
        .performance-below-average {
            background: linear-gradient(135deg, #f97316, #ea580c);
            color: white;
        }
        .performance-poor {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        .skeleton-loading {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .progressive-disclosure {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease-in-out;
        }
        .progressive-disclosure.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .trend-indicator {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .growth-chart {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 12px;
            padding: 20px;
        }
        
        .opportunity-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #3b82f6;
            transition: all 0.3s ease;
        }
        
        .opportunity-card:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .strategy-recommendation {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .strategy-recommendation:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .kpi-metric {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .kpi-metric:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .kpi-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .kpi-label {
            font-size: 0.875rem;
            color: #6b7280;
            font-weight: 500;
        }
        
        .kpi-change {
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 4px;
        }
        
        .kpi-change.positive {
            color: #10b981;
        }
        
        .kpi-change.negative {
            color: #ef4444;
        }
        
        .kpi-change.neutral {
            color: #6b7280;
        }
        
        .filter-button {
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-button:hover {
            background: #f9fafb;
            border-color: #9ca3af;
        }
        
        .filter-button.active {
            background: #3b82f6;
            border-color: #3b82f6;
            color: white;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
        }
        
        .modal-header {
            padding: 24px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .close {
            color: #9ca3af;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .close:hover {
            color: #374151;
        }
        
        @media (max-width: 768px) {
            .chart-container {
                height: 250px;
            }
            
            .kpi-value {
                font-size: 2rem;
            }
            
            .metric-card {
                padding: 16px;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="gradient-bg shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-white text-xl font-bold">KYB Platform</h1>
                    </div>
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        <a href="dashboard.html" class="text-gray-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Dashboard</a>
                        <a href="risk-dashboard.html" class="text-gray-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Risk Assessment</a>
                        <a href="market-analysis-dashboard.html" class="text-gray-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Market Analysis</a>
                        <a href="competitive-analysis-dashboard.html" class="text-gray-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Competitive Analysis</a>
                        <a href="#" class="text-white bg-white bg-opacity-20 px-3 py-2 rounded-md text-sm font-medium">Growth Analytics</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <!-- Page Header -->
        <div class="px-4 py-6 sm:px-0">
            <div class="progressive-disclosure">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">Business Growth Analytics</h1>
                <p class="text-gray-600">Comprehensive growth analysis, projections, and strategic recommendations</p>
            </div>
        </div>

        <!-- Growth Trend Analysis Section -->
        <div class="px-4 py-6 sm:px-0">
            <div class="progressive-disclosure">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">
                        <i class="fas fa-chart-line text-blue-600 mr-2"></i>
                        Growth Trend Analysis
                    </h2>
                    
                    <!-- Growth KPIs -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="kpi-metric card-hover">
                            <div class="kpi-value text-blue-600" id="revenue-growth">+12.5%</div>
                            <div class="kpi-label">Revenue Growth</div>
                            <div class="kpi-change positive">
                                <i class="fas fa-arrow-up mr-1"></i>+2.3% vs last quarter
                            </div>
                        </div>
                        <div class="kpi-metric card-hover">
                            <div class="kpi-value text-green-600" id="customer-growth">+18.2%</div>
                            <div class="kpi-label">Customer Growth</div>
                            <div class="kpi-change positive">
                                <i class="fas fa-arrow-up mr-1"></i>+4.1% vs last quarter
                            </div>
                        </div>
                        <div class="kpi-metric card-hover">
                            <div class="kpi-value text-purple-600" id="market-share">8.3%</div>
                            <div class="kpi-label">Market Share</div>
                            <div class="kpi-change positive">
                                <i class="fas fa-arrow-up mr-1"></i>+0.8% vs last quarter
                            </div>
                        </div>
                        <div class="kpi-metric card-hover">
                            <div class="kpi-value text-orange-600" id="growth-velocity">High</div>
                            <div class="kpi-label">Growth Velocity</div>
                            <div class="kpi-change positive">
                                <i class="fas fa-arrow-up mr-1"></i>Accelerating
                            </div>
                        </div>
                    </div>

                    <!-- Growth Trend Chart -->
                    <div class="growth-chart card-hover">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">Revenue Growth Trend</h3>
                            <div class="flex space-x-2">
                                <button class="filter-button active" data-period="12m">12 Months</button>
                                <button class="filter-button" data-period="6m">6 Months</button>
                                <button class="filter-button" data-period="3m">3 Months</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="growthTrendChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Growth Projection Charts Section -->
        <div class="px-4 py-6 sm:px-0">
            <div class="progressive-disclosure">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">
                        <i class="fas fa-project-diagram text-green-600 mr-2"></i>
                        Growth Projections
                    </h2>
                    
                    <!-- Projection Controls -->
                    <div class="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Projection Model:</label>
                                <select id="projectionModel" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="linear">Linear Growth</option>
                                    <option value="exponential">Exponential Growth</option>
                                    <option value="logistic">Logistic Growth</option>
                                    <option value="seasonal">Seasonal Adjusted</option>
                                </select>
                            </div>
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Confidence Level:</label>
                                <select id="confidenceLevel" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="80">80%</option>
                                    <option value="90">90%</option>
                                    <option value="95" selected>95%</option>
                                </select>
                            </div>
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Time Horizon:</label>
                                <select id="timeHorizon" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="6m">6 Months</option>
                                    <option value="12m" selected>12 Months</option>
                                    <option value="24m">24 Months</option>
                                    <option value="36m">36 Months</option>
                                </select>
                            </div>
                            <button id="updateProjections" class="bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors">
                                <i class="fas fa-sync-alt mr-2"></i>Update Projections
                            </button>
                        </div>
                    </div>

                    <!-- Projection Summary Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="metric-card card-hover">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-lg font-semibold text-gray-900">Revenue Forecast</h3>
                                <span class="trend-indicator performance-excellent">High Confidence</span>
                            </div>
                            <div class="text-3xl font-bold text-green-600 mb-2" id="revenueForecast">$10.2M</div>
                            <div class="text-sm text-gray-600 mb-2">Next 12 months</div>
                            <div class="flex items-center text-sm">
                                <i class="fas fa-arrow-up text-green-500 mr-1"></i>
                                <span class="text-green-600 font-medium">+15.2% growth rate</span>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-lg font-semibold text-gray-900">Customer Forecast</h3>
                                <span class="trend-indicator performance-good">Medium Confidence</span>
                            </div>
                            <div class="text-3xl font-bold text-blue-600 mb-2" id="customerForecast">5,800</div>
                            <div class="text-sm text-gray-600 mb-2">Next 12 months</div>
                            <div class="flex items-center text-sm">
                                <i class="fas fa-arrow-up text-green-500 mr-1"></i>
                                <span class="text-green-600 font-medium">+18.2% growth rate</span>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-lg font-semibold text-gray-900">Market Share Forecast</h3>
                                <span class="trend-indicator performance-average">Medium Confidence</span>
                            </div>
                            <div class="text-3xl font-bold text-purple-600 mb-2" id="marketShareForecast">12.5%</div>
                            <div class="text-sm text-gray-600 mb-2">Next 12 months</div>
                            <div class="flex items-center text-sm">
                                <i class="fas fa-arrow-up text-green-500 mr-1"></i>
                                <span class="text-green-600 font-medium">+4.2% growth rate</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Enhanced Revenue Projection -->
                        <div class="metric-card card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-900">Revenue Projection with Confidence Intervals</h3>
                                <div class="flex space-x-2">
                                    <button class="filter-button active" data-chart="revenue" data-period="12m">12M</button>
                                    <button class="filter-button" data-chart="revenue" data-period="24m">24M</button>
                                    <button class="filter-button" data-chart="revenue" data-period="36m">36M</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="revenueProjectionChart"></canvas>
                            </div>
                            <div class="mt-4 grid grid-cols-3 gap-4">
                                <div class="text-center p-3 bg-green-50 rounded-lg">
                                    <div class="text-xl font-bold text-green-600">$2.4M</div>
                                    <div class="text-xs text-gray-600">Q1 2025</div>
                                </div>
                                <div class="text-center p-3 bg-blue-50 rounded-lg">
                                    <div class="text-xl font-bold text-blue-600">$8.1M</div>
                                    <div class="text-xs text-gray-600">Q4 2025</div>
                                </div>
                                <div class="text-center p-3 bg-purple-50 rounded-lg">
                                    <div class="text-xl font-bold text-purple-600">$15.2M</div>
                                    <div class="text-xs text-gray-600">Q4 2026</div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Customer Growth Projection -->
                        <div class="metric-card card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-900">Customer Growth Projection with Scenarios</h3>
                                <div class="flex space-x-2">
                                    <button class="filter-button active" data-chart="customer" data-scenario="optimistic">Optimistic</button>
                                    <button class="filter-button" data-chart="customer" data-scenario="realistic">Realistic</button>
                                    <button class="filter-button" data-chart="customer" data-scenario="pessimistic">Pessimistic</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="customerProjectionChart"></canvas>
                            </div>
                            <div class="mt-4 grid grid-cols-3 gap-4">
                                <div class="text-center p-3 bg-green-50 rounded-lg">
                                    <div class="text-xl font-bold text-green-600">1,250</div>
                                    <div class="text-xs text-gray-600">Q1 2025</div>
                                </div>
                                <div class="text-center p-3 bg-blue-50 rounded-lg">
                                    <div class="text-xl font-bold text-blue-600">5,800</div>
                                    <div class="text-xs text-gray-600">Q4 2025</div>
                                </div>
                                <div class="text-center p-3 bg-purple-50 rounded-lg">
                                    <div class="text-xl font-bold text-purple-600">12,500</div>
                                    <div class="text-xs text-gray-600">Q4 2026</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced Projection Analytics -->
                    <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Growth Rate Analysis -->
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Growth Rate Analysis</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Current Rate</span>
                                    <span class="font-semibold text-green-600">15.2%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Projected Rate</span>
                                    <span class="font-semibold text-blue-600">18.5%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Peak Rate</span>
                                    <span class="font-semibold text-purple-600">22.1%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full" style="width: 75%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Seasonality Analysis -->
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Seasonality Impact</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Q1 (Winter)</span>
                                    <span class="font-semibold text-blue-600">+5%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Q2 (Spring)</span>
                                    <span class="font-semibold text-green-600">+12%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Q3 (Summer)</span>
                                    <span class="font-semibold text-yellow-600">+8%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Q4 (Fall)</span>
                                    <span class="font-semibold text-orange-600">+15%</span>
                                </div>
                            </div>
                        </div>

                        <!-- Risk Factors -->
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Projection Risk Factors</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Market Volatility</span>
                                    <span class="trend-indicator performance-average">Medium</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Competition</span>
                                    <span class="trend-indicator performance-good">Low</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Economic Factors</span>
                                    <span class="trend-indicator performance-average">Medium</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Technology Changes</span>
                                    <span class="trend-indicator performance-excellent">Low</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Growth Opportunity Identification Section -->
        <div class="px-4 py-6 sm:px-0">
            <div class="progressive-disclosure">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">
                        <i class="fas fa-lightbulb text-yellow-600 mr-2"></i>
                        Growth Opportunity Identification
                    </h2>
                    
                    <!-- Opportunity Analysis Controls -->
                    <div class="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Filter by Priority:</label>
                                <select id="opportunityPriority" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="all">All Opportunities</option>
                                    <option value="high">High Priority</option>
                                    <option value="medium">Medium Priority</option>
                                    <option value="low">Low Priority</option>
                                </select>
                            </div>
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Sort by:</label>
                                <select id="opportunitySort" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="impact">Potential Impact</option>
                                    <option value="priority">Priority Level</option>
                                    <option value="effort">Implementation Effort</option>
                                    <option value="timeline">Timeline</option>
                                </select>
                            </div>
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Time Horizon:</label>
                                <select id="opportunityTimeline" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="all">All Timeframes</option>
                                    <option value="short">Short-term (0-6 months)</option>
                                    <option value="medium">Medium-term (6-18 months)</option>
                                    <option value="long">Long-term (18+ months)</option>
                                </select>
                            </div>
                            <button id="analyzeOpportunities" class="bg-yellow-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-yellow-700 transition-colors">
                                <i class="fas fa-search mr-2"></i>Analyze Opportunities
                            </button>
                        </div>
                    </div>

                    <!-- Opportunity Analysis Summary -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-600 mb-2" id="totalOpportunities">12</div>
                                <div class="text-sm text-gray-600">Total Opportunities</div>
                                <div class="text-xs text-green-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>+3 this quarter
                                </div>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-600 mb-2" id="highPriorityOpportunities">4</div>
                                <div class="text-sm text-gray-600">High Priority</div>
                                <div class="text-xs text-blue-600 mt-1">
                                    <i class="fas fa-star mr-1"></i>33% of total
                                </div>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-purple-600 mb-2" id="totalPotentialImpact">$7.1M</div>
                                <div class="text-sm text-gray-600">Total Potential Impact</div>
                                <div class="text-xs text-green-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>+15% vs last analysis
                                </div>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-orange-600 mb-2" id="avgImplementationTime">8.5</div>
                                <div class="text-sm text-gray-600">Avg Implementation (months)</div>
                                <div class="text-xs text-blue-600 mt-1">
                                    <i class="fas fa-clock mr-1"></i>Range: 3-24 months
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Opportunity Heat Map -->
                    <div class="mb-8">
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Opportunity Impact vs Effort Matrix</h3>
                            <div class="chart-container">
                                <canvas id="opportunityMatrixChart"></canvas>
                            </div>
                            <div class="mt-4 grid grid-cols-4 gap-4 text-center">
                                <div class="p-3 bg-green-50 rounded-lg">
                                    <div class="text-sm font-semibold text-green-800">Quick Wins</div>
                                    <div class="text-xs text-green-600">High Impact, Low Effort</div>
                                </div>
                                <div class="p-3 bg-blue-50 rounded-lg">
                                    <div class="text-sm font-semibold text-blue-800">Major Projects</div>
                                    <div class="text-xs text-blue-600">High Impact, High Effort</div>
                                </div>
                                <div class="p-3 bg-yellow-50 rounded-lg">
                                    <div class="text-sm font-semibold text-yellow-800">Fill-ins</div>
                                    <div class="text-xs text-yellow-600">Low Impact, Low Effort</div>
                                </div>
                                <div class="p-3 bg-red-50 rounded-lg">
                                    <div class="text-sm font-semibold text-red-800">Questionable</div>
                                    <div class="text-xs text-red-600">Low Impact, High Effort</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Enhanced Opportunity Cards -->
                    <div id="opportunitiesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="opportunity-card card-hover" data-priority="high" data-impact="2100000" data-effort="6" data-timeline="medium">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-900">Market Expansion</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator opportunity-high">High</span>
                                    <div class="w-3 h-3 bg-green-500 rounded-full" title="High Impact, Medium Effort"></div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Expand into adjacent markets with 25% growth potential and established demand</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Potential Impact:</span>
                                    <span class="font-semibold text-green-600">+$2.1M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Implementation Effort:</span>
                                    <span class="font-semibold text-blue-600">6 months</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">85%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Required Investment:</span>
                                    <span class="font-semibold text-orange-600">$500K</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex space-x-2">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">Market Growth</span>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Revenue</span>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openOpportunityModal('market-expansion')">
                                    View Details <i class="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                        </div>

                        <div class="opportunity-card card-hover" data-priority="high" data-impact="1800000" data-effort="9" data-timeline="medium">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-900">Product Innovation</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator opportunity-high">High</span>
                                    <div class="w-3 h-3 bg-blue-500 rounded-full" title="High Impact, High Effort"></div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Develop new product features to increase customer retention and attract new segments</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Potential Impact:</span>
                                    <span class="font-semibold text-green-600">+$1.8M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Implementation Effort:</span>
                                    <span class="font-semibold text-blue-600">9 months</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">78%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Required Investment:</span>
                                    <span class="font-semibold text-orange-600">$750K</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex space-x-2">
                                    <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full">Innovation</span>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Retention</span>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openOpportunityModal('product-innovation')">
                                    View Details <i class="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                        </div>

                        <div class="opportunity-card card-hover" data-priority="medium" data-impact="1200000" data-effort="4" data-timeline="short">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-900">Partnership Growth</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator opportunity-medium">Medium</span>
                                    <div class="w-3 h-3 bg-green-500 rounded-full" title="Medium Impact, Low Effort"></div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Strategic partnerships to accelerate market penetration and reduce customer acquisition costs</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Potential Impact:</span>
                                    <span class="font-semibold text-green-600">+$1.2M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Implementation Effort:</span>
                                    <span class="font-semibold text-blue-600">4 months</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">72%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Required Investment:</span>
                                    <span class="font-semibold text-orange-600">$200K</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex space-x-2">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">Partnerships</span>
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">Quick Win</span>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openOpportunityModal('partnership-growth')">
                                    View Details <i class="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                        </div>

                        <div class="opportunity-card card-hover" data-priority="medium" data-impact="900000" data-effort="8" data-timeline="medium">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-900">Digital Transformation</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator opportunity-medium">Medium</span>
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full" title="Medium Impact, Medium Effort"></div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Automation and digital tools to improve efficiency and reduce operational costs</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Potential Impact:</span>
                                    <span class="font-semibold text-green-600">+$0.9M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Implementation Effort:</span>
                                    <span class="font-semibold text-blue-600">8 months</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">80%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Required Investment:</span>
                                    <span class="font-semibold text-orange-600">$400K</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex space-x-2">
                                    <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full">Technology</span>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">Efficiency</span>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openOpportunityModal('digital-transformation')">
                                    View Details <i class="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                        </div>

                        <div class="opportunity-card card-hover" data-priority="medium" data-impact="700000" data-effort="3" data-timeline="short">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-900">Customer Retention</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator opportunity-medium">Medium</span>
                                    <div class="w-3 h-3 bg-green-500 rounded-full" title="Medium Impact, Low Effort"></div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Improve customer satisfaction and reduce churn through enhanced support and engagement</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Potential Impact:</span>
                                    <span class="font-semibold text-green-600">+$0.7M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Implementation Effort:</span>
                                    <span class="font-semibold text-blue-600">3 months</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">88%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Required Investment:</span>
                                    <span class="font-semibold text-orange-600">$150K</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex space-x-2">
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Retention</span>
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">Quick Win</span>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openOpportunityModal('customer-retention')">
                                    View Details <i class="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                        </div>

                        <div class="opportunity-card card-hover" data-priority="low" data-impact="400000" data-effort="12" data-timeline="long">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-900">Operational Efficiency</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator opportunity-low">Low</span>
                                    <div class="w-3 h-3 bg-red-500 rounded-full" title="Low Impact, High Effort"></div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Streamline operations to reduce costs and improve margins through process optimization</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Potential Impact:</span>
                                    <span class="font-semibold text-green-600">+$0.4M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Implementation Effort:</span>
                                    <span class="font-semibold text-blue-600">12 months</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">65%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">Required Investment:</span>
                                    <span class="font-semibold text-orange-600">$300K</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex space-x-2">
                                    <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full">Operations</span>
                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full">Long-term</span>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openOpportunityModal('operational-efficiency')">
                                    View Details <i class="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Growth Strategy Recommendations Section -->
        <div class="px-4 py-6 sm:px-0">
            <div class="progressive-disclosure">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">
                        <i class="fas fa-chess text-purple-600 mr-2"></i>
                        Strategic Growth Recommendations
                    </h2>
                    
                    <!-- Strategy Analysis Controls -->
                    <div class="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Strategy Focus:</label>
                                <select id="strategyFocus" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="all">All Strategies</option>
                                    <option value="revenue">Revenue Growth</option>
                                    <option value="market">Market Expansion</option>
                                    <option value="efficiency">Operational Efficiency</option>
                                    <option value="innovation">Product Innovation</option>
                                </select>
                            </div>
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Time Horizon:</label>
                                <select id="strategyTimeline" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="all">All Timeframes</option>
                                    <option value="short">Short-term (0-6 months)</option>
                                    <option value="medium">Medium-term (6-18 months)</option>
                                    <option value="long">Long-term (18+ months)</option>
                                </select>
                            </div>
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Investment Level:</label>
                                <select id="strategyInvestment" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="all">All Investment Levels</option>
                                    <option value="low">Low ($0-250K)</option>
                                    <option value="medium">Medium ($250K-750K)</option>
                                    <option value="high">High ($750K+)</option>
                                </select>
                            </div>
                            <button id="generateStrategy" class="bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-700 transition-colors">
                                <i class="fas fa-magic mr-2"></i>Generate Strategy
                            </button>
                        </div>
                    </div>

                    <!-- Strategy Performance Overview -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-purple-600 mb-2" id="totalStrategies">8</div>
                                <div class="text-sm text-gray-600">Active Strategies</div>
                                <div class="text-xs text-green-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>+2 this quarter
                                </div>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-600 mb-2" id="strategyROI">285%</div>
                                <div class="text-sm text-gray-600">Average ROI</div>
                                <div class="text-xs text-blue-600 mt-1">
                                    <i class="fas fa-chart-line mr-1"></i>Above industry avg
                                </div>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-600 mb-2" id="strategySuccess">87%</div>
                                <div class="text-sm text-gray-600">Success Rate</div>
                                <div class="text-xs text-green-600 mt-1">
                                    <i class="fas fa-check-circle mr-1"></i>+5% vs last year
                                </div>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-orange-600 mb-2" id="strategyImpact">$11.7M</div>
                                <div class="text-sm text-gray-600">Total Impact</div>
                                <div class="text-xs text-green-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>+18% vs target
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Strategy Roadmap Timeline -->
                    <div class="mb-8">
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Strategic Implementation Roadmap</h3>
                            <div class="chart-container">
                                <canvas id="strategyRoadmapChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Enhanced Strategy Recommendations -->
                    <div id="strategiesContainer" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Short-term Strategy -->
                        <div class="strategy-recommendation card-hover" data-focus="revenue" data-timeline="short" data-investment="medium">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-900">Quick Wins Strategy</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator performance-excellent">Priority 1</span>
                                    <div class="w-3 h-3 bg-green-500 rounded-full" title="High Impact, Low Risk"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Timeline:</span>
                                    <span class="font-semibold text-blue-600">3-6 months</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Investment:</span>
                                    <span class="font-semibold text-orange-600">$450K</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Expected ROI:</span>
                                    <span class="font-semibold text-green-600">320%</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">92%</span>
                                </div>
                            </div>
                            <ul class="space-y-3 mb-4">
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Launch market expansion initiative in Q2</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Implement customer retention program</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Optimize digital marketing channels</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Establish strategic partnerships</span>
                                </li>
                            </ul>
                            <div class="space-y-2">
                                <div class="p-3 bg-blue-50 rounded-lg">
                                    <p class="text-sm text-blue-800">
                                        <strong>Expected Impact:</strong> +$3.2M revenue increase within 6 months
                                    </p>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex space-x-2">
                                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Quick Win</span>
                                        <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">Revenue</span>
                                    </div>
                                    <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openStrategyModal('quick-wins')">
                                        View Details <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Medium-term Strategy -->
                        <div class="strategy-recommendation card-hover" data-focus="innovation" data-timeline="medium" data-investment="high">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-900">Innovation & Growth Strategy</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator performance-good">Priority 2</span>
                                    <div class="w-3 h-3 bg-blue-500 rounded-full" title="High Impact, Medium Risk"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Timeline:</span>
                                    <span class="font-semibold text-blue-600">6-18 months</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Investment:</span>
                                    <span class="font-semibold text-orange-600">$1.2M</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Expected ROI:</span>
                                    <span class="font-semibold text-green-600">275%</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">78%</span>
                                </div>
                            </div>
                            <ul class="space-y-3 mb-4">
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Develop new product line for emerging markets</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Implement AI-driven customer insights</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Expand international presence</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Build scalable operational infrastructure</span>
                                </li>
                            </ul>
                            <div class="space-y-2">
                                <div class="p-3 bg-green-50 rounded-lg">
                                    <p class="text-sm text-green-800">
                                        <strong>Expected Impact:</strong> +$8.5M revenue increase within 18 months
                                    </p>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex space-x-2">
                                        <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full">Innovation</span>
                                        <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">Growth</span>
                                    </div>
                                    <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openStrategyModal('innovation-growth')">
                                        View Details <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Long-term Strategy -->
                        <div class="strategy-recommendation card-hover" data-focus="market" data-timeline="long" data-investment="high">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-900">Market Leadership Strategy</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator performance-average">Priority 3</span>
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full" title="High Impact, High Risk"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Timeline:</span>
                                    <span class="font-semibold text-blue-600">18-36 months</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Investment:</span>
                                    <span class="font-semibold text-orange-600">$2.5M</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Expected ROI:</span>
                                    <span class="font-semibold text-green-600">240%</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">65%</span>
                                </div>
                            </div>
                            <ul class="space-y-3 mb-4">
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Acquire complementary businesses</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Establish market dominance in key segments</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Build ecosystem partnerships</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Develop next-generation platform</span>
                                </li>
                            </ul>
                            <div class="space-y-2">
                                <div class="p-3 bg-purple-50 rounded-lg">
                                    <p class="text-sm text-purple-800">
                                        <strong>Expected Impact:</strong> +$15.2M revenue increase within 36 months
                                    </p>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex space-x-2">
                                        <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full">Leadership</span>
                                        <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">Long-term</span>
                                    </div>
                                    <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openStrategyModal('market-leadership')">
                                        View Details <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Efficiency Strategy -->
                        <div class="strategy-recommendation card-hover" data-focus="efficiency" data-timeline="medium" data-investment="low">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-900">Operational Excellence Strategy</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="trend-indicator performance-good">Priority 2</span>
                                    <div class="w-3 h-3 bg-green-500 rounded-full" title="Medium Impact, Low Risk"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Timeline:</span>
                                    <span class="font-semibold text-blue-600">6-12 months</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Investment:</span>
                                    <span class="font-semibold text-orange-600">$300K</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Expected ROI:</span>
                                    <span class="font-semibold text-green-600">180%</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">Success Probability:</span>
                                    <span class="font-semibold text-purple-600">85%</span>
                                </div>
                            </div>
                            <ul class="space-y-3 mb-4">
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Automate core business processes</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Implement advanced analytics</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Optimize supply chain operations</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                                    <span class="text-gray-700">Enhance customer service efficiency</span>
                                </li>
                            </ul>
                            <div class="space-y-2">
                                <div class="p-3 bg-orange-50 rounded-lg">
                                    <p class="text-sm text-orange-800">
                                        <strong>Expected Impact:</strong> +$2.1M cost savings and efficiency gains
                                    </p>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex space-x-2">
                                        <span class="px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full">Efficiency</span>
                                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Cost Savings</span>
                                    </div>
                                    <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="openStrategyModal('operational-excellence')">
                                        View Details <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Growth Performance Metrics Section -->
        <div class="px-4 py-6 sm:px-0">
            <div class="progressive-disclosure">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">
                        <i class="fas fa-chart-line text-purple-600 mr-2"></i>
                        Growth Performance Metrics & Benchmarking
                    </h2>
                    
                    <!-- Performance Analysis Controls -->
                    <div class="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Time Period:</label>
                                <select id="performancePeriod" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="quarterly">Quarterly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly">Yearly</option>
                                    <option value="ytd">Year-to-Date</option>
                                </select>
                            </div>
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Benchmark:</label>
                                <select id="performanceBenchmark" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="industry">Industry Average</option>
                                    <option value="competitors">Top Competitors</option>
                                    <option value="historical">Historical Performance</option>
                                    <option value="targets">Target Goals</option>
                                </select>
                            </div>
                            <div class="flex items-center space-x-4">
                                <label class="text-sm font-medium text-gray-700">Metric Focus:</label>
                                <select id="performanceFocus" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="all">All Metrics</option>
                                    <option value="revenue">Revenue Growth</option>
                                    <option value="customer">Customer Metrics</option>
                                    <option value="operational">Operational Efficiency</option>
                                    <option value="market">Market Position</option>
                                </select>
                            </div>
                            <button id="refreshPerformance" class="bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-700 transition-colors">
                                <i class="fas fa-sync-alt mr-2"></i>Refresh Metrics
                            </button>
                        </div>
                    </div>

                    <!-- Key Performance Indicators -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-600 mb-2" id="revenueGrowthRate">+24.5%</div>
                                <div class="text-sm text-gray-600">Revenue Growth Rate</div>
                                <div class="text-xs text-green-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>+3.2% vs industry avg
                                </div>
                                <div class="mt-2">
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-green-600 h-2 rounded-full" style="width: 85%"></div>
                                    </div>
                                    <div class="text-xs text-gray-500 mt-1">85% of target</div>
                                </div>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-600 mb-2" id="customerGrowthRate">+18.2%</div>
                                <div class="text-sm text-gray-600">Customer Growth Rate</div>
                                <div class="text-xs text-blue-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>+5.1% vs competitors
                                </div>
                                <div class="mt-2">
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: 92%"></div>
                                    </div>
                                    <div class="text-xs text-gray-500 mt-1">92% of target</div>
                                </div>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-purple-600 mb-2" id="marketShareGrowth">+12.8%</div>
                                <div class="text-sm text-gray-600">Market Share Growth</div>
                                <div class="text-xs text-purple-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>+2.7% vs last year
                                </div>
                                <div class="mt-2">
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-purple-600 h-2 rounded-full" style="width: 78%"></div>
                                    </div>
                                    <div class="text-xs text-gray-500 mt-1">78% of target</div>
                                </div>
                            </div>
                        </div>
                        <div class="metric-card card-hover">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-orange-600 mb-2" id="operationalEfficiency">+15.3%</div>
                                <div class="text-sm text-gray-600">Operational Efficiency</div>
                                <div class="text-xs text-orange-600 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>+4.2% vs baseline
                                </div>
                                <div class="mt-2">
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-orange-600 h-2 rounded-full" style="width: 88%"></div>
                                    </div>
                                    <div class="text-xs text-gray-500 mt-1">88% of target</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Trends Chart -->
                    <div class="mb-8">
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Performance Trends & Benchmarking</h3>
                            <div class="chart-container">
                                <canvas id="performanceTrendsChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Scorecard -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <!-- Growth Scorecard -->
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Growth Performance Scorecard</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                                    <div class="flex items-center">
                                        <i class="fas fa-chart-line text-green-600 mr-3"></i>
                                        <span class="text-gray-700">Revenue Growth</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-green-600">A+</div>
                                        <div class="text-xs text-green-600">Exceeds Target</div>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                                    <div class="flex items-center">
                                        <i class="fas fa-users text-blue-600 mr-3"></i>
                                        <span class="text-gray-700">Customer Acquisition</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-blue-600">A</div>
                                        <div class="text-xs text-blue-600">Meets Target</div>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                                    <div class="flex items-center">
                                        <i class="fas fa-globe text-purple-600 mr-3"></i>
                                        <span class="text-gray-700">Market Expansion</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-purple-600">B+</div>
                                        <div class="text-xs text-purple-600">Above Average</div>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-orange-50 rounded-lg">
                                    <div class="flex items-center">
                                        <i class="fas fa-cogs text-orange-600 mr-3"></i>
                                        <span class="text-gray-700">Operational Excellence</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-orange-600">A-</div>
                                        <div class="text-xs text-orange-600">Strong Performance</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Benchmark Comparison -->
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Industry Benchmark Comparison</h3>
                            <div class="space-y-4">
                                <div class="p-3 bg-gray-50 rounded-lg">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm font-medium text-gray-700">Revenue Growth</span>
                                        <span class="text-sm font-bold text-green-600">+24.5%</span>
                                    </div>
                                    <div class="flex justify-between text-xs text-gray-500">
                                        <span>Industry Avg: +21.3%</span>
                                        <span class="text-green-600">+3.2% above</span>
                                    </div>
                                </div>
                                <div class="p-3 bg-gray-50 rounded-lg">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm font-medium text-gray-700">Customer Growth</span>
                                        <span class="text-sm font-bold text-blue-600">+18.2%</span>
                                    </div>
                                    <div class="flex justify-between text-xs text-gray-500">
                                        <span>Industry Avg: +13.1%</span>
                                        <span class="text-green-600">+5.1% above</span>
                                    </div>
                                </div>
                                <div class="p-3 bg-gray-50 rounded-lg">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm font-medium text-gray-700">Market Share</span>
                                        <span class="text-sm font-bold text-purple-600">+12.8%</span>
                                    </div>
                                    <div class="flex justify-between text-xs text-gray-500">
                                        <span>Industry Avg: +8.4%</span>
                                        <span class="text-green-600">+4.4% above</span>
                                    </div>
                                </div>
                                <div class="p-3 bg-gray-50 rounded-lg">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm font-medium text-gray-700">Efficiency Score</span>
                                        <span class="text-sm font-bold text-orange-600">+15.3%</span>
                                    </div>
                                    <div class="flex justify-between text-xs text-gray-500">
                                        <span>Industry Avg: +11.2%</span>
                                        <span class="text-green-600">+4.1% above</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced Performance Analytics -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                        <!-- Performance Distribution -->
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Performance Distribution</h3>
                            <div class="chart-container">
                                <canvas id="performanceDistributionChart"></canvas>
                            </div>
                        </div>

                        <!-- Growth Velocity -->
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Growth Velocity Analysis</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Current Velocity</span>
                                    <span class="text-lg font-bold text-green-600">+2.1x</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Acceleration Rate</span>
                                    <span class="text-lg font-bold text-blue-600">+15%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Momentum Score</span>
                                    <span class="text-lg font-bold text-purple-600">87/100</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Growth Sustainability</span>
                                    <span class="text-lg font-bold text-orange-600">High</span>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Alerts -->
                        <div class="metric-card card-hover">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Performance Alerts & Insights</h3>
                            <div class="space-y-3">
                                <div class="p-2 bg-green-50 rounded-lg border-l-4 border-green-500">
                                    <div class="text-sm font-medium text-green-800">Revenue Growth Exceeding Target</div>
                                    <div class="text-xs text-green-600">15% above quarterly goal</div>
                                </div>
                                <div class="p-2 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                    <div class="text-sm font-medium text-blue-800">Customer Acquisition Strong</div>
                                    <div class="text-xs text-blue-600">New customer rate up 18%</div>
                                </div>
                                <div class="p-2 bg-yellow-50 rounded-lg border-l-4 border-yellow-500">
                                    <div class="text-sm font-medium text-yellow-800">Market Share Opportunity</div>
                                    <div class="text-xs text-yellow-600">Potential for +5% growth</div>
                                </div>
                                <div class="p-2 bg-purple-50 rounded-lg border-l-4 border-purple-500">
                                    <div class="text-sm font-medium text-purple-800">Operational Efficiency Improving</div>
                                    <div class="text-xs text-purple-600">Cost reduction initiatives working</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Opportunity Detail Modal -->
    <div id="opportunityModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle" class="text-xl font-bold text-gray-900">Growth Opportunity Details</h2>
                <span class="close" onclick="closeOpportunityModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="modalContent">
                    <!-- Dynamic content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize charts and interactions
        document.addEventListener('DOMContentLoaded', function() {
            initializeProgressiveDisclosure();
            initializeGrowthTrendChart();
            initializeProjectionCharts();
            initializePerformanceChart();
            initializeFilterButtons();
            initializeProjectionControls();
            initializeOpportunityMatrix();
            initializeOpportunityControls();
            initializeStrategyRoadmap();
            initializeStrategyControls();
            initializePerformanceTrends();
            initializePerformanceControls();
        });

        // Progressive disclosure animation
        function initializeProgressiveDisclosure() {
            const elements = document.querySelectorAll('.progressive-disclosure');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            elements.forEach(element => {
                observer.observe(element);
            });
        }

        // Growth Trend Chart
        function initializeGrowthTrendChart() {
            const ctx = document.getElementById('growthTrendChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Revenue Growth (%)',
                        data: [8.2, 9.1, 10.5, 11.8, 12.3, 13.1, 12.8, 13.5, 14.2, 13.9, 14.8, 15.2],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Customer Growth (%)',
                        data: [12.5, 13.8, 15.2, 16.1, 17.3, 18.0, 17.8, 18.5, 19.2, 18.9, 19.6, 20.1],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        // Enhanced Projection Charts with Confidence Intervals
        function initializeProjectionCharts() {
            // Revenue Projection with Confidence Intervals
            const revenueCtx = document.getElementById('revenueProjectionChart').getContext('2d');
            window.revenueChart = new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025', 'Q2 2025', 'Q3 2025', 'Q4 2025'],
                    datasets: [{
                        label: 'Actual Revenue',
                        data: [1.8, 2.0, 2.1, 2.3, null, null, null, null],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        pointRadius: 4
                    }, {
                        label: 'Projected Revenue',
                        data: [null, null, null, 2.3, 2.4, 2.6, 2.8, 3.0],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 3,
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 4
                    }, {
                        label: 'Upper Confidence (95%)',
                        data: [null, null, null, 2.3, 2.6, 2.9, 3.2, 3.5],
                        borderColor: 'rgba(16, 185, 129, 0.3)',
                        backgroundColor: 'rgba(16, 185, 129, 0.05)',
                        borderWidth: 1,
                        borderDash: [2, 2],
                        fill: '+1',
                        pointRadius: 0
                    }, {
                        label: 'Lower Confidence (95%)',
                        data: [null, null, null, 2.3, 2.2, 2.3, 2.4, 2.5],
                        borderColor: 'rgba(16, 185, 129, 0.3)',
                        backgroundColor: 'rgba(16, 185, 129, 0.05)',
                        borderWidth: 1,
                        borderDash: [2, 2],
                        fill: false,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += '$' + context.parsed.y.toFixed(1) + 'M';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return '$' + value + 'M';
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });

            // Customer Projection with Scenarios
            const customerCtx = document.getElementById('customerProjectionChart').getContext('2d');
            window.customerChart = new Chart(customerCtx, {
                type: 'line',
                data: {
                    labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025', 'Q2 2025', 'Q3 2025', 'Q4 2025'],
                    datasets: [{
                        label: 'Actual Customers',
                        data: [850, 920, 980, 1050, null, null, null, null],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        pointRadius: 4
                    }, {
                        label: 'Realistic Scenario',
                        data: [null, null, null, 1050, 1250, 1450, 1650, 1850],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 3,
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 4
                    }, {
                        label: 'Optimistic Scenario',
                        data: [null, null, null, 1050, 1350, 1700, 2100, 2550],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        borderWidth: 2,
                        borderDash: [3, 3],
                        fill: false,
                        pointRadius: 3
                    }, {
                        label: 'Pessimistic Scenario',
                        data: [null, null, null, 1050, 1150, 1250, 1350, 1450],
                        borderColor: '#ef4444',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        borderWidth: 2,
                        borderDash: [3, 3],
                        fill: false,
                        pointRadius: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y.toLocaleString() + ' customers';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        // Performance Comparison Chart
        function initializePerformanceChart() {
            const ctx = document.getElementById('performanceComparisonChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Growth Rate', 'Market Share', 'Customer Satisfaction', 'Operational Efficiency', 'Innovation', 'Financial Health'],
                    datasets: [{
                        label: 'Your Company',
                        data: [85, 75, 90, 80, 70, 85],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderWidth: 2
                    }, {
                        label: 'Industry Average',
                        data: [65, 60, 70, 65, 55, 70],
                        borderColor: '#6b7280',
                        backgroundColor: 'rgba(107, 114, 128, 0.2)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        // Filter buttons functionality
        function initializeFilterButtons() {
            const filterButtons = document.querySelectorAll('.filter-button');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Update chart based on selected period
                    const period = this.dataset.period;
                    updateGrowthTrendChart(period);
                });
            });
        }

        // Update growth trend chart based on period
        function updateGrowthTrendChart(period) {
            // This would typically make an API call to get data for the selected period
            console.log('Updating chart for period:', period);
            // For demo purposes, we'll just log the action
        }

        // Modal functionality
        function openOpportunityModal(opportunityType) {
            const modal = document.getElementById('opportunityModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            
            const opportunityData = {
                'market-expansion': {
                    title: 'Market Expansion Opportunity',
                    content: `
                        <div class="space-y-4">
                            <div class="p-4 bg-blue-50 rounded-lg">
                                <h3 class="font-semibold text-blue-900 mb-2">Opportunity Overview</h3>
                                <p class="text-blue-800">Expand into adjacent markets with high growth potential and low competition.</p>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="p-3 bg-green-50 rounded-lg">
                                    <div class="text-2xl font-bold text-green-600">+$2.1M</div>
                                    <div class="text-sm text-green-800">Potential Revenue</div>
                                </div>
                                <div class="p-3 bg-blue-50 rounded-lg">
                                    <div class="text-2xl font-bold text-blue-600">25%</div>
                                    <div class="text-sm text-blue-800">Growth Potential</div>
                                </div>
                            </div>
                            <div class="p-4 bg-gray-50 rounded-lg">
                                <h4 class="font-semibold text-gray-900 mb-2">Implementation Plan</h4>
                                <ul class="space-y-2 text-gray-700">
                                    <li> Market research and analysis (Month 1)</li>
                                    <li> Product adaptation for new markets (Month 2-3)</li>
                                    <li> Marketing campaign launch (Month 4)</li>
                                    <li> Sales team expansion (Month 5-6)</li>
                                </ul>
                            </div>
                            <div class="p-4 bg-yellow-50 rounded-lg">
                                <h4 class="font-semibold text-yellow-900 mb-2">Risk Assessment</h4>
                                <p class="text-yellow-800">Low to medium risk with high potential return. Requires initial investment of $500K.</p>
                            </div>
                        </div>
                    `
                },
                'product-innovation': {
                    title: 'Product Innovation Opportunity',
                    content: `
                        <div class="space-y-4">
                            <div class="p-4 bg-blue-50 rounded-lg">
                                <h3 class="font-semibold text-blue-900 mb-2">Opportunity Overview</h3>
                                <p class="text-blue-800">Develop new product features to increase customer retention and attract new segments.</p>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="p-3 bg-green-50 rounded-lg">
                                    <div class="text-2xl font-bold text-green-600">+$1.8M</div>
                                    <div class="text-sm text-green-800">Potential Revenue</div>
                                </div>
                                <div class="p-3 bg-blue-50 rounded-lg">
                                    <div class="text-2xl font-bold text-blue-600">20%</div>
                                    <div class="text-sm text-blue-800">Retention Increase</div>
                                </div>
                            </div>
                            <div class="p-4 bg-gray-50 rounded-lg">
                                <h4 class="font-semibold text-gray-900 mb-2">Key Features</h4>
                                <ul class="space-y-2 text-gray-700">
                                    <li> AI-powered analytics dashboard</li>
                                    <li> Mobile app for customer engagement</li>
                                    <li> Advanced reporting capabilities</li>
                                    <li> Integration with third-party tools</li>
                                </ul>
                            </div>
                        </div>
                    `
                }
                // Add more opportunity types as needed
            };
            
            const data = opportunityData[opportunityType] || {
                title: 'Growth Opportunity',
                content: '<p>Detailed information about this opportunity will be available soon.</p>'
            };
            
            modalTitle.textContent = data.title;
            modalContent.innerHTML = data.content;
            modal.style.display = 'block';
        }

        function closeOpportunityModal() {
            const modal = document.getElementById('opportunityModal');
            modal.style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('opportunityModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // Enhanced Projection Controls
        function initializeProjectionControls() {
            // Update projections button
            const updateButton = document.getElementById('updateProjections');
            updateButton.addEventListener('click', updateProjections);

            // Chart period filters
            const chartFilters = document.querySelectorAll('[data-chart]');
            chartFilters.forEach(button => {
                button.addEventListener('click', function() {
                    const chartType = this.dataset.chart;
                    const value = this.dataset.period || this.dataset.scenario;
                    
                    // Remove active class from siblings
                    const siblings = this.parentNode.querySelectorAll('.filter-button');
                    siblings.forEach(sibling => sibling.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Update chart based on type
                    if (chartType === 'revenue') {
                        updateRevenueChart(value);
                    } else if (chartType === 'customer') {
                        updateCustomerChart(value);
                    }
                });
            });
        }

        // Update projections based on controls
        function updateProjections() {
            const model = document.getElementById('projectionModel').value;
            const confidence = document.getElementById('confidenceLevel').value;
            const horizon = document.getElementById('timeHorizon').value;
            
            // Show loading state
            const updateButton = document.getElementById('updateProjections');
            const originalText = updateButton.innerHTML;
            updateButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Updating...';
            updateButton.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Update forecast values based on model
                updateForecastValues(model, confidence, horizon);
                
                // Update charts
                updateRevenueChart('12m');
                updateCustomerChart('realistic');
                
                // Reset button
                updateButton.innerHTML = originalText;
                updateButton.disabled = false;
                
                // Show success message
                showNotification('Projections updated successfully!', 'success');
            }, 1500);
        }

        // Update forecast values based on projection model
        function updateForecastValues(model, confidence, horizon) {
            const forecasts = {
                linear: { revenue: '$10.2M', customer: '5,800', marketShare: '12.5%' },
                exponential: { revenue: '$12.8M', customer: '7,200', marketShare: '15.2%' },
                logistic: { revenue: '$9.5M', customer: '5,200', marketShare: '11.8%' },
                seasonal: { revenue: '$11.1M', customer: '6,400', marketShare: '13.7%' }
            };
            
            const forecast = forecasts[model] || forecasts.linear;
            
            document.getElementById('revenueForecast').textContent = forecast.revenue;
            document.getElementById('customerForecast').textContent = forecast.customer;
            document.getElementById('marketShareForecast').textContent = forecast.marketShare;
        }

        // Update revenue chart based on period
        function updateRevenueChart(period) {
            if (!window.revenueChart) return;
            
            const periods = {
                '12m': {
                    labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025', 'Q2 2025', 'Q3 2025', 'Q4 2025'],
                    data: [1.8, 2.0, 2.1, 2.3, 2.4, 2.6, 2.8, 3.0]
                },
                '24m': {
                    labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025', 'Q2 2025', 'Q3 2025', 'Q4 2025', 'Q1 2026', 'Q2 2026', 'Q3 2026', 'Q4 2026'],
                    data: [1.8, 2.0, 2.1, 2.3, 2.4, 2.6, 2.8, 3.0, 3.3, 3.6, 3.9, 4.2]
                },
                '36m': {
                    labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025', 'Q2 2025', 'Q3 2025', 'Q4 2025', 'Q1 2026', 'Q2 2026', 'Q3 2026', 'Q4 2026', 'Q1 2027', 'Q2 2027', 'Q3 2027', 'Q4 2027'],
                    data: [1.8, 2.0, 2.1, 2.3, 2.4, 2.6, 2.8, 3.0, 3.3, 3.6, 3.9, 4.2, 4.6, 5.0, 5.4, 5.8]
                }
            };
            
            const periodData = periods[period] || periods['12m'];
            
            window.revenueChart.data.labels = periodData.labels;
            window.revenueChart.data.datasets[1].data = periodData.data;
            window.revenueChart.update();
        }

        // Update customer chart based on scenario
        function updateCustomerChart(scenario) {
            if (!window.customerChart) return;
            
            const scenarios = {
                realistic: [null, null, null, 1050, 1250, 1450, 1650, 1850],
                optimistic: [null, null, null, 1050, 1350, 1700, 2100, 2550],
                pessimistic: [null, null, null, 1050, 1150, 1250, 1350, 1450]
            };
            
            const scenarioData = scenarios[scenario] || scenarios.realistic;
            
            // Update the realistic scenario data (index 1)
            window.customerChart.data.datasets[1].data = scenarioData;
            window.customerChart.update();
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500 text-white' : 
                type === 'error' ? 'bg-red-500 text-white' : 
                'bg-blue-500 text-white'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize Opportunity Matrix Chart
        function initializeOpportunityMatrix() {
            const ctx = document.getElementById('opportunityMatrixChart').getContext('2d');
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Growth Opportunities',
                        data: [
                            { x: 2.1, y: 6, label: 'Market Expansion', color: '#10b981' },
                            { x: 1.8, y: 9, label: 'Product Innovation', color: '#3b82f6' },
                            { x: 1.2, y: 4, label: 'Partnership Growth', color: '#10b981' },
                            { x: 0.9, y: 8, label: 'Digital Transformation', color: '#eab308' },
                            { x: 0.7, y: 3, label: 'Customer Retention', color: '#10b981' },
                            { x: 0.4, y: 12, label: 'Operational Efficiency', color: '#ef4444' }
                        ],
                        backgroundColor: function(context) {
                            return context.parsed.color || '#6b7280';
                        },
                        borderColor: function(context) {
                            return context.parsed.color || '#6b7280';
                        },
                        borderWidth: 2,
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    return context[0].parsed.label;
                                },
                                label: function(context) {
                                    return [
                                        `Impact: $${context.parsed.x}M`,
                                        `Effort: ${context.parsed.y} months`
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Potential Impact ($M)'
                            },
                            min: 0,
                            max: 2.5,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Implementation Effort (months)'
                            },
                            min: 0,
                            max: 15,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        // Initialize Opportunity Controls
        function initializeOpportunityControls() {
            // Analyze opportunities button
            const analyzeButton = document.getElementById('analyzeOpportunities');
            analyzeButton.addEventListener('click', analyzeOpportunities);

            // Filter controls
            const priorityFilter = document.getElementById('opportunityPriority');
            const sortFilter = document.getElementById('opportunitySort');
            const timelineFilter = document.getElementById('opportunityTimeline');

            [priorityFilter, sortFilter, timelineFilter].forEach(filter => {
                filter.addEventListener('change', filterOpportunities);
            });
        }

        // Analyze opportunities
        function analyzeOpportunities() {
            const analyzeButton = document.getElementById('analyzeOpportunities');
            const originalText = analyzeButton.innerHTML;
            
            // Show loading state
            analyzeButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Analyzing...';
            analyzeButton.disabled = true;
            
            // Simulate analysis
            setTimeout(() => {
                // Update summary metrics
                updateOpportunityMetrics();
                
                // Apply current filters
                filterOpportunities();
                
                // Reset button
                analyzeButton.innerHTML = originalText;
                analyzeButton.disabled = false;
                
                // Show success message
                showNotification('Opportunity analysis completed!', 'success');
            }, 2000);
        }

        // Update opportunity metrics
        function updateOpportunityMetrics() {
            const opportunities = document.querySelectorAll('.opportunity-card');
            let totalImpact = 0;
            let highPriorityCount = 0;
            let totalEffort = 0;
            
            opportunities.forEach(opp => {
                const impact = parseFloat(opp.dataset.impact) / 1000000; // Convert to millions
                const effort = parseInt(opp.dataset.effort);
                const priority = opp.dataset.priority;
                
                totalImpact += impact;
                totalEffort += effort;
                
                if (priority === 'high') {
                    highPriorityCount++;
                }
            });
            
            const avgEffort = (totalEffort / opportunities.length).toFixed(1);
            
            // Update metrics
            document.getElementById('totalOpportunities').textContent = opportunities.length;
            document.getElementById('highPriorityOpportunities').textContent = highPriorityCount;
            document.getElementById('totalPotentialImpact').textContent = `$${totalImpact.toFixed(1)}M`;
            document.getElementById('avgImplementationTime').textContent = avgEffort;
        }

        // Filter opportunities
        function filterOpportunities() {
            const priorityFilter = document.getElementById('opportunityPriority').value;
            const sortFilter = document.getElementById('opportunitySort').value;
            const timelineFilter = document.getElementById('opportunityTimeline').value;
            
            const opportunities = Array.from(document.querySelectorAll('.opportunity-card'));
            const container = document.getElementById('opportunitiesContainer');
            
            // Filter opportunities
            let filteredOpportunities = opportunities.filter(opp => {
                const priority = opp.dataset.priority;
                const timeline = opp.dataset.timeline;
                
                // Priority filter
                if (priorityFilter !== 'all' && priority !== priorityFilter) {
                    return false;
                }
                
                // Timeline filter
                if (timelineFilter !== 'all' && timeline !== timelineFilter) {
                    return false;
                }
                
                return true;
            });
            
            // Sort opportunities
            filteredOpportunities.sort((a, b) => {
                switch (sortFilter) {
                    case 'impact':
                        return parseFloat(b.dataset.impact) - parseFloat(a.dataset.impact);
                    case 'effort':
                        return parseFloat(a.dataset.effort) - parseFloat(b.dataset.effort);
                    case 'priority':
                        const priorityOrder = { high: 3, medium: 2, low: 1 };
                        return priorityOrder[b.dataset.priority] - priorityOrder[a.dataset.priority];
                    case 'timeline':
                        const timelineOrder = { short: 1, medium: 2, long: 3 };
                        return timelineOrder[a.dataset.timeline] - timelineOrder[b.dataset.timeline];
                    default:
                        return 0;
                }
            });
            
            // Clear container
            container.innerHTML = '';
            
            // Add filtered and sorted opportunities
            filteredOpportunities.forEach(opp => {
                container.appendChild(opp);
            });
            
            // Update metrics for filtered results
            updateFilteredMetrics(filteredOpportunities);
        }

        // Update metrics for filtered results
        function updateFilteredMetrics(opportunities) {
            let totalImpact = 0;
            let highPriorityCount = 0;
            let totalEffort = 0;
            
            opportunities.forEach(opp => {
                const impact = parseFloat(opp.dataset.impact) / 1000000;
                const effort = parseInt(opp.dataset.effort);
                const priority = opp.dataset.priority;
                
                totalImpact += impact;
                totalEffort += effort;
                
                if (priority === 'high') {
                    highPriorityCount++;
                }
            });
            
            const avgEffort = opportunities.length > 0 ? (totalEffort / opportunities.length).toFixed(1) : '0';
            
            // Update metrics with filtered data
            document.getElementById('totalOpportunities').textContent = opportunities.length;
            document.getElementById('highPriorityOpportunities').textContent = highPriorityCount;
            document.getElementById('totalPotentialImpact').textContent = `$${totalImpact.toFixed(1)}M`;
            document.getElementById('avgImplementationTime').textContent = avgEffort;
        }

        // Initialize Strategy Roadmap Chart
        function initializeStrategyRoadmap() {
            const ctx = document.getElementById('strategyRoadmapChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Q1 2025', 'Q2 2025', 'Q3 2025', 'Q4 2025', 'Q1 2026', 'Q2 2026', 'Q3 2026', 'Q4 2026'],
                    datasets: [{
                        label: 'Quick Wins Strategy',
                        data: [3.2, 0, 0, 0, 0, 0, 0, 0],
                        backgroundColor: 'rgba(16, 185, 129, 0.8)',
                        borderColor: '#10b981',
                        borderWidth: 1
                    }, {
                        label: 'Innovation & Growth',
                        data: [0, 1.5, 2.8, 4.2, 0, 0, 0, 0],
                        backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        borderColor: '#3b82f6',
                        borderWidth: 1
                    }, {
                        label: 'Market Leadership',
                        data: [0, 0, 0, 0, 2.1, 4.5, 7.2, 10.8],
                        backgroundColor: 'rgba(168, 85, 247, 0.8)',
                        borderColor: '#a855f7',
                        borderWidth: 1
                    }, {
                        label: 'Operational Excellence',
                        data: [0, 0.8, 1.2, 1.8, 0, 0, 0, 0],
                        backgroundColor: 'rgba(245, 158, 11, 0.8)',
                        borderColor: '#f59e0b',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: $${context.parsed.y}M impact`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Cumulative Impact ($M)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return '$' + value + 'M';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize Strategy Controls
        function initializeStrategyControls() {
            // Generate strategy button
            const generateButton = document.getElementById('generateStrategy');
            generateButton.addEventListener('click', generateStrategy);

            // Filter controls
            const focusFilter = document.getElementById('strategyFocus');
            const timelineFilter = document.getElementById('strategyTimeline');
            const investmentFilter = document.getElementById('strategyInvestment');

            [focusFilter, timelineFilter, investmentFilter].forEach(filter => {
                filter.addEventListener('change', filterStrategies);
            });
        }

        // Generate strategy
        function generateStrategy() {
            const generateButton = document.getElementById('generateStrategy');
            const originalText = generateButton.innerHTML;
            
            // Show loading state
            generateButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Generating...';
            generateButton.disabled = true;
            
            // Simulate strategy generation
            setTimeout(() => {
                // Update strategy metrics
                updateStrategyMetrics();
                
                // Apply current filters
                filterStrategies();
                
                // Reset button
                generateButton.innerHTML = originalText;
                generateButton.disabled = false;
                
                // Show success message
                showNotification('Strategy recommendations generated!', 'success');
            }, 2500);
        }

        // Update strategy metrics
        function updateStrategyMetrics() {
            const strategies = document.querySelectorAll('.strategy-recommendation');
            let totalROI = 0;
            let totalSuccess = 0;
            let totalImpact = 0;
            
            strategies.forEach(strategy => {
                // Simulate metric updates based on strategy data
                totalROI += 285; // Average ROI
                totalSuccess += 87; // Average success rate
                totalImpact += 2.9; // Average impact per strategy
            });
            
            const avgROI = (totalROI / strategies.length).toFixed(0);
            const avgSuccess = (totalSuccess / strategies.length).toFixed(0);
            const totalImpactValue = (totalImpact * strategies.length).toFixed(1);
            
            // Update metrics
            document.getElementById('totalStrategies').textContent = strategies.length;
            document.getElementById('strategyROI').textContent = avgROI + '%';
            document.getElementById('strategySuccess').textContent = avgSuccess + '%';
            document.getElementById('strategyImpact').textContent = `$${totalImpactValue}M`;
        }

        // Filter strategies
        function filterStrategies() {
            const focusFilter = document.getElementById('strategyFocus').value;
            const timelineFilter = document.getElementById('strategyTimeline').value;
            const investmentFilter = document.getElementById('strategyInvestment').value;
            
            const strategies = Array.from(document.querySelectorAll('.strategy-recommendation'));
            const container = document.getElementById('strategiesContainer');
            
            // Filter strategies
            let filteredStrategies = strategies.filter(strategy => {
                const focus = strategy.dataset.focus;
                const timeline = strategy.dataset.timeline;
                const investment = strategy.dataset.investment;
                
                // Focus filter
                if (focusFilter !== 'all' && focus !== focusFilter) {
                    return false;
                }
                
                // Timeline filter
                if (timelineFilter !== 'all' && timeline !== timelineFilter) {
                    return false;
                }
                
                // Investment filter
                if (investmentFilter !== 'all' && investment !== investmentFilter) {
                    return false;
                }
                
                return true;
            });
            
            // Clear container
            container.innerHTML = '';
            
            // Add filtered strategies
            filteredStrategies.forEach(strategy => {
                container.appendChild(strategy);
            });
            
            // Update metrics for filtered results
            updateFilteredStrategyMetrics(filteredStrategies);
        }

        // Update metrics for filtered strategy results
        function updateFilteredStrategyMetrics(strategies) {
            let totalROI = 0;
            let totalSuccess = 0;
            let totalImpact = 0;
            
            strategies.forEach(strategy => {
                // Simulate metric updates based on strategy data
                totalROI += 285; // Average ROI
                totalSuccess += 87; // Average success rate
                totalImpact += 2.9; // Average impact per strategy
            });
            
            const avgROI = strategies.length > 0 ? (totalROI / strategies.length).toFixed(0) : '0';
            const avgSuccess = strategies.length > 0 ? (totalSuccess / strategies.length).toFixed(0) : '0';
            const totalImpactValue = strategies.length > 0 ? (totalImpact * strategies.length).toFixed(1) : '0';
            
            // Update metrics with filtered data
            document.getElementById('totalStrategies').textContent = strategies.length;
            document.getElementById('strategyROI').textContent = avgROI + '%';
            document.getElementById('strategySuccess').textContent = avgSuccess + '%';
            document.getElementById('strategyImpact').textContent = `$${totalImpactValue}M`;
        }

        // Strategy modal functionality
        function openStrategyModal(strategyType) {
            const modal = document.getElementById('opportunityModal'); // Reuse existing modal
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            
            const strategyData = {
                'quick-wins': {
                    title: 'Quick Wins Strategy Details',
                    content: `
                        <div class="space-y-4">
                            <div class="p-4 bg-green-50 rounded-lg">
                                <h3 class="font-semibold text-green-900 mb-2">Strategy Overview</h3>
                                <p class="text-green-800">Focus on high-impact, low-effort initiatives that can deliver quick results and build momentum for larger strategic initiatives.</p>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="p-3 bg-blue-50 rounded-lg">
                                    <div class="text-2xl font-bold text-blue-600">$3.2M</div>
                                    <div class="text-sm text-blue-800">Expected Impact</div>
                                </div>
                                <div class="p-3 bg-green-50 rounded-lg">
                                    <div class="text-2xl font-bold text-green-600">320%</div>
                                    <div class="text-sm text-green-800">Expected ROI</div>
                                </div>
                            </div>
                            <div class="p-4 bg-gray-50 rounded-lg">
                                <h4 class="font-semibold text-gray-900 mb-2">Implementation Timeline</h4>
                                <ul class="space-y-2 text-gray-700">
                                    <li> Month 1-2: Market expansion planning and execution</li>
                                    <li> Month 2-3: Customer retention program launch</li>
                                    <li> Month 3-4: Digital marketing optimization</li>
                                    <li> Month 4-6: Strategic partnership establishment</li>
                                </ul>
                            </div>
                            <div class="p-4 bg-yellow-50 rounded-lg">
                                <h4 class="font-semibold text-yellow-900 mb-2">Success Factors</h4>
                                <p class="text-yellow-800">High success probability due to proven market demand, existing capabilities, and low implementation complexity.</p>
                            </div>
                        </div>
                    `
                },
                'innovation-growth': {
                    title: 'Innovation & Growth Strategy Details',
                    content: `
                        <div class="space-y-4">
                            <div class="p-4 bg-blue-50 rounded-lg">
                                <h3 class="font-semibold text-blue-900 mb-2">Strategy Overview</h3>
                                <p class="text-blue-800">Comprehensive innovation and growth strategy focusing on product development, market expansion, and operational scaling.</p>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="p-3 bg-green-50 rounded-lg">
                                    <div class="text-2xl font-bold text-green-600">$8.5M</div>
                                    <div class="text-sm text-green-800">Expected Impact</div>
                                </div>
                                <div class="p-3 bg-blue-50 rounded-lg">
                                    <div class="text-2xl font-bold text-blue-600">275%</div>
                                    <div class="text-sm text-blue-800">Expected ROI</div>
                                </div>
                            </div>
                            <div class="p-4 bg-gray-50 rounded-lg">
                                <h4 class="font-semibold text-gray-900 mb-2">Key Initiatives</h4>
                                <ul class="space-y-2 text-gray-700">
                                    <li> New product line development for emerging markets</li>
                                    <li> AI-driven customer insights implementation</li>
                                    <li> International market expansion</li>
                                    <li> Scalable infrastructure development</li>
                                </ul>
                            </div>
                        </div>
                    `
                }
                // Add more strategy types as needed
            };
            
            const data = strategyData[strategyType] || {
                title: 'Strategy Details',
                content: '<p>Detailed information about this strategy will be available soon.</p>'
            };
            
            modalTitle.textContent = data.title;
            modalContent.innerHTML = data.content;
            modal.style.display = 'block';
        }

        // Initialize Performance Trends Chart
        function initializePerformanceTrends() {
            const ctx = document.getElementById('performanceTrendsChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025', 'Q2 2025', 'Q3 2025', 'Q4 2025'],
                    datasets: [{
                        label: 'Our Performance',
                        data: [18.2, 19.8, 21.5, 23.1, 24.5, 25.8, 27.2, 28.6],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Industry Average',
                        data: [16.8, 17.2, 18.1, 19.3, 21.3, 22.1, 22.8, 23.5],
                        borderColor: '#6b7280',
                        backgroundColor: 'rgba(107, 114, 128, 0.1)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        fill: false,
                        tension: 0.4
                    }, {
                        label: 'Top Competitors',
                        data: [17.5, 18.9, 20.2, 21.8, 23.1, 24.3, 25.1, 25.9],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 2,
                        borderDash: [10, 5],
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.parsed.y}% growth`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Growth Rate (%)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });

            // Initialize Performance Distribution Chart
            const distCtx = document.getElementById('performanceDistributionChart').getContext('2d');
            new Chart(distCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Exceeds Target', 'Meets Target', 'Below Target', 'Needs Improvement'],
                    datasets: [{
                        data: [35, 45, 15, 5],
                        backgroundColor: [
                            '#10b981',
                            '#3b82f6',
                            '#f59e0b',
                            '#ef4444'
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed}%`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize Performance Controls
        function initializePerformanceControls() {
            // Refresh performance button
            const refreshButton = document.getElementById('refreshPerformance');
            refreshButton.addEventListener('click', refreshPerformanceMetrics);

            // Filter controls
            const periodFilter = document.getElementById('performancePeriod');
            const benchmarkFilter = document.getElementById('performanceBenchmark');
            const focusFilter = document.getElementById('performanceFocus');

            [periodFilter, benchmarkFilter, focusFilter].forEach(filter => {
                filter.addEventListener('change', updatePerformanceMetrics);
            });
        }

        // Refresh performance metrics
        function refreshPerformanceMetrics() {
            const refreshButton = document.getElementById('refreshPerformance');
            const originalText = refreshButton.innerHTML;
            
            // Show loading state
            refreshButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Refreshing...';
            refreshButton.disabled = true;
            
            // Simulate metrics refresh
            setTimeout(() => {
                // Update performance metrics
                updatePerformanceMetrics();
                
                // Reset button
                refreshButton.innerHTML = originalText;
                refreshButton.disabled = false;
                
                // Show success message
                showNotification('Performance metrics refreshed!', 'success');
            }, 2000);
        }

        // Update performance metrics based on filters
        function updatePerformanceMetrics() {
            const period = document.getElementById('performancePeriod').value;
            const benchmark = document.getElementById('performanceBenchmark').value;
            const focus = document.getElementById('performanceFocus').value;
            
            // Simulate metric updates based on filters
            const metrics = {
                quarterly: { revenue: '+24.5%', customer: '+18.2%', market: '+12.8%', efficiency: '+15.3%' },
                monthly: { revenue: '+2.1%', customer: '+1.5%', market: '+1.1%', efficiency: '+1.3%' },
                yearly: { revenue: '+28.7%', customer: '+22.4%', market: '+16.2%', efficiency: '+18.9%' },
                ytd: { revenue: '+19.8%', customer: '+14.6%', market: '+9.4%', efficiency: '+12.1%' }
            };
            
            const benchmarks = {
                industry: { revenue: '+21.3%', customer: '+13.1%', market: '+8.4%', efficiency: '+11.2%' },
                competitors: { revenue: '+23.1%', customer: '+15.8%', market: '+10.2%', efficiency: '+13.5%' },
                historical: { revenue: '+20.1%', customer: '+12.8%', market: '+7.9%', efficiency: '+10.8%' },
                targets: { revenue: '+25.0%', customer: '+20.0%', market: '+15.0%', efficiency: '+18.0%' }
            };
            
            const currentMetrics = metrics[period] || metrics.quarterly;
            const benchmarkData = benchmarks[benchmark] || benchmarks.industry;
            
            // Update metric values
            document.getElementById('revenueGrowthRate').textContent = currentMetrics.revenue;
            document.getElementById('customerGrowthRate').textContent = currentMetrics.customer;
            document.getElementById('marketShareGrowth').textContent = currentMetrics.market;
            document.getElementById('operationalEfficiency').textContent = currentMetrics.efficiency;
            
            // Update progress bars based on focus
            updateProgressBars(focus, currentMetrics);
            
            // Update benchmark comparisons
            updateBenchmarkComparisons(benchmarkData);
        }

        // Update progress bars based on focus
        function updateProgressBars(focus, metrics) {
            const progressBars = document.querySelectorAll('.bg-gray-200 .rounded-full');
            const progressTexts = document.querySelectorAll('.text-xs.text-gray-500');
            
            if (focus === 'revenue') {
                progressBars[0].style.width = '95%';
                progressTexts[0].textContent = '95% of target';
            } else if (focus === 'customer') {
                progressBars[1].style.width = '98%';
                progressTexts[1].textContent = '98% of target';
            } else if (focus === 'market') {
                progressBars[2].style.width = '85%';
                progressTexts[2].textContent = '85% of target';
            } else if (focus === 'operational') {
                progressBars[3].style.width = '92%';
                progressTexts[3].textContent = '92% of target';
            } else {
                // Reset to default values
                progressBars[0].style.width = '85%';
                progressBars[1].style.width = '92%';
                progressBars[2].style.width = '78%';
                progressBars[3].style.width = '88%';
                progressTexts[0].textContent = '85% of target';
                progressTexts[1].textContent = '92% of target';
                progressTexts[2].textContent = '78% of target';
                progressTexts[3].textContent = '88% of target';
            }
        }

        // Update benchmark comparisons
        function updateBenchmarkComparisons(benchmarkData) {
            const benchmarkElements = document.querySelectorAll('.bg-gray-50 .text-xs.text-gray-500');
            
            if (benchmarkElements.length >= 4) {
                benchmarkElements[0].innerHTML = `Industry Avg: ${benchmarkData.revenue} <span class="text-green-600">+3.2% above</span>`;
                benchmarkElements[1].innerHTML = `Industry Avg: ${benchmarkData.customer} <span class="text-green-600">+5.1% above</span>`;
                benchmarkElements[2].innerHTML = `Industry Avg: ${benchmarkData.market} <span class="text-green-600">+4.4% above</span>`;
                benchmarkElements[3].innerHTML = `Industry Avg: ${benchmarkData.efficiency} <span class="text-green-600">+4.1% above</span>`;
            }
        }
    </script>
</body>
</html>
