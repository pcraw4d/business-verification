<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Indicators Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 6px;
            border-left: 4px solid #3b82f6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Security Indicators Component Test</h1>
        
        <div class="test-section">
            <h2>Test Controls</h2>
            <button class="test-button" onclick="testExcellentSecurity()">Test Excellent Security</button>
            <button class="test-button" onclick="testGoodSecurity()">Test Good Security</button>
            <button class="test-button" onclick="testWarningSecurity()">Test Warning Security</button>
            <button class="test-button" onclick="testCriticalSecurity()">Test Critical Security</button>
            <button class="test-button" onclick="testRealData()">Test Real Data</button>
            <button class="test-button" onclick="clearIndicators()">Clear Indicators</button>
        </div>

        <div class="test-section">
            <h2>Security Indicators Display</h2>
            <div id="security-indicators"></div>
        </div>

        <div class="test-section">
            <h2>Test Results</h2>
            <div id="test-results" class="test-results">
                <p>Click a test button above to see the security indicators in action.</p>
            </div>
        </div>
    </div>

    <!-- Security Indicators Component -->
    <script src="components/security-indicators.js"></script>
    
    <script>
        let securityIndicators = null;

        // Initialize security indicators
        document.addEventListener('DOMContentLoaded', function() {
            securityIndicators = new SecurityIndicators({
                containerId: 'security-indicators',
                showDetailed: true,
                showTooltips: true,
                theme: 'default'
            });
            securityIndicators.init();
            logTest('Security indicators component initialized successfully');
        });

        // Test functions
        function testExcellentSecurity() {
            const testData = {
                data_source_trust: {
                    trust_rate: 1.0,
                    trusted_count: 5,
                    total_validations: 5
                },
                website_verification: {
                    success_rate: 1.0,
                    success_count: 10,
                    total_attempts: 10
                },
                quality_metrics: {
                    overall_quality: 0.98,
                    evidence_strength: 0.95,
                    data_completeness: 0.92
                },
                security_validation: {
                    total_violations: 0,
                    violations_by_type: {}
                }
            };
            
            securityIndicators.update(testData);
            logTest('Excellent security test data applied - all indicators should show green/excellent status');
        }

        function testGoodSecurity() {
            const testData = {
                data_source_trust: {
                    trust_rate: 0.92,
                    trusted_count: 23,
                    total_validations: 25
                },
                website_verification: {
                    success_rate: 0.88,
                    success_count: 22,
                    total_attempts: 25
                },
                quality_metrics: {
                    overall_quality: 0.87,
                    evidence_strength: 0.85,
                    data_completeness: 0.82
                },
                security_validation: {
                    total_violations: 1,
                    violations_by_type: { 'minor': 1 }
                }
            };
            
            securityIndicators.update(testData);
            logTest('Good security test data applied - indicators should show blue/good status');
        }

        function testWarningSecurity() {
            const testData = {
                data_source_trust: {
                    trust_rate: 0.75,
                    trusted_count: 15,
                    total_validations: 20
                },
                website_verification: {
                    success_rate: 0.72,
                    success_count: 18,
                    total_attempts: 25
                },
                quality_metrics: {
                    overall_quality: 0.73,
                    evidence_strength: 0.70,
                    data_completeness: 0.68
                },
                security_validation: {
                    total_violations: 3,
                    violations_by_type: { 'minor': 2, 'moderate': 1 }
                }
            };
            
            securityIndicators.update(testData);
            logTest('Warning security test data applied - indicators should show yellow/warning status');
        }

        function testCriticalSecurity() {
            const testData = {
                data_source_trust: {
                    trust_rate: 0.45,
                    trusted_count: 9,
                    total_validations: 20
                },
                website_verification: {
                    success_rate: 0.40,
                    success_count: 8,
                    total_attempts: 20
                },
                quality_metrics: {
                    overall_quality: 0.55,
                    evidence_strength: 0.50,
                    data_completeness: 0.45
                },
                security_validation: {
                    total_violations: 8,
                    violations_by_type: { 'minor': 3, 'moderate': 3, 'critical': 2 }
                }
            };
            
            securityIndicators.update(testData);
            logTest('Critical security test data applied - indicators should show red/critical status');
        }

        function testRealData() {
            const testData = {
                data_source_trust: {
                    trust_rate: 1.0,
                    trusted_count: 1,
                    total_validations: 1
                },
                website_verification: {
                    success_rate: 1.0,
                    success_count: 1,
                    total_attempts: 1
                },
                quality_metrics: {
                    overall_quality: 0.95,
                    evidence_strength: 0.90,
                    data_completeness: 0.85
                },
                security_validation: {
                    total_violations: 0,
                    violations_by_type: {}
                },
                security_metrics: {
                    data_source_trust: {
                        trust_rate: 1.0,
                        trusted_count: 1,
                        total_validations: 1
                    },
                    website_verification: {
                        success_rate: 1.0,
                        success_count: 1,
                        total_attempts: 1
                    },
                    security_violations: {
                        total_violations: 0,
                        violations_by_type: {}
                    }
                }
            };
            
            securityIndicators.update(testData);
            logTest('Real data test applied - should match the actual system behavior');
        }

        function clearIndicators() {
            if (securityIndicators) {
                securityIndicators.destroy();
                document.getElementById('security-indicators').innerHTML = '<p>Security indicators cleared</p>';
                logTest('Security indicators cleared');
            }
        }

        function logTest(message) {
            const testResults = document.getElementById('test-results');
            const timestamp = new Date().toLocaleTimeString();
            testResults.innerHTML += `<p><strong>[${timestamp}]</strong> ${message}</p>`;
            testResults.scrollTop = testResults.scrollHeight;
        }
    </script>
</body>
</html>
