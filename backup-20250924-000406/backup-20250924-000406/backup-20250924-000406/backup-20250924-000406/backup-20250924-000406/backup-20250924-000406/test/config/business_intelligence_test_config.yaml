# Business Intelligence API Test Configuration
# This file contains configuration settings for testing the Business Intelligence API

# Test Environment Settings
test_environment:
  name: "business_intelligence_test"
  description: "Test environment for Business Intelligence API"
  timeout: 30s
  retry_attempts: 3
  retry_delay: 1s

# Test Data Configuration
test_data:
  # Sample business data for testing
  sample_businesses:
    - id: "test-business-1"
      name: "Test Technology Company"
      industry: "Technology"
      geographic_area: "North America"
      size: "medium"
      revenue: 1000000
    - id: "test-business-2"
      name: "Test Manufacturing Corp"
      industry: "Manufacturing"
      geographic_area: "Europe"
      size: "large"
      revenue: 5000000
    - id: "test-business-3"
      name: "Test Retail Store"
      industry: "Retail"
      geographic_area: "Asia"
      size: "small"
      revenue: 500000

  # Sample competitors for testing
  sample_competitors:
    - "Competitor A"
    - "Competitor B"
    - "Competitor C"
    - "Competitor D"
    - "Competitor E"

  # Sample time ranges for testing
  sample_time_ranges:
    - name: "last_month"
      start_date: "2024-01-01T00:00:00Z"
      end_date: "2024-01-31T23:59:59Z"
      time_zone: "UTC"
    - name: "last_quarter"
      start_date: "2023-10-01T00:00:00Z"
      end_date: "2023-12-31T23:59:59Z"
      time_zone: "UTC"
    - name: "last_year"
      start_date: "2023-01-01T00:00:00Z"
      end_date: "2023-12-31T23:59:59Z"
      time_zone: "UTC"

# Performance Test Configuration
performance_tests:
  # Benchmark settings
  benchmarks:
    market_analysis_creation:
      iterations: 1000
      timeout: 5s
      max_memory: 100MB
    competitive_analysis_creation:
      iterations: 1000
      timeout: 5s
      max_memory: 100MB
    growth_analytics_creation:
      iterations: 1000
      timeout: 5s
      max_memory: 100MB
    aggregation_creation:
      iterations: 500
      timeout: 10s
      max_memory: 200MB

  # Load testing settings
  load_tests:
    concurrent_users: 100
    duration: 60s
    ramp_up_time: 10s
    ramp_down_time: 10s

  # Stress testing settings
  stress_tests:
    max_concurrent_users: 1000
    max_duration: 300s
    memory_threshold: 1GB
    cpu_threshold: 80%

# Integration Test Configuration
integration_tests:
  # Test scenarios
  scenarios:
    - name: "market_analysis_workflow"
      description: "Complete market analysis workflow"
      steps:
        - create_market_analysis
        - retrieve_market_analysis
        - list_market_analyses
        - create_market_analysis_job
        - check_job_status
        - list_jobs
    - name: "competitive_analysis_workflow"
      description: "Complete competitive analysis workflow"
      steps:
        - create_competitive_analysis
        - retrieve_competitive_analysis
        - list_competitive_analyses
        - create_competitive_analysis_job
        - check_job_status
        - list_jobs
    - name: "growth_analytics_workflow"
      description: "Complete growth analytics workflow"
      steps:
        - create_growth_analytics
        - retrieve_growth_analytics
        - list_growth_analytics
        - create_growth_analytics_job
        - check_job_status
        - list_jobs
    - name: "aggregation_workflow"
      description: "Complete business intelligence aggregation workflow"
      steps:
        - create_aggregation
        - retrieve_aggregation
        - list_aggregations
        - create_aggregation_job
        - check_job_status
        - list_jobs
    - name: "cross_service_integration"
      description: "Integration between different services"
      steps:
        - create_market_analysis
        - create_competitive_analysis
        - create_growth_analytics
        - create_aggregation
        - validate_aggregation_results

# Error Handling Test Configuration
error_handling_tests:
  # Error scenarios to test
  error_scenarios:
    - name: "invalid_json"
      description: "Test handling of invalid JSON"
      test_cases:
        - malformed_json
        - empty_json
        - invalid_syntax
    - name: "missing_required_fields"
      description: "Test handling of missing required fields"
      test_cases:
        - missing_business_id
        - missing_industry
        - missing_geographic_area
        - missing_time_range
    - name: "invalid_data_types"
      description: "Test handling of invalid data types"
      test_cases:
        - invalid_business_id_type
        - invalid_industry_type
        - invalid_competitors_type
        - invalid_analysis_types_type
    - name: "invalid_time_ranges"
      description: "Test handling of invalid time ranges"
      test_cases:
        - end_date_before_start_date
        - invalid_date_format
        - missing_time_zone
        - future_start_date
    - name: "invalid_analysis_types"
      description: "Test handling of invalid analysis types"
      test_cases:
        - empty_analysis_types
        - invalid_analysis_type
        - duplicate_analysis_types
    - name: "non_existent_resources"
      description: "Test handling of non-existent resources"
      test_cases:
        - non_existent_analysis
        - non_existent_job
        - non_existent_aggregation

# Test Validation Rules
validation_rules:
  # Response validation
  response_validation:
    required_fields:
      - id
      - status
      - created_at
      - updated_at
    optional_fields:
      - score
      - insights
      - recommendations
      - summary
    field_types:
      id: string
      status: string
      created_at: string
      updated_at: string
      score: number
      insights: array
      recommendations: array
      summary: object

  # Status code validation
  status_codes:
    success: 200
    bad_request: 400
    not_found: 404
    internal_server_error: 500

  # Response time validation
  response_times:
    market_analysis_creation: 100ms
    competitive_analysis_creation: 100ms
    growth_analytics_creation: 100ms
    aggregation_creation: 150ms
    analysis_retrieval: 50ms
    analysis_listing: 50ms
    job_creation: 50ms
    job_status_check: 50ms

# Test Reporting Configuration
test_reporting:
  # Report formats
  formats:
    - json
    - html
    - xml
    - junit

  # Report locations
  output_directory: "./test/reports"
  coverage_directory: "./test/coverage"

  # Report settings
  include_coverage: true
  include_performance: true
  include_error_details: true
  include_test_data: false

# Test Environment Variables
environment_variables:
  # Test-specific environment variables
  TEST_ENVIRONMENT: "business_intelligence_test"
  TEST_TIMEOUT: "30s"
  TEST_RETRY_ATTEMPTS: "3"
  TEST_RETRY_DELAY: "1s"
  
  # API configuration
  API_BASE_URL: "http://localhost:8080"
  API_VERSION: "v2"
  API_TIMEOUT: "30s"
  
  # Database configuration (if needed)
  TEST_DB_URL: "postgres://test:test@localhost:5432/test_db"
  TEST_DB_TIMEOUT: "10s"
  
  # Cache configuration (if needed)
  TEST_CACHE_URL: "redis://localhost:6379"
  TEST_CACHE_TIMEOUT: "5s"

# Test Cleanup Configuration
test_cleanup:
  # Cleanup settings
  cleanup_after_tests: true
  cleanup_test_data: true
  cleanup_temp_files: true
  cleanup_logs: false
  
  # Cleanup timeouts
  cleanup_timeout: 30s
  force_cleanup: false
