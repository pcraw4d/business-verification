{"version":3,"file":"session-manager.55ba58f2.js","mappings":"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","sources":["webpack://KYBPlatform/webpack/universalModuleDefinition","webpack://KYBPlatform/./components/session-manager.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"KYBPlatform\"] = factory();\n\telse\n\t\troot[\"KYBPlatform\"] = factory();\n})(self, function() {\nreturn ","/**\n * Session Manager Component\n * Manages single merchant session with state persistence and switching capabilities\n * Ensures only one merchant is active at a time with proper overview reset\n */\nclass SessionManager {\n    constructor(options = {}) {\n        this.container = options.container || document.body;\n        this.apiBaseUrl = options.apiBaseUrl || '/api/v1';\n        this.storageKey = options.storageKey || 'merchant_session';\n        this.sessionTimeout = options.sessionTimeout || 30 * 60 * 1000; // 30 minutes\n        this.currentSession = null;\n        this.sessionHistory = [];\n        this.maxHistorySize = options.maxHistorySize || 10;\n        this.isSessionActive = false;\n        this.sessionTimer = null;\n        \n        // Event callbacks\n        this.onSessionStart = options.onSessionStart || null;\n        this.onSessionEnd = options.onSessionEnd || null;\n        this.onSessionSwitch = options.onSessionSwitch || null;\n        this.onSessionTimeout = options.onSessionTimeout || null;\n        this.onOverviewReset = options.onOverviewReset || null;\n        \n        this.init();\n    }\n\n    init() {\n        this.loadSessionFromStorage();\n        this.createSessionInterface();\n        this.bindEvents();\n        this.startSessionMonitoring();\n    }\n\n    createSessionInterface() {\n        const sessionHTML = `\n            <div class=\"session-manager-container\" id=\"sessionManagerContainer\">\n                <div class=\"session-header\">\n                    <div class=\"session-info\">\n                        <h3 class=\"session-title\">\n                            <i class=\"fas fa-user-circle\"></i>\n                            Active Session\n                        </h3>\n                        <div class=\"session-status\" id=\"sessionStatus\">\n                            <span class=\"status-indicator\" id=\"statusIndicator\"></span>\n                            <span class=\"status-text\" id=\"statusText\">No active session</span>\n                        </div>\n                    </div>\n                    <div class=\"session-actions\">\n                        <button class=\"btn btn-outline btn-sm\" id=\"sessionHistoryBtn\" disabled>\n                            <i class=\"fas fa-history\"></i>\n                            History\n                        </button>\n                        <button class=\"btn btn-danger btn-sm\" id=\"endSessionBtn\" disabled>\n                            <i class=\"fas fa-sign-out-alt\"></i>\n                            End Session\n                        </button>\n                    </div>\n                </div>\n\n                <div class=\"session-details\" id=\"sessionDetails\" style=\"display: none;\">\n                    <div class=\"merchant-info\">\n                        <div class=\"merchant-avatar\" id=\"merchantAvatar\">\n                            <i class=\"fas fa-building\"></i>\n                        </div>\n                        <div class=\"merchant-details\">\n                            <div class=\"merchant-name\" id=\"merchantName\">-</div>\n                            <div class=\"merchant-meta\">\n                                <span class=\"merchant-id\" id=\"merchantId\">-</span>\n                                <span class=\"session-duration\" id=\"sessionDuration\">-</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"session-timer\">\n                        <div class=\"timer-label\">Session Timeout</div>\n                        <div class=\"timer-progress\">\n                            <div class=\"timer-bar\" id=\"timerBar\"></div>\n                        </div>\n                        <div class=\"timer-text\" id=\"timerText\">30:00</div>\n                    </div>\n                </div>\n\n                <div class=\"session-history\" id=\"sessionHistory\" style=\"display: none;\">\n                    <div class=\"history-header\">\n                        <h4>Recent Sessions</h4>\n                        <button class=\"btn btn-outline btn-sm\" id=\"closeHistoryBtn\">\n                            <i class=\"fas fa-times\"></i>\n                        </button>\n                    </div>\n                    <div class=\"history-list\" id=\"historyList\">\n                        <div class=\"no-history\">\n                            <i class=\"fas fa-history\"></i>\n                            <p>No recent sessions</p>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"session-switch-modal\" id=\"sessionSwitchModal\" style=\"display: none;\">\n                    <div class=\"modal-overlay\">\n                        <div class=\"modal-content\">\n                            <div class=\"modal-header\">\n                                <h4>Switch Merchant Session</h4>\n                                <button class=\"btn btn-outline btn-sm\" id=\"closeSwitchModalBtn\">\n                                    <i class=\"fas fa-times\"></i>\n                                </button>\n                            </div>\n                            <div class=\"modal-body\">\n                                <div class=\"current-session-warning\">\n                                    <i class=\"fas fa-exclamation-triangle\"></i>\n                                    <p>You are about to switch from the current merchant session. This will reset the overview and start a new session.</p>\n                                </div>\n                                <div class=\"new-merchant-info\" id=\"newMerchantInfo\">\n                                    <!-- New merchant details will be populated here -->\n                                </div>\n                            </div>\n                            <div class=\"modal-footer\">\n                                <button class=\"btn btn-secondary\" id=\"cancelSwitchBtn\">Cancel</button>\n                                <button class=\"btn btn-primary\" id=\"confirmSwitchBtn\">Switch Session</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;\n\n        this.container.innerHTML = sessionHTML;\n        this.addStyles();\n    }\n\n    addStyles() {\n        const styles = `\n            <style>\n                .session-manager-container {\n                    background: white;\n                    border-radius: 12px;\n                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n                    padding: 20px;\n                    margin-bottom: 20px;\n                    border-left: 4px solid #3498db;\n                }\n\n                .session-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 16px;\n                }\n\n                .session-info {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 8px;\n                }\n\n                .session-title {\n                    display: flex;\n                    align-items: center;\n                    gap: 8px;\n                    margin: 0;\n                    color: #2c3e50;\n                    font-size: 1.2rem;\n                    font-weight: 600;\n                }\n\n                .session-title i {\n                    color: #3498db;\n                }\n\n                .session-status {\n                    display: flex;\n                    align-items: center;\n                    gap: 8px;\n                }\n\n                .status-indicator {\n                    width: 12px;\n                    height: 12px;\n                    border-radius: 50%;\n                    background: #95a5a6;\n                    transition: all 0.3s ease;\n                }\n\n                .status-indicator.active {\n                    background: #27ae60;\n                    box-shadow: 0 0 8px rgba(39, 174, 96, 0.4);\n                }\n\n                .status-indicator.warning {\n                    background: #f39c12;\n                    box-shadow: 0 0 8px rgba(243, 156, 18, 0.4);\n                }\n\n                .status-indicator.danger {\n                    background: #e74c3c;\n                    box-shadow: 0 0 8px rgba(231, 76, 60, 0.4);\n                }\n\n                .status-text {\n                    font-size: 0.9rem;\n                    color: #6c757d;\n                    font-weight: 500;\n                }\n\n                .session-actions {\n                    display: flex;\n                    gap: 8px;\n                }\n\n                .btn {\n                    padding: 8px 16px;\n                    border: none;\n                    border-radius: 6px;\n                    font-size: 0.85rem;\n                    font-weight: 600;\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                    display: flex;\n                    align-items: center;\n                    gap: 6px;\n                    text-decoration: none;\n                }\n\n                .btn:disabled {\n                    opacity: 0.6;\n                    cursor: not-allowed;\n                }\n\n                .btn-sm {\n                    padding: 6px 12px;\n                    font-size: 0.8rem;\n                }\n\n                .btn-outline {\n                    background: transparent;\n                    color: #3498db;\n                    border: 2px solid #3498db;\n                }\n\n                .btn-outline:hover:not(:disabled) {\n                    background: #3498db;\n                    color: white;\n                }\n\n                .btn-danger {\n                    background: #e74c3c;\n                    color: white;\n                }\n\n                .btn-danger:hover:not(:disabled) {\n                    background: #c0392b;\n                    transform: translateY(-1px);\n                }\n\n                .btn-secondary {\n                    background: #6c757d;\n                    color: white;\n                }\n\n                .btn-secondary:hover:not(:disabled) {\n                    background: #5a6268;\n                }\n\n                .btn-primary {\n                    background: #3498db;\n                    color: white;\n                }\n\n                .btn-primary:hover:not(:disabled) {\n                    background: #2980b9;\n                }\n\n                .session-details {\n                    background: #f8f9fa;\n                    border-radius: 8px;\n                    padding: 16px;\n                    margin-top: 16px;\n                }\n\n                .merchant-info {\n                    display: flex;\n                    align-items: center;\n                    gap: 16px;\n                    margin-bottom: 16px;\n                }\n\n                .merchant-avatar {\n                    width: 50px;\n                    height: 50px;\n                    border-radius: 50%;\n                    background: linear-gradient(135deg, #3498db, #2980b9);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    color: white;\n                    font-size: 1.5rem;\n                    flex-shrink: 0;\n                }\n\n                .merchant-details {\n                    flex: 1;\n                }\n\n                .merchant-name {\n                    font-size: 1.1rem;\n                    font-weight: 600;\n                    color: #2c3e50;\n                    margin-bottom: 4px;\n                }\n\n                .merchant-meta {\n                    display: flex;\n                    gap: 16px;\n                    font-size: 0.85rem;\n                    color: #6c757d;\n                }\n\n                .session-timer {\n                    background: white;\n                    border-radius: 6px;\n                    padding: 12px;\n                }\n\n                .timer-label {\n                    font-size: 0.8rem;\n                    color: #6c757d;\n                    margin-bottom: 8px;\n                    font-weight: 600;\n                }\n\n                .timer-progress {\n                    width: 100%;\n                    height: 6px;\n                    background: #e9ecef;\n                    border-radius: 3px;\n                    overflow: hidden;\n                    margin-bottom: 8px;\n                }\n\n                .timer-bar {\n                    height: 100%;\n                    background: linear-gradient(90deg, #27ae60, #f39c12, #e74c3c);\n                    width: 100%;\n                    transition: width 1s linear;\n                }\n\n                .timer-text {\n                    font-size: 0.9rem;\n                    font-weight: 600;\n                    color: #2c3e50;\n                    text-align: center;\n                }\n\n                .session-history {\n                    background: #f8f9fa;\n                    border-radius: 8px;\n                    padding: 16px;\n                    margin-top: 16px;\n                }\n\n                .history-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 16px;\n                }\n\n                .history-header h4 {\n                    margin: 0;\n                    color: #2c3e50;\n                    font-size: 1rem;\n                }\n\n                .history-list {\n                    max-height: 300px;\n                    overflow-y: auto;\n                }\n\n                .history-item {\n                    display: flex;\n                    align-items: center;\n                    gap: 12px;\n                    padding: 12px;\n                    background: white;\n                    border-radius: 6px;\n                    margin-bottom: 8px;\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                }\n\n                .history-item:hover {\n                    background: #e3f2fd;\n                    transform: translateX(4px);\n                }\n\n                .history-avatar {\n                    width: 35px;\n                    height: 35px;\n                    border-radius: 50%;\n                    background: linear-gradient(135deg, #95a5a6, #7f8c8d);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    color: white;\n                    font-size: 0.9rem;\n                    flex-shrink: 0;\n                }\n\n                .history-details {\n                    flex: 1;\n                }\n\n                .history-name {\n                    font-weight: 600;\n                    color: #2c3e50;\n                    font-size: 0.9rem;\n                    margin-bottom: 2px;\n                }\n\n                .history-meta {\n                    font-size: 0.8rem;\n                    color: #6c757d;\n                }\n\n                .no-history {\n                    text-align: center;\n                    padding: 40px 20px;\n                    color: #6c757d;\n                }\n\n                .no-history i {\n                    font-size: 2rem;\n                    color: #dee2e6;\n                    margin-bottom: 12px;\n                }\n\n                .no-history p {\n                    margin: 0;\n                    font-size: 0.9rem;\n                }\n\n                .session-switch-modal {\n                    position: fixed;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    z-index: 10000;\n                }\n\n                .modal-overlay {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    background: rgba(0, 0, 0, 0.5);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    padding: 20px;\n                }\n\n                .modal-content {\n                    background: white;\n                    border-radius: 12px;\n                    max-width: 500px;\n                    width: 100%;\n                    max-height: 90vh;\n                    overflow-y: auto;\n                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);\n                }\n\n                .modal-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding: 20px;\n                    border-bottom: 2px solid #f8f9fa;\n                }\n\n                .modal-header h4 {\n                    margin: 0;\n                    color: #2c3e50;\n                    font-size: 1.2rem;\n                }\n\n                .modal-body {\n                    padding: 20px;\n                }\n\n                .current-session-warning {\n                    display: flex;\n                    align-items: flex-start;\n                    gap: 12px;\n                    background: #fff3cd;\n                    border: 1px solid #ffeaa7;\n                    border-radius: 8px;\n                    padding: 16px;\n                    margin-bottom: 20px;\n                }\n\n                .current-session-warning i {\n                    color: #f39c12;\n                    font-size: 1.2rem;\n                    margin-top: 2px;\n                }\n\n                .current-session-warning p {\n                    margin: 0;\n                    color: #856404;\n                    font-size: 0.9rem;\n                    line-height: 1.4;\n                }\n\n                .new-merchant-info {\n                    background: #f8f9fa;\n                    border-radius: 8px;\n                    padding: 16px;\n                }\n\n                .modal-footer {\n                    display: flex;\n                    justify-content: flex-end;\n                    gap: 12px;\n                    padding: 20px;\n                    border-top: 2px solid #f8f9fa;\n                }\n\n                /* Responsive Design */\n                @media (max-width: 768px) {\n                    .session-manager-container {\n                        padding: 16px;\n                    }\n\n                    .session-header {\n                        flex-direction: column;\n                        gap: 12px;\n                        align-items: flex-start;\n                    }\n\n                    .session-actions {\n                        width: 100%;\n                        justify-content: flex-end;\n                    }\n\n                    .merchant-info {\n                        flex-direction: column;\n                        align-items: flex-start;\n                        gap: 12px;\n                    }\n\n                    .merchant-meta {\n                        flex-direction: column;\n                        gap: 4px;\n                    }\n\n                    .modal-content {\n                        margin: 10px;\n                        max-width: none;\n                    }\n\n                    .modal-footer {\n                        flex-direction: column;\n                    }\n                }\n\n                /* Animation for session status changes */\n                .status-indicator {\n                    animation: pulse 2s infinite;\n                }\n\n                @keyframes pulse {\n                    0% { opacity: 1; }\n                    50% { opacity: 0.7; }\n                    100% { opacity: 1; }\n                }\n\n                /* Loading state */\n                .loading {\n                    opacity: 0.6;\n                    pointer-events: none;\n                }\n            </style>\n        `;\n\n        // Add styles to head if not already added\n        if (!document.querySelector('#session-manager-styles')) {\n            const styleElement = document.createElement('style');\n            styleElement.id = 'session-manager-styles';\n            styleElement.textContent = styles;\n            document.head.appendChild(styleElement);\n        }\n    }\n\n    bindEvents() {\n        const endSessionBtn = document.getElementById('endSessionBtn');\n        const sessionHistoryBtn = document.getElementById('sessionHistoryBtn');\n        const closeHistoryBtn = document.getElementById('closeHistoryBtn');\n        const closeSwitchModalBtn = document.getElementById('closeSwitchModalBtn');\n        const cancelSwitchBtn = document.getElementById('cancelSwitchBtn');\n        const confirmSwitchBtn = document.getElementById('confirmSwitchBtn');\n\n        // End session button\n        endSessionBtn.addEventListener('click', () => {\n            this.endCurrentSession();\n        });\n\n        // Session history button\n        sessionHistoryBtn.addEventListener('click', () => {\n            this.toggleHistory();\n        });\n\n        // Close history button\n        closeHistoryBtn.addEventListener('click', () => {\n            this.hideHistory();\n        });\n\n        // Close switch modal buttons\n        closeSwitchModalBtn.addEventListener('click', () => {\n            this.hideSwitchModal();\n        });\n\n        cancelSwitchBtn.addEventListener('click', () => {\n            this.hideSwitchModal();\n        });\n\n        confirmSwitchBtn.addEventListener('click', () => {\n            this.confirmSessionSwitch();\n        });\n\n        // Keyboard shortcuts\n        document.addEventListener('keydown', (e) => {\n            if (e.ctrlKey || e.metaKey) {\n                switch (e.key) {\n                    case 'e':\n                        e.preventDefault();\n                        if (this.isSessionActive) {\n                            this.endCurrentSession();\n                        }\n                        break;\n                    case 'h':\n                        e.preventDefault();\n                        this.toggleHistory();\n                        break;\n                }\n            }\n        });\n\n        // Handle page visibility changes\n        document.addEventListener('visibilitychange', () => {\n            if (document.hidden) {\n                this.pauseSessionMonitoring();\n            } else {\n                this.resumeSessionMonitoring();\n            }\n        });\n\n        // Handle beforeunload to save session state\n        window.addEventListener('beforeunload', () => {\n            this.saveSessionToStorage();\n        });\n    }\n\n    // Session Management Methods\n    startSession(merchant) {\n        if (this.isSessionActive) {\n            this.showSwitchModal(merchant);\n            return;\n        }\n\n        this.currentSession = {\n            merchant: merchant,\n            startTime: new Date(),\n            lastActivity: new Date(),\n            sessionId: this.generateSessionId()\n        };\n\n        this.isSessionActive = true;\n        this.updateSessionUI();\n        this.startSessionTimer();\n        this.saveSessionToStorage();\n\n        // Call callback\n        if (this.onSessionStart) {\n            this.onSessionStart(this.currentSession);\n        }\n\n        console.log(`Session started for merchant: ${merchant.name}`);\n    }\n\n    endCurrentSession() {\n        if (!this.isSessionActive) return;\n\n        // Add to history\n        this.addToHistory(this.currentSession);\n\n        // Call callback\n        if (this.onSessionEnd) {\n            this.onSessionEnd(this.currentSession);\n        }\n\n        // Reset overview\n        if (this.onOverviewReset) {\n            this.onOverviewReset();\n        }\n\n        this.currentSession = null;\n        this.isSessionActive = false;\n        this.clearSessionTimer();\n        this.updateSessionUI();\n        this.saveSessionToStorage();\n\n        console.log('Session ended');\n    }\n\n    switchSession(merchant) {\n        if (!this.isSessionActive) {\n            this.startSession(merchant);\n            return;\n        }\n\n        this.showSwitchModal(merchant);\n    }\n\n    showSwitchModal(merchant) {\n        const modal = document.getElementById('sessionSwitchModal');\n        const newMerchantInfo = document.getElementById('newMerchantInfo');\n\n        newMerchantInfo.innerHTML = `\n            <div class=\"merchant-info\">\n                <div class=\"merchant-avatar\">\n                    ${merchant.name.charAt(0).toUpperCase()}\n                </div>\n                <div class=\"merchant-details\">\n                    <div class=\"merchant-name\">${merchant.name}</div>\n                    <div class=\"merchant-meta\">\n                        <span>ID: ${merchant.id}</span>\n                        <span>Industry: ${merchant.industry || 'N/A'}</span>\n                    </div>\n                </div>\n            </div>\n        `;\n\n        modal.style.display = 'block';\n        this.pendingMerchant = merchant;\n    }\n\n    hideSwitchModal() {\n        const modal = document.getElementById('sessionSwitchModal');\n        modal.style.display = 'none';\n        this.pendingMerchant = null;\n    }\n\n    confirmSessionSwitch() {\n        if (!this.pendingMerchant) return;\n\n        // End current session\n        this.endCurrentSession();\n\n        // Start new session\n        this.startSession(this.pendingMerchant);\n\n        // Call callback\n        if (this.onSessionSwitch) {\n            this.onSessionSwitch(this.pendingMerchant);\n        }\n\n        this.hideSwitchModal();\n    }\n\n    // Session Timer Management\n    startSessionTimer() {\n        this.clearSessionTimer();\n        this.updateTimer();\n        this.sessionTimer = setInterval(() => {\n            this.updateTimer();\n            this.checkSessionTimeout();\n        }, 1000);\n    }\n\n    clearSessionTimer() {\n        if (this.sessionTimer) {\n            clearInterval(this.sessionTimer);\n            this.sessionTimer = null;\n        }\n    }\n\n    updateTimer() {\n        if (!this.isSessionActive || !this.currentSession) return;\n\n        const now = new Date();\n        const elapsed = now - this.currentSession.startTime;\n        const remaining = this.sessionTimeout - elapsed;\n\n        if (remaining <= 0) {\n            this.handleSessionTimeout();\n            return;\n        }\n\n        const minutes = Math.floor(remaining / 60000);\n        const seconds = Math.floor((remaining % 60000) / 1000);\n        const progress = (remaining / this.sessionTimeout) * 100;\n\n        const timerText = document.getElementById('timerText');\n        const timerBar = document.getElementById('timerBar');\n        const statusIndicator = document.getElementById('statusIndicator');\n\n        if (timerText) {\n            timerText.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n        }\n\n        if (timerBar) {\n            timerBar.style.width = `${progress}%`;\n        }\n\n        // Update status indicator based on remaining time\n        if (statusIndicator) {\n            statusIndicator.className = 'status-indicator';\n            if (remaining < 5 * 60 * 1000) { // Less than 5 minutes\n                statusIndicator.classList.add('danger');\n            } else if (remaining < 10 * 60 * 1000) { // Less than 10 minutes\n                statusIndicator.classList.add('warning');\n            } else {\n                statusIndicator.classList.add('active');\n            }\n        }\n    }\n\n    checkSessionTimeout() {\n        if (!this.isSessionActive || !this.currentSession) return;\n\n        const now = new Date();\n        const elapsed = now - this.currentSession.startTime;\n\n        if (elapsed >= this.sessionTimeout) {\n            this.handleSessionTimeout();\n        }\n    }\n\n    handleSessionTimeout() {\n        console.log('Session timeout reached');\n        \n        // Call callback\n        if (this.onSessionTimeout) {\n            this.onSessionTimeout(this.currentSession);\n        }\n\n        // End session\n        this.endCurrentSession();\n    }\n\n    // Session History Management\n    addToHistory(session) {\n        const historyItem = {\n            merchant: session.merchant,\n            startTime: session.startTime,\n            endTime: new Date(),\n            duration: new Date() - session.startTime,\n            sessionId: session.sessionId\n        };\n\n        this.sessionHistory.unshift(historyItem);\n\n        // Limit history size\n        if (this.sessionHistory.length > this.maxHistorySize) {\n            this.sessionHistory = this.sessionHistory.slice(0, this.maxHistorySize);\n        }\n\n        this.saveSessionToStorage();\n    }\n\n    toggleHistory() {\n        const history = document.getElementById('sessionHistory');\n        if (history.style.display === 'none') {\n            this.showHistory();\n        } else {\n            this.hideHistory();\n        }\n    }\n\n    showHistory() {\n        const history = document.getElementById('sessionHistory');\n        const historyList = document.getElementById('historyList');\n\n        if (this.sessionHistory.length === 0) {\n            historyList.innerHTML = `\n                <div class=\"no-history\">\n                    <i class=\"fas fa-history\"></i>\n                    <p>No recent sessions</p>\n                </div>\n            `;\n        } else {\n            historyList.innerHTML = this.sessionHistory.map(item => `\n                <div class=\"history-item\" data-session-id=\"${item.sessionId}\">\n                    <div class=\"history-avatar\">\n                        ${item.merchant.name.charAt(0).toUpperCase()}\n                    </div>\n                    <div class=\"history-details\">\n                        <div class=\"history-name\">${item.merchant.name}</div>\n                        <div class=\"history-meta\">\n                            ${this.formatDate(item.startTime)} - ${this.formatDuration(item.duration)}\n                        </div>\n                    </div>\n                </div>\n            `).join('');\n\n            // Add click handlers for history items\n            historyList.querySelectorAll('.history-item').forEach(item => {\n                item.addEventListener('click', () => {\n                    const sessionId = item.dataset.sessionId;\n                    const historyItem = this.sessionHistory.find(h => h.sessionId === sessionId);\n                    if (historyItem) {\n                        this.switchSession(historyItem.merchant);\n                    }\n                });\n            });\n        }\n\n        history.style.display = 'block';\n    }\n\n    hideHistory() {\n        const history = document.getElementById('sessionHistory');\n        history.style.display = 'none';\n    }\n\n    // UI Update Methods\n    updateSessionUI() {\n        const sessionDetails = document.getElementById('sessionDetails');\n        const endSessionBtn = document.getElementById('endSessionBtn');\n        const sessionHistoryBtn = document.getElementById('sessionHistoryBtn');\n        const statusIndicator = document.getElementById('statusIndicator');\n        const statusText = document.getElementById('statusText');\n\n        if (this.isSessionActive && this.currentSession) {\n            // Show session details\n            sessionDetails.style.display = 'block';\n            endSessionBtn.disabled = false;\n            sessionHistoryBtn.disabled = false;\n\n            // Update merchant info\n            document.getElementById('merchantAvatar').innerHTML = \n                this.currentSession.merchant.name.charAt(0).toUpperCase();\n            document.getElementById('merchantName').textContent = this.currentSession.merchant.name;\n            document.getElementById('merchantId').textContent = `ID: ${this.currentSession.merchant.id}`;\n\n            // Update status\n            statusIndicator.className = 'status-indicator active';\n            statusText.textContent = 'Active session';\n        } else {\n            // Hide session details\n            sessionDetails.style.display = 'none';\n            endSessionBtn.disabled = true;\n            sessionHistoryBtn.disabled = this.sessionHistory.length === 0;\n\n            // Update status\n            statusIndicator.className = 'status-indicator';\n            statusText.textContent = 'No active session';\n        }\n    }\n\n    // Storage Methods\n    saveSessionToStorage() {\n        const sessionData = {\n            currentSession: this.currentSession,\n            sessionHistory: this.sessionHistory,\n            timestamp: new Date().toISOString()\n        };\n\n        try {\n            localStorage.setItem(this.storageKey, JSON.stringify(sessionData));\n        } catch (error) {\n            console.error('Failed to save session to storage:', error);\n        }\n    }\n\n    loadSessionFromStorage() {\n        try {\n            const sessionData = localStorage.getItem(this.storageKey);\n            if (sessionData) {\n                const parsed = JSON.parse(sessionData);\n                \n                // Check if session is still valid (not expired)\n                if (parsed.currentSession) {\n                    const sessionStart = new Date(parsed.currentSession.startTime);\n                    const now = new Date();\n                    const elapsed = now - sessionStart;\n\n                    if (elapsed < this.sessionTimeout) {\n                        this.currentSession = parsed.currentSession;\n                        this.isSessionActive = true;\n                    } else {\n                        // Session expired, add to history\n                        this.addToHistory(parsed.currentSession);\n                    }\n                }\n\n                this.sessionHistory = parsed.sessionHistory || [];\n            }\n        } catch (error) {\n            console.error('Failed to load session from storage:', error);\n            this.sessionHistory = [];\n        }\n    }\n\n    // Monitoring Methods\n    startSessionMonitoring() {\n        // Monitor for user activity\n        const activityEvents = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'];\n        \n        activityEvents.forEach(event => {\n            document.addEventListener(event, () => {\n                this.updateLastActivity();\n            }, true);\n        });\n    }\n\n    pauseSessionMonitoring() {\n        // Pause timer when page is not visible\n        this.clearSessionTimer();\n    }\n\n    resumeSessionMonitoring() {\n        // Resume timer when page becomes visible\n        if (this.isSessionActive) {\n            this.startSessionTimer();\n        }\n    }\n\n    updateLastActivity() {\n        if (this.isSessionActive && this.currentSession) {\n            this.currentSession.lastActivity = new Date();\n        }\n    }\n\n    // Utility Methods\n    generateSessionId() {\n        return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    }\n\n    formatDate(date) {\n        return new Date(date).toLocaleDateString('en-US', {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    }\n\n    formatDuration(milliseconds) {\n        const minutes = Math.floor(milliseconds / 60000);\n        const hours = Math.floor(minutes / 60);\n        \n        if (hours > 0) {\n            return `${hours}h ${minutes % 60}m`;\n        } else {\n            return `${minutes}m`;\n        }\n    }\n\n    // Public API Methods\n    getCurrentSession() {\n        return this.currentSession;\n    }\n\n    isActive() {\n        return this.isSessionActive;\n    }\n\n    getSessionHistory() {\n        return [...this.sessionHistory];\n    }\n\n    clearHistory() {\n        this.sessionHistory = [];\n        this.saveSessionToStorage();\n        this.updateSessionUI();\n    }\n\n    setSessionTimeout(timeout) {\n        this.sessionTimeout = timeout;\n        if (this.isSessionActive) {\n            this.startSessionTimer();\n        }\n    }\n\n    destroy() {\n        this.clearSessionTimer();\n        this.saveSessionToStorage();\n        if (this.container) {\n            this.container.innerHTML = '';\n        }\n    }\n}\n\n// Export for use in other scripts\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = SessionManager;\n}\n\n// Auto-initialize if container is found\ndocument.addEventListener('DOMContentLoaded', () => {\n    const sessionContainer = document.getElementById('sessionManagerContainer');\n    if (sessionContainer && !window.sessionManager) {\n        window.sessionManager = new SessionManager({\n            container: sessionContainer\n        });\n    }\n});\n"],"names":["root","factory","exports","module","define","amd","self","SessionManager","options","arguments","length","undefined","_classCallCheck","this","container","document","body","apiBaseUrl","storageKey","sessionTimeout","currentSession","sessionHistory","maxHistorySize","isSessionActive","sessionTimer","onSessionStart","onSessionEnd","onSessionSwitch","onSessionTimeout","onOverviewReset","init","key","value","loadSessionFromStorage","createSessionInterface","bindEvents","startSessionMonitoring","innerHTML","addStyles","querySelector","styleElement","createElement","id","textContent","head","appendChild","_this","endSessionBtn","getElementById","sessionHistoryBtn","closeHistoryBtn","closeSwitchModalBtn","cancelSwitchBtn","confirmSwitchBtn","addEventListener","endCurrentSession","toggleHistory","hideHistory","hideSwitchModal","confirmSessionSwitch","e","ctrlKey","metaKey","preventDefault","hidden","pauseSessionMonitoring","resumeSessionMonitoring","window","saveSessionToStorage","merchant","showSwitchModal","startTime","Date","lastActivity","sessionId","generateSessionId","updateSessionUI","startSessionTimer","addToHistory","clearSessionTimer","startSession","modal","concat","name","charAt","toUpperCase","industry","style","display","pendingMerchant","_this2","updateTimer","setInterval","checkSessionTimeout","clearInterval","elapsed","remaining","handleSessionTimeout","minutes","Math","floor","seconds","progress","timerText","timerBar","statusIndicator","toString","padStart","width","className","classList","add","session","historyItem","endTime","duration","unshift","slice","showHistory","_this3","history","historyList","map","item","formatDate","formatDuration","join","querySelectorAll","forEach","dataset","find","h","switchSession","sessionDetails","statusText","disabled","sessionData","timestamp","toISOString","localStorage","setItem","JSON","stringify","error","getItem","parsed","parse","sessionStart","_this4","event","updateLastActivity","now","random","substr","date","toLocaleDateString","year","month","day","hour","minute","milliseconds","hours","_toConsumableArray","timeout","sessionContainer","sessionManager"],"sourceRoot":""}