"use strict";(self.webpackChunkKYBPlatform=self.webpackChunkKYBPlatform||[]).push([[279],{5551:function(e,t,n){n.r(t);n(2675),n(9463),n(2259),n(5700),n(8706),n(2008),n(113),n(3418),n(3792),n(8598),n(2062),n(4782),n(9572),n(2010),n(2892),n(3851),n(1278),n(875),n(9432),n(287),n(6099),n(3362),n(7495),n(8781),n(7764),n(1392),n(2762),n(3500),n(2953),n(3296),n(7208),n(8408);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return u(l,"_invoke",function(n,r,a){var i,c,s,l=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,c=0,s=e,m.n=n,o}};function h(n,r){for(c=n,s=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],h=m.p,p=i[2];n>3?(a=p===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=h&&((a=n<2&&h<i[1])?(c=0,m.v=r,m.n=i[1]):h<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,m.n=p,c=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,s=p;(t=c<2?e:s)||!d;){i||(c?c<3?(c>1&&(m.n=-1),h(c,s)):m.n=s:m.v=s);try{if(l=2,i){if(c||(a="next"),t=i[a]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),c=1);i=e}else if((t=(d=m.n<0)?s:n.call(r,m))!==o)break}catch(t){i=e,c=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function c(){}function s(){}function d(){}t=Object.getPrototypeOf;var m=[][r]?t(t([][r]())):(u(t={},r,function(){return this}),t),h=d.prototype=c.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,a,"GeneratorFunction")),e.prototype=Object.create(h),e}return s.prototype=d,u(h,"constructor",d),u(d,"constructor",s),s.displayName="GeneratorFunction",u(d,a,"GeneratorFunction"),u(h),u(h,a,"Generator"),u(h,r,function(){return this}),u(h,"toString",function(){return"[object Generator]"}),(l=function(){return{w:i,m:p}})()}function u(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,n,r){function i(t,n){u(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},u(e,t,n,r)}function d(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){d(i,r,a,o,c,"next",e)}function c(e){d(i,r,a,o,c,"throw",e)}o(void 0)})}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}e=n.hmd(e);var f=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container||document.body,this.apiBaseUrl=t.apiBaseUrl||"/api/v1",this.debounceDelay=t.debounceDelay||300,this.pageSize=t.pageSize||20,this.currentPage=1,this.currentFilters={searchQuery:"",portfolioType:null,riskLevel:null,industry:"",status:""},this.searchTimeout=null,this.isLoading=!1,this.merchants=[],this.totalCount=0,this.totalPages=0,this.onMerchantSelect=t.onMerchantSelect||null,this.onSearchResults=t.onSearchResults||null,this.onFilterChange=t.onFilterChange||null,this.init()},t=[{key:"init",value:function(){this.createSearchInterface(),this.bindEvents(),this.loadInitialData()}},{key:"createSearchInterface",value:function(){this.container.innerHTML='\n            <div class="merchant-search-container">\n                <div class="search-header">\n                    <h2 class="search-title">\n                        <i class="fas fa-search"></i>\n                        Merchant Search\n                    </h2>\n                    <div class="search-stats" id="searchStats">\n                        <span class="total-count">0 merchants found</span>\n                    </div>\n                </div>\n\n                <div class="search-controls">\n                    <div class="search-input-group">\n                        <div class="search-input-wrapper">\n                            <input \n                                type="text" \n                                id="merchantSearchInput" \n                                class="search-input" \n                                placeholder="Search by name, industry, or business type..."\n                                autocomplete="off"\n                            >\n                            <button class="search-clear-btn" id="searchClearBtn" style="display: none;">\n                                <i class="fas fa-times"></i>\n                            </button>\n                            <div class="search-loading" id="searchLoading" style="display: none;">\n                                <i class="fas fa-spinner fa-spin"></i>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="filter-controls">\n                        <div class="filter-group">\n                            <label for="portfolioTypeFilter" class="filter-label">\n                                <i class="fas fa-folder"></i>\n                                Portfolio Type\n                            </label>\n                            <select id="portfolioTypeFilter" class="filter-select">\n                                <option value="">All Types</option>\n                                <option value="onboarded">Onboarded</option>\n                                <option value="deactivated">Deactivated</option>\n                                <option value="prospective">Prospective</option>\n                                <option value="pending">Pending</option>\n                            </select>\n                        </div>\n\n                        <div class="filter-group">\n                            <label for="riskLevelFilter" class="filter-label">\n                                <i class="fas fa-exclamation-triangle"></i>\n                                Risk Level\n                            </label>\n                            <select id="riskLevelFilter" class="filter-select">\n                                <option value="">All Levels</option>\n                                <option value="low">Low Risk</option>\n                                <option value="medium">Medium Risk</option>\n                                <option value="high">High Risk</option>\n                            </select>\n                        </div>\n\n                        <div class="filter-group">\n                            <label for="industryFilter" class="filter-label">\n                                <i class="fas fa-industry"></i>\n                                Industry\n                            </label>\n                            <select id="industryFilter" class="filter-select">\n                                <option value="">All Industries</option>\n                                <option value="technology">Technology</option>\n                                <option value="retail">Retail</option>\n                                <option value="finance">Finance</option>\n                                <option value="healthcare">Healthcare</option>\n                                <option value="manufacturing">Manufacturing</option>\n                                <option value="services">Services</option>\n                                <option value="other">Other</option>\n                            </select>\n                        </div>\n\n                        <div class="filter-group">\n                            <label for="statusFilter" class="filter-label">\n                                <i class="fas fa-check-circle"></i>\n                                Status\n                            </label>\n                            <select id="statusFilter" class="filter-select">\n                                <option value="">All Statuses</option>\n                                <option value="active">Active</option>\n                                <option value="inactive">Inactive</option>\n                                <option value="suspended">Suspended</option>\n                                <option value="pending">Pending</option>\n                            </select>\n                        </div>\n\n                        <div class="filter-actions">\n                            <button class="btn btn-secondary" id="clearFiltersBtn">\n                                <i class="fas fa-eraser"></i>\n                                Clear Filters\n                            </button>\n                            <button class="btn btn-primary" id="applyFiltersBtn">\n                                <i class="fas fa-filter"></i>\n                                Apply Filters\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="search-results" id="searchResults">\n                    <div class="results-header">\n                        <div class="results-info">\n                            <span class="results-count" id="resultsCount">No results</span>\n                            <span class="results-pagination" id="resultsPagination"></span>\n                        </div>\n                        <div class="results-actions">\n                            <button class="btn btn-outline" id="exportResultsBtn" disabled>\n                                <i class="fas fa-download"></i>\n                                Export Results\n                            </button>\n                        </div>\n                    </div>\n\n                    <div class="merchants-list" id="merchantsList">\n                        <div class="no-results" id="noResults">\n                            <div class="no-results-icon">\n                                <i class="fas fa-search"></i>\n                            </div>\n                            <h3>No merchants found</h3>\n                            <p>Try adjusting your search criteria or filters</p>\n                        </div>\n                    </div>\n\n                    <div class="pagination" id="pagination" style="display: none;">\n                        <button class="btn btn-outline" id="prevPageBtn" disabled>\n                            <i class="fas fa-chevron-left"></i>\n                            Previous\n                        </button>\n                        <div class="pagination-info">\n                            <span id="paginationInfo">Page 1 of 1</span>\n                        </div>\n                        <button class="btn btn-outline" id="nextPageBtn" disabled>\n                            Next\n                            <i class="fas fa-chevron-right"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        ',this.addStyles()}},{key:"addStyles",value:function(){if(!document.querySelector("#merchant-search-styles")){var e=document.createElement("style");e.id="merchant-search-styles",e.textContent="\n            <style>\n                .merchant-search-container {\n                    background: white;\n                    border-radius: 12px;\n                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n                    padding: 24px;\n                    margin-bottom: 24px;\n                }\n\n                .search-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 24px;\n                    padding-bottom: 16px;\n                    border-bottom: 2px solid #f8f9fa;\n                }\n\n                .search-title {\n                    display: flex;\n                    align-items: center;\n                    gap: 12px;\n                    margin: 0;\n                    color: #2c3e50;\n                    font-size: 1.5rem;\n                    font-weight: 600;\n                }\n\n                .search-title i {\n                    color: #3498db;\n                    font-size: 1.3rem;\n                }\n\n                .search-stats {\n                    display: flex;\n                    align-items: center;\n                    gap: 16px;\n                }\n\n                .total-count {\n                    background: linear-gradient(135deg, #3498db, #2980b9);\n                    color: white;\n                    padding: 8px 16px;\n                    border-radius: 20px;\n                    font-size: 0.9rem;\n                    font-weight: 600;\n                }\n\n                .search-controls {\n                    margin-bottom: 24px;\n                }\n\n                .search-input-group {\n                    margin-bottom: 20px;\n                }\n\n                .search-input-wrapper {\n                    position: relative;\n                    max-width: 600px;\n                }\n\n                .search-input {\n                    width: 100%;\n                    padding: 16px 50px 16px 20px;\n                    border: 2px solid #e9ecef;\n                    border-radius: 12px;\n                    font-size: 1rem;\n                    transition: all 0.3s ease;\n                    background: #f8f9fa;\n                }\n\n                .search-input:focus {\n                    outline: none;\n                    border-color: #3498db;\n                    background: white;\n                    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);\n                }\n\n                .search-clear-btn {\n                    position: absolute;\n                    right: 12px;\n                    top: 50%;\n                    transform: translateY(-50%);\n                    background: none;\n                    border: none;\n                    color: #6c757d;\n                    cursor: pointer;\n                    padding: 8px;\n                    border-radius: 50%;\n                    transition: all 0.3s ease;\n                }\n\n                .search-clear-btn:hover {\n                    background: #e9ecef;\n                    color: #495057;\n                }\n\n                .search-loading {\n                    position: absolute;\n                    right: 12px;\n                    top: 50%;\n                    transform: translateY(-50%);\n                    color: #3498db;\n                }\n\n                .filter-controls {\n                    display: grid;\n                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n                    gap: 16px;\n                    align-items: end;\n                }\n\n                .filter-group {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 8px;\n                }\n\n                .filter-label {\n                    display: flex;\n                    align-items: center;\n                    gap: 8px;\n                    font-weight: 600;\n                    color: #495057;\n                    font-size: 0.9rem;\n                }\n\n                .filter-label i {\n                    color: #6c757d;\n                    font-size: 0.8rem;\n                }\n\n                .filter-select {\n                    padding: 12px 16px;\n                    border: 2px solid #e9ecef;\n                    border-radius: 8px;\n                    font-size: 0.9rem;\n                    background: white;\n                    transition: all 0.3s ease;\n                }\n\n                .filter-select:focus {\n                    outline: none;\n                    border-color: #3498db;\n                    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);\n                }\n\n                .filter-actions {\n                    display: flex;\n                    gap: 12px;\n                    align-items: end;\n                }\n\n                .btn {\n                    padding: 12px 20px;\n                    border: none;\n                    border-radius: 8px;\n                    font-size: 0.9rem;\n                    font-weight: 600;\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                    display: flex;\n                    align-items: center;\n                    gap: 8px;\n                    text-decoration: none;\n                }\n\n                .btn:disabled {\n                    opacity: 0.6;\n                    cursor: not-allowed;\n                }\n\n                .btn-primary {\n                    background: linear-gradient(135deg, #3498db, #2980b9);\n                    color: white;\n                }\n\n                .btn-primary:hover:not(:disabled) {\n                    background: linear-gradient(135deg, #2980b9, #1f5f8b);\n                    transform: translateY(-2px);\n                    box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);\n                }\n\n                .btn-secondary {\n                    background: #6c757d;\n                    color: white;\n                }\n\n                .btn-secondary:hover:not(:disabled) {\n                    background: #5a6268;\n                    transform: translateY(-2px);\n                }\n\n                .btn-outline {\n                    background: transparent;\n                    color: #3498db;\n                    border: 2px solid #3498db;\n                }\n\n                .btn-outline:hover:not(:disabled) {\n                    background: #3498db;\n                    color: white;\n                }\n\n                .search-results {\n                    margin-top: 24px;\n                }\n\n                .results-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 16px;\n                    padding: 16px;\n                    background: #f8f9fa;\n                    border-radius: 8px;\n                }\n\n                .results-info {\n                    display: flex;\n                    align-items: center;\n                    gap: 16px;\n                }\n\n                .results-count {\n                    font-weight: 600;\n                    color: #495057;\n                }\n\n                .results-pagination {\n                    font-size: 0.9rem;\n                    color: #6c757d;\n                }\n\n                .merchants-list {\n                    min-height: 200px;\n                }\n\n                .merchant-item {\n                    display: flex;\n                    align-items: center;\n                    padding: 20px;\n                    border: 2px solid #f8f9fa;\n                    border-radius: 12px;\n                    margin-bottom: 12px;\n                    transition: all 0.3s ease;\n                    cursor: pointer;\n                    background: white;\n                }\n\n                .merchant-item:hover {\n                    border-color: #3498db;\n                    box-shadow: 0 4px 12px rgba(52, 152, 219, 0.1);\n                    transform: translateY(-2px);\n                }\n\n                .merchant-item.selected {\n                    border-color: #3498db;\n                    background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.1));\n                }\n\n                .merchant-avatar {\n                    width: 50px;\n                    height: 50px;\n                    border-radius: 50%;\n                    background: linear-gradient(135deg, #3498db, #2980b9);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    color: white;\n                    font-weight: 600;\n                    font-size: 1.2rem;\n                    margin-right: 16px;\n                    flex-shrink: 0;\n                }\n\n                .merchant-info {\n                    flex: 1;\n                }\n\n                .merchant-name {\n                    font-size: 1.1rem;\n                    font-weight: 600;\n                    color: #2c3e50;\n                    margin-bottom: 4px;\n                }\n\n                .merchant-details {\n                    display: flex;\n                    gap: 16px;\n                    font-size: 0.9rem;\n                    color: #6c757d;\n                }\n\n                .merchant-badges {\n                    display: flex;\n                    gap: 8px;\n                    align-items: center;\n                }\n\n                .badge {\n                    padding: 4px 12px;\n                    border-radius: 20px;\n                    font-size: 0.8rem;\n                    font-weight: 600;\n                    text-transform: uppercase;\n                    letter-spacing: 0.5px;\n                }\n\n                .badge-portfolio {\n                    background: #e3f2fd;\n                    color: #1976d2;\n                }\n\n                .badge-risk-low {\n                    background: #e8f5e8;\n                    color: #2e7d32;\n                }\n\n                .badge-risk-medium {\n                    background: #fff3e0;\n                    color: #f57c00;\n                }\n\n                .badge-risk-high {\n                    background: #ffebee;\n                    color: #d32f2f;\n                }\n\n                .no-results {\n                    text-align: center;\n                    padding: 60px 20px;\n                    color: #6c757d;\n                }\n\n                .no-results-icon {\n                    font-size: 3rem;\n                    color: #dee2e6;\n                    margin-bottom: 16px;\n                }\n\n                .no-results h3 {\n                    margin: 0 0 8px 0;\n                    color: #495057;\n                }\n\n                .no-results p {\n                    margin: 0;\n                    font-size: 0.9rem;\n                }\n\n                .pagination {\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    gap: 16px;\n                    margin-top: 24px;\n                    padding: 16px;\n                }\n\n                .pagination-info {\n                    font-size: 0.9rem;\n                    color: #6c757d;\n                }\n\n                /* Responsive Design */\n                @media (max-width: 768px) {\n                    .merchant-search-container {\n                        padding: 16px;\n                    }\n\n                    .search-header {\n                        flex-direction: column;\n                        gap: 12px;\n                        align-items: flex-start;\n                    }\n\n                    .filter-controls {\n                        grid-template-columns: 1fr;\n                    }\n\n                    .filter-actions {\n                        flex-direction: column;\n                    }\n\n                    .results-header {\n                        flex-direction: column;\n                        gap: 12px;\n                        align-items: flex-start;\n                    }\n\n                    .merchant-item {\n                        flex-direction: column;\n                        align-items: flex-start;\n                        gap: 12px;\n                    }\n\n                    .merchant-avatar {\n                        margin-right: 0;\n                    }\n\n                    .merchant-details {\n                        flex-direction: column;\n                        gap: 4px;\n                    }\n\n                    .pagination {\n                        flex-direction: column;\n                        gap: 12px;\n                    }\n                }\n\n                /* Loading States */\n                .loading {\n                    opacity: 0.6;\n                    pointer-events: none;\n                }\n\n                .loading::after {\n                    content: '';\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    background: rgba(255, 255, 255, 0.8);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                }\n\n                /* Animation for search results */\n                .merchant-item {\n                    animation: slideInUp 0.3s ease-out;\n                }\n\n                @keyframes slideInUp {\n                    from {\n                        opacity: 0;\n                        transform: translateY(20px);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n            </style>\n        ",document.head.appendChild(e)}}},{key:"bindEvents",value:function(){var e=this,t=document.getElementById("merchantSearchInput"),n=document.getElementById("searchClearBtn"),r=document.getElementById("portfolioTypeFilter"),a=document.getElementById("riskLevelFilter"),i=document.getElementById("industryFilter"),o=document.getElementById("statusFilter"),c=document.getElementById("clearFiltersBtn"),s=document.getElementById("applyFiltersBtn"),l=document.getElementById("exportResultsBtn"),u=document.getElementById("prevPageBtn"),d=document.getElementById("nextPageBtn");t.addEventListener("input",function(t){e.currentFilters.searchQuery=t.target.value.trim(),e.toggleClearButton(),e.debouncedSearch()}),n.addEventListener("click",function(){t.value="",e.currentFilters.searchQuery="",e.toggleClearButton(),e.performSearch()}),r.addEventListener("change",function(t){e.currentFilters.portfolioType=t.target.value||null,e.onFilterChange&&e.onFilterChange(e.currentFilters)}),a.addEventListener("change",function(t){e.currentFilters.riskLevel=t.target.value||null,e.onFilterChange&&e.onFilterChange(e.currentFilters)}),i.addEventListener("change",function(t){e.currentFilters.industry=t.target.value||"",e.onFilterChange&&e.onFilterChange(e.currentFilters)}),o.addEventListener("change",function(t){e.currentFilters.status=t.target.value||"",e.onFilterChange&&e.onFilterChange(e.currentFilters)}),c.addEventListener("click",function(){e.clearAllFilters()}),s.addEventListener("click",function(){e.performSearch()}),l.addEventListener("click",function(){e.exportResults()}),u.addEventListener("click",function(){e.currentPage>1&&(e.currentPage--,e.performSearch())}),d.addEventListener("click",function(){e.currentPage<e.totalPages&&(e.currentPage++,e.performSearch())}),document.addEventListener("keydown",function(n){if(n.ctrlKey||n.metaKey)switch(n.key){case"k":n.preventDefault(),t.focus();break;case"f":n.preventDefault(),e.clearAllFilters()}})}},{key:"debouncedSearch",value:function(){var e=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){e.performSearch()},this.debounceDelay)}},{key:"performSearch",value:(o=m(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isLoading){e.n=1;break}return e.a(2);case 1:return this.setLoading(!0),this.currentPage=1,e.p=2,e.n=3,this.searchMerchants();case 3:t=e.v,this.handleSearchResults(t),e.n=5;break;case 4:e.p=4,e.v,this.showError("Failed to search merchants. Please try again.");case 5:return e.p=5,this.setLoading(!1),e.f(5);case 6:return e.a(2)}},e,this,[[2,4,5,6]])})),function(){return o.apply(this,arguments)})},{key:"searchMerchants",value:(a=m(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return t=new URLSearchParams({page:this.currentPage.toString(),page_size:this.pageSize.toString(),sort_by:"created_at",sort_order:"desc"}),this.currentFilters.searchQuery&&t.append("query",this.currentFilters.searchQuery),this.currentFilters.portfolioType&&t.append("portfolio_type",this.currentFilters.portfolioType),this.currentFilters.riskLevel&&t.append("risk_level",this.currentFilters.riskLevel),this.currentFilters.industry&&t.append("industry",this.currentFilters.industry),this.currentFilters.status&&t.append("status",this.currentFilters.status),e.n=1,fetch("".concat(this.apiBaseUrl,"/merchants?").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getAuthToken())}});case 1:if((n=e.v).ok){e.n=2;break}throw new Error("HTTP error! status: ".concat(n.status));case 2:return e.n=3,n.json();case 3:return e.a(2,e.v)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"handleSearchResults",value:function(e){this.merchants=e.merchants||[],this.totalCount=e.total||0,this.totalPages=e.total_pages||0,this.updateSearchStats(),this.renderMerchants(),this.updatePagination(),this.updateExportButton(),this.onSearchResults&&this.onSearchResults({merchants:this.merchants,total:this.totalCount,page:this.currentPage,totalPages:this.totalPages})}},{key:"renderMerchants",value:function(){var e=this,t=document.getElementById("merchantsList"),n=document.getElementById("noResults");if(0===this.merchants.length)return t.innerHTML="",t.appendChild(n),void(n.style.display="block");n.style.display="none",t.innerHTML="",this.merchants.forEach(function(n){var r=e.createMerchantElement(n);t.appendChild(r)})}},{key:"createMerchantElement",value:function(e){var t=this,n=document.createElement("div");n.className="merchant-item",n.dataset.merchantId=e.id;var r=e.name.charAt(0).toUpperCase(),a=this.formatPortfolioType(e.portfolio_type),i=this.formatRiskLevel(e.risk_level);return n.innerHTML='\n            <div class="merchant-avatar">'.concat(r,'</div>\n            <div class="merchant-info">\n                <div class="merchant-name">').concat(e.name,'</div>\n                <div class="merchant-details">\n                    <span><i class="fas fa-industry"></i> ').concat(e.industry||"N/A",'</span>\n                    <span><i class="fas fa-map-marker-alt"></i> ').concat(e.address.city||"N/A",", ").concat(e.address.state||"N/A",'</span>\n                    <span><i class="fas fa-calendar"></i> ').concat(this.formatDate(e.created_at),'</span>\n                </div>\n            </div>\n            <div class="merchant-badges">\n                <span class="badge badge-portfolio">').concat(a,'</span>\n                <span class="badge badge-risk-').concat(e.risk_level,'">').concat(i,"</span>\n            </div>\n        "),n.addEventListener("click",function(){t.selectMerchant(e)}),n}},{key:"selectMerchant",value:function(e){document.querySelectorAll(".merchant-item").forEach(function(e){e.classList.remove("selected")});var t=document.querySelector('[data-merchant-id="'.concat(e.id,'"]'));t&&t.classList.add("selected"),this.onMerchantSelect&&this.onMerchantSelect(e)}},{key:"updateSearchStats",value:function(){var e=document.getElementById("searchStats"),t=document.getElementById("resultsCount");e.innerHTML='\n            <span class="total-count">'.concat(this.totalCount," merchants found</span>\n        "),t.textContent="".concat(this.totalCount," results")}},{key:"updatePagination",value:function(){var e=document.getElementById("pagination"),t=document.getElementById("paginationInfo"),n=document.getElementById("prevPageBtn"),r=document.getElementById("nextPageBtn");this.totalPages<=1?e.style.display="none":(e.style.display="flex",t.textContent="Page ".concat(this.currentPage," of ").concat(this.totalPages),n.disabled=this.currentPage<=1,r.disabled=this.currentPage>=this.totalPages)}},{key:"updateExportButton",value:function(){document.getElementById("exportResultsBtn").disabled=0===this.merchants.length}},{key:"clearAllFilters",value:function(){document.getElementById("merchantSearchInput").value="",this.currentFilters.searchQuery="",this.toggleClearButton(),document.getElementById("portfolioTypeFilter").value="",document.getElementById("riskLevelFilter").value="",document.getElementById("industryFilter").value="",document.getElementById("statusFilter").value="",this.currentFilters={searchQuery:"",portfolioType:null,riskLevel:null,industry:"",status:""},this.performSearch()}},{key:"toggleClearButton",value:function(){var e=document.getElementById("merchantSearchInput"),t=document.getElementById("searchClearBtn");e.value.trim()?t.style.display="block":t.style.display="none"}},{key:"setLoading",value:function(e){this.isLoading=e;var t=document.getElementById("searchLoading"),n=document.getElementById("merchantSearchInput");e?(t.style.display="block",n.disabled=!0):(t.style.display="none",n.disabled=!1)}},{key:"loadInitialData",value:(r=m(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.performSearch();case 1:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"exportResults",value:function(){if(0!==this.merchants.length){var e=this.generateCSV(this.merchants),t=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="merchants-export-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}}},{key:"generateCSV",value:function(e){var t=this,n=e.map(function(e){return[e.name,e.industry||"N/A",t.formatPortfolioType(e.portfolio_type),t.formatRiskLevel(e.risk_level),e.address.city||"N/A",e.address.state||"N/A",t.formatDate(e.created_at)]});return[["Name","Industry","Portfolio Type","Risk Level","City","State","Created Date"]].concat(c(n)).map(function(e){return e.map(function(e){return'"'.concat(e,'"')}).join(",")}).join("\n")}},{key:"showError",value:function(e){var t=document.createElement("div");t.className="error-message",t.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: #e74c3c;\n            color: white;\n            padding: 16px 20px;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);\n            z-index: 10000;\n            animation: slideInRight 0.3s ease-out;\n        ",t.textContent=e,document.body.appendChild(t),setTimeout(function(){t.remove()},5e3)}},{key:"formatPortfolioType",value:function(e){return{onboarded:"Onboarded",deactivated:"Deactivated",prospective:"Prospective",pending:"Pending"}[e]||e}},{key:"formatRiskLevel",value:function(e){return{low:"Low Risk",medium:"Medium Risk",high:"High Risk"}[e]||e}},{key:"formatDate",value:function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},{key:"getAuthToken",value:function(){var e;return localStorage.getItem("auth_token")||(null===(e=document.cookie.split("; ").find(function(e){return e.startsWith("auth_token=")}))||void 0===e?void 0:e.split("=")[1])||""}},{key:"setFilters",value:function(e){this.currentFilters=i(i({},this.currentFilters),e),this.updateFilterUI(),this.performSearch()}},{key:"updateFilterUI",value:function(){document.getElementById("portfolioTypeFilter").value=this.currentFilters.portfolioType||"",document.getElementById("riskLevelFilter").value=this.currentFilters.riskLevel||"",document.getElementById("industryFilter").value=this.currentFilters.industry||"",document.getElementById("statusFilter").value=this.currentFilters.status||""}},{key:"refresh",value:function(){this.performSearch()}},{key:"getSelectedMerchant",value:function(){var e=document.querySelector(".merchant-item.selected");if(e){var t=e.dataset.merchantId;return this.merchants.find(function(e){return e.id===t})}return null}},{key:"destroy",value:function(){clearTimeout(this.searchTimeout),this.container&&(this.container.innerHTML="")}}],t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a,o}();e.exports&&(e.exports=f),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("merchantSearchContainer");e&&!window.merchantSearch&&(window.merchantSearch=new f({container:e}))})},8982:function(e,t,n){n.r(t);n(2675),n(9463),n(2259),n(5700),n(8706),n(2008),n(4423),n(3792),n(8598),n(2062),n(9572),n(2010),n(2892),n(9868),n(875),n(9432),n(287),n(6099),n(3362),n(1699),n(7764),n(2762),n(3500),n(2953),n(3296),n(7208),n(8408);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,a,o){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return i(u,"_invoke",function(n,r,a){var i,o,c,l=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,o=0,c=e,m.n=n,s}};function h(n,r){for(o=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],h=m.p,p=i[2];n>3?(a=p===r)&&(c=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=h&&((a=n<2&&h<i[1])?(o=0,m.v=r,m.n=i[1]):h<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,m.n=p,o=0))}if(a||n>1)return s;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),o=u,c=p;(t=o<2?e:c)||!d;){i||(o?o<3?(o>1&&(m.n=-1),h(o,c)):m.n=c:m.v=c);try{if(l=2,i){if(o||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=i.return)&&t.call(i),o<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=e}else if((t=(d=m.n<0)?c:n.call(r,m))!==s)break}catch(t){i=e,o=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,o),!0),u}var s={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var m=[][r]?t(t([][r]())):(i(t={},r,function(){return this}),t),h=d.prototype=l.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,o,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,i(h,"constructor",d),i(d,"constructor",u),u.displayName="GeneratorFunction",i(d,o,"GeneratorFunction"),i(h),i(h,o,"Generator"),i(h,r,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m:p}})()}function i(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,n,r){function o(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},i(e,t,n,r)}function o(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)})}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.merchant1=null,this.merchant2=null,this.comparisonData=null,this.currentView="side-by-side",this.riskChart=null,this.initializeEventListeners(),this.loadMerchantOptions(),this.initializeChart()},t=[{key:"initializeEventListeners",value:function(){var e=this;document.getElementById("merchant1Select").addEventListener("change",function(t){e.handleMerchantSelection(1,t.target.value)}),document.getElementById("merchant2Select").addEventListener("change",function(t){e.handleMerchantSelection(2,t.target.value)}),document.getElementById("merchant1Search").addEventListener("input",function(t){e.filterMerchantOptions(1,t.target.value)}),document.getElementById("merchant2Search").addEventListener("input",function(t){e.filterMerchantOptions(2,t.target.value)}),document.getElementById("exportReportBtn").addEventListener("click",function(){e.exportComparisonReport()}),document.getElementById("clearComparisonBtn").addEventListener("click",function(){e.clearComparison()}),document.getElementById("toggleViewBtn").addEventListener("click",function(){e.toggleView()}),document.getElementById("printReportBtn").addEventListener("click",function(){e.printReport()}),window.viewMerchantDetail=function(t){e.viewMerchantDetail(t)}}},{key:"loadMerchantOptions",value:(o=c(a().m(function e(){var t,n;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/api/v1/merchants?page_size=1000");case 1:if((t=e.v).ok){e.n=2;break}throw new Error("HTTP error! status: ".concat(t.status));case 2:return e.n=3,t.json();case 3:n=e.v,this.populateMerchantSelects(n.merchants),e.n=5;break;case 4:e.p=4,e.v,this.showError("Failed to load merchant options");case 5:return e.a(2)}},e,this,[[0,4]])})),function(){return o.apply(this,arguments)})},{key:"populateMerchantSelects",value:function(e){var t=document.getElementById("merchant1Select"),n=document.getElementById("merchant2Select");t.innerHTML='<option value="">Choose a merchant...</option>',n.innerHTML='<option value="">Choose a merchant...</option>',e.forEach(function(e){var r=document.createElement("option");r.value=e.id,r.textContent="".concat(e.name," (").concat(e.portfolio_type,")"),r.dataset.merchant=JSON.stringify(e),t.appendChild(r);var a=document.createElement("option");a.value=e.id,a.textContent="".concat(e.name," (").concat(e.portfolio_type,")"),a.dataset.merchant=JSON.stringify(e),n.appendChild(a)})}},{key:"filterMerchantOptions",value:function(e,t){document.getElementById("merchant".concat(e,"Select")).querySelectorAll("option").forEach(function(e){if(""!==e.value){var n=JSON.parse(e.dataset.merchant);"".concat(n.name," ").concat(n.industry," ").concat(n.portfolio_type).toLowerCase().includes(t.toLowerCase())?e.style.display="block":e.style.display="none"}})}},{key:"handleMerchantSelection",value:(i=c(a().m(function e(t,n){var r,i;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n){e.n=1;break}return this.hideMerchantPreview(t),e.a(2);case 1:return e.p=1,e.n=2,fetch("/api/v1/merchants/".concat(n));case 2:if((r=e.v).ok){e.n=3;break}throw new Error("HTTP error! status: ".concat(r.status));case 3:return e.n=4,r.json();case 4:if(i=e.v,this.setMerchant(t,i),this.showMerchantPreview(t,i),!this.merchant1||!this.merchant2){e.n=5;break}return e.n=5,this.performComparison();case 5:e.n=7;break;case 6:e.p=6,e.v,this.showError("Failed to load merchant ".concat(t));case 7:return e.a(2)}},e,this,[[1,6]])})),function(e,t){return i.apply(this,arguments)})},{key:"setMerchant",value:function(e,t){1===e?this.merchant1=t:this.merchant2=t}},{key:"showMerchantPreview",value:function(e,t){var n=document.getElementById("merchant".concat(e,"Preview")),r=document.getElementById("merchant".concat(e,"Name")),a=document.getElementById("merchant".concat(e,"Type")),i=document.getElementById("merchant".concat(e,"Industry")),o=document.getElementById("merchant".concat(e,"Location"));r.textContent=t.name,a.textContent=t.portfolio_type,a.className="portfolio-type ".concat(t.portfolio_type),i.textContent=t.industry||"Industry not specified",o.textContent=this.formatAddress(t.address),n.style.display="block"}},{key:"hideMerchantPreview",value:function(e){document.getElementById("merchant".concat(e,"Preview")).style.display="none",1===e?this.merchant1=null:this.merchant2=null}},{key:"formatAddress",value:function(e){return e?[e.street1,e.city,e.state,e.country].filter(function(e){return e&&e.trim()}).join(", "):"Address not available"}},{key:"performComparison",value:(r=c(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:if(this.merchant1&&this.merchant2){e.n=1;break}return e.a(2);case 1:this.showLoadingState();try{this.comparisonData=this.generateComparisonData(),this.populateSideBySideView(),this.populateSummaryView(),this.showComparisonResults(),document.getElementById("exportReportBtn").disabled=!1}catch(t){this.showError("Failed to perform comparison")}finally{this.hideLoadingState()}case 2:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"generateComparisonData",value:function(){return{merchant1:this.merchant1,merchant2:this.merchant2,differences:this.findDifferences(),riskComparison:this.compareRiskLevels(),recommendations:this.generateRecommendations(),summary:this.generateSummary()}}},{key:"findDifferences",value:function(){var e=[];return this.merchant1.portfolio_type!==this.merchant2.portfolio_type&&e.push({category:"Portfolio Type",merchant1:this.merchant1.portfolio_type,merchant2:this.merchant2.portfolio_type,impact:"medium"}),this.merchant1.risk_level!==this.merchant2.risk_level&&e.push({category:"Risk Level",merchant1:this.merchant1.risk_level,merchant2:this.merchant2.risk_level,impact:"high"}),this.merchant1.industry!==this.merchant2.industry&&e.push({category:"Industry",merchant1:this.merchant1.industry,merchant2:this.merchant2.industry,impact:"medium"}),this.merchant1.employee_count!==this.merchant2.employee_count&&e.push({category:"Employee Count",merchant1:this.merchant1.employee_count,merchant2:this.merchant2.employee_count,impact:"low"}),this.merchant1.annual_revenue!==this.merchant2.annual_revenue&&e.push({category:"Annual Revenue",merchant1:this.formatCurrency(this.merchant1.annual_revenue),merchant2:this.formatCurrency(this.merchant2.annual_revenue),impact:"medium"}),e}},{key:"compareRiskLevels",value:function(){var e={low:1,medium:2,high:3};return{merchant1:{level:this.merchant1.risk_level,value:e[this.merchant1.risk_level]||0},merchant2:{level:this.merchant2.risk_level,value:e[this.merchant2.risk_level]||0}}}},{key:"generateRecommendations",value:function(){var e=[];return"high"===this.merchant1.risk_level&&"high"!==this.merchant2.risk_level&&e.push({type:"risk",priority:"high",message:"".concat(this.merchant1.name," requires enhanced monitoring due to high risk level"),action:"Implement additional compliance checks and regular reviews"}),"high"===this.merchant2.risk_level&&"high"!==this.merchant1.risk_level&&e.push({type:"risk",priority:"high",message:"".concat(this.merchant2.name," requires enhanced monitoring due to high risk level"),action:"Implement additional compliance checks and regular reviews"}),"prospective"===this.merchant1.portfolio_type&&"onboarded"===this.merchant2.portfolio_type&&e.push({type:"onboarding",priority:"medium",message:"Consider accelerating onboarding process for ".concat(this.merchant1.name),action:"Review onboarding requirements and expedite approval process"}),"prospective"===this.merchant2.portfolio_type&&"onboarded"===this.merchant1.portfolio_type&&e.push({type:"onboarding",priority:"medium",message:"Consider accelerating onboarding process for ".concat(this.merchant2.name),action:"Review onboarding requirements and expedite approval process"}),this.merchant1.industry!==this.merchant2.industry&&e.push({type:"diversification",priority:"low",message:"Different industries provide portfolio diversification",action:"Monitor industry-specific risks and compliance requirements"}),e}},{key:"generateSummary",value:function(){var e=this.compareRiskLevels(),t=this.findDifferences();return{totalDifferences:t.length,highImpactDifferences:t.filter(function(e){return"high"===e.impact}).length,riskAdvantage:e.merchant1.value<e.merchant2.value?this.merchant1.name:this.merchant2.name,portfolioAdvantage:"onboarded"===this.merchant1.portfolio_type&&"onboarded"!==this.merchant2.portfolio_type?this.merchant1.name:this.merchant2.name}}},{key:"populateSideBySideView",value:function(){this.populateMerchantColumn(1,this.merchant1),this.populateMerchantColumn(2,this.merchant2)}},{key:"populateMerchantColumn",value:function(e,t){var n,r,a,i="compareMerchant".concat(e);document.getElementById("".concat(i,"Name")).textContent=t.name,document.getElementById("".concat(i,"Type")).textContent=t.portfolio_type,document.getElementById("".concat(i,"Type")).className="portfolio-type ".concat(t.portfolio_type),document.getElementById("".concat(i,"Risk")).textContent=t.risk_level,document.getElementById("".concat(i,"Risk")).className="risk-level ".concat(t.risk_level),document.getElementById("".concat(i,"BusinessName")).textContent=t.name,document.getElementById("".concat(i,"Industry")).textContent=t.industry||"Not specified",document.getElementById("".concat(i,"Address")).textContent=this.formatAddress(t.address),document.getElementById("".concat(i,"Phone")).textContent=(null===(n=t.contact_info)||void 0===n?void 0:n.phone)||"Not specified",document.getElementById("".concat(i,"Email")).textContent=(null===(r=t.contact_info)||void 0===r?void 0:r.email)||"Not specified",document.getElementById("".concat(i,"Website")).textContent=(null===(a=t.contact_info)||void 0===a?void 0:a.website)||"Not specified",document.getElementById("".concat(i,"Revenue")).textContent=this.formatCurrency(t.annual_revenue),document.getElementById("".concat(i,"Volume")).textContent=this.formatCurrency(.1*t.annual_revenue),document.getElementById("".concat(i,"AvgTransaction")).textContent=this.formatCurrency(.001*t.annual_revenue),document.getElementById("".concat(i,"ChargebackRate")).textContent="0.5%";var o=this.calculateRiskScore(t.risk_level);document.getElementById("".concat(i,"RiskScore")).textContent="".concat((100*o).toFixed(1),"%"),document.getElementById("".concat(i,"RiskScore")).className="metric-value risk-".concat(t.risk_level),this.populateRiskBreakdown(e,t.risk_level),this.populateComplianceStatus(e,t)}},{key:"calculateRiskScore",value:function(e){return{low:.2,medium:.5,high:.8}[e]||.5}},{key:"populateRiskBreakdown",value:function(e,t){var n=this.calculateRiskScore(t),r=[.1,-.05,.15];["Compliance","Financial","Operational"].forEach(function(a,i){var o=Math.max(0,Math.min(1,n+r[i])),c=document.getElementById("compareMerchant".concat(e).concat(a,"Risk"));c&&(c.style.width="".concat(100*o,"%"),c.className="risk-fill risk-".concat(t))})}},{key:"populateComplianceStatus",value:function(e,t){["KYC","AML","Sanctions","PEP"].forEach(function(n){var r=document.getElementById("compareMerchant".concat(e).concat(n)).querySelector(".status"),a="pending";"onboarded"===t.portfolio_type?a="completed":"high"===t.risk_level&&(a="failed"),r.textContent=a,r.className="status ".concat(a)})}},{key:"populateSummaryView",value:function(){this.populateKeyDifferences(),this.updateRiskComparisonChart(),this.populateRecommendations()}},{key:"populateKeyDifferences",value:function(){var e=this,t=document.getElementById("keyDifferences");t.innerHTML="",this.comparisonData.differences.forEach(function(n){var r=document.createElement("div");r.className="difference-item impact-".concat(n.impact),r.innerHTML='\n                <div class="difference-category">'.concat(n.category,'</div>\n                <div class="difference-values">\n                    <div class="merchant1-value">\n                        <strong>').concat(e.merchant1.name,":</strong> ").concat(n.merchant1,'\n                    </div>\n                    <div class="merchant2-value">\n                        <strong>').concat(e.merchant2.name,":</strong> ").concat(n.merchant2,"\n                    </div>\n                </div>\n            "),t.appendChild(r)})}},{key:"updateRiskComparisonChart",value:function(){this.riskChart||this.initializeChart();var e=this.comparisonData.riskComparison;this.riskChart.data.datasets[0].data=[e.merchant1.value,e.merchant2.value],this.riskChart.update()}},{key:"initializeChart",value:function(){var e,t,n=document.getElementById("riskComparisonChart");n&&(this.riskChart=new Chart(n,{type:"bar",data:{labels:[(null===(e=this.merchant1)||void 0===e?void 0:e.name)||"Merchant 1",(null===(t=this.merchant2)||void 0===t?void 0:t.name)||"Merchant 2"],datasets:[{label:"Risk Level",data:[0,0],backgroundColor:["#dc3545","#ffc107"],borderColor:["#dc3545","#ffc107"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:3,ticks:{stepSize:1,callback:function(e){return["","Low","Medium","High"][e]||""}}}},plugins:{legend:{display:!1}}}}))}},{key:"populateRecommendations",value:function(){var e=this,t=document.getElementById("recommendations");t.innerHTML="",this.comparisonData.recommendations.forEach(function(n){var r=document.createElement("div");r.className="recommendation-item priority-".concat(n.priority),r.innerHTML='\n                <div class="recommendation-header">\n                    <i class="fas fa-'.concat(e.getRecommendationIcon(n.type),'"></i>\n                    <span class="recommendation-type">').concat(n.type.toUpperCase(),'</span>\n                    <span class="recommendation-priority">').concat(n.priority.toUpperCase(),'</span>\n                </div>\n                <div class="recommendation-message">').concat(n.message,'</div>\n                <div class="recommendation-action">').concat(n.action,"</div>\n            "),t.appendChild(r)})}},{key:"getRecommendationIcon",value:function(e){return{risk:"exclamation-triangle",onboarding:"user-plus",diversification:"chart-pie"}[e]||"info-circle"}},{key:"showComparisonResults",value:function(){document.getElementById("comparisonResults").style.display="block",document.getElementById("emptyState").style.display="none"}},{key:"toggleView",value:function(){var e=document.getElementById("sideBySideView"),t=document.getElementById("summaryView"),n=document.getElementById("toggleViewBtn");"side-by-side"===this.currentView?(e.style.display="none",t.style.display="block",n.innerHTML='<i class="fas fa-columns"></i> Side-by-Side View',this.currentView="summary"):(e.style.display="block",t.style.display="none",n.innerHTML='<i class="fas fa-th-large"></i> Summary View',this.currentView="side-by-side")}},{key:"exportComparisonReport",value:function(){if(this.comparisonData){var e=this.generateExportReport();this.downloadReport(e)}else this.showError("No comparison data to export")}},{key:"generateExportReport",value:function(){return{title:"Merchant Comparison Report",generatedAt:(new Date).toISOString(),merchants:{merchant1:this.merchant1,merchant2:this.merchant2},comparison:this.comparisonData,summary:{totalDifferences:this.comparisonData.differences.length,highImpactDifferences:this.comparisonData.differences.filter(function(e){return"high"===e.impact}).length,recommendations:this.comparisonData.recommendations.length}}}},{key:"downloadReport",value:function(e){var t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download="merchant-comparison-".concat(Date.now(),".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}},{key:"printReport",value:function(){if(this.comparisonData){var e=window.open("","_blank"),t=this.generatePrintContent();e.document.write(t),e.document.close(),e.print()}else this.showError("No comparison data to print")}},{key:"generatePrintContent",value:function(){return'\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>Merchant Comparison Report</title>\n                <style>\n                    body { font-family: Arial, sans-serif; margin: 20px; }\n                    .header { text-align: center; margin-bottom: 30px; }\n                    .merchant-section { margin-bottom: 30px; }\n                    .comparison-table { width: 100%; border-collapse: collapse; }\n                    .comparison-table th, .comparison-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n                    .comparison-table th { background-color: #f2f2f2; }\n                    .recommendations { margin-top: 30px; }\n                    .recommendation-item { margin-bottom: 15px; padding: 10px; border-left: 4px solid #007bff; }\n                </style>\n            </head>\n            <body>\n                <div class="header">\n                    <h1>Merchant Comparison Report</h1>\n                    <p>Generated on: '.concat((new Date).toLocaleDateString(),'</p>\n                </div>\n                \n                <div class="merchant-section">\n                    <h2>Merchants Compared</h2>\n                    <table class="comparison-table">\n                        <tr>\n                            <th>Attribute</th>\n                            <th>').concat(this.merchant1.name,"</th>\n                            <th>").concat(this.merchant2.name,"</th>\n                        </tr>\n                        <tr><td>Portfolio Type</td><td>").concat(this.merchant1.portfolio_type,"</td><td>").concat(this.merchant2.portfolio_type,"</td></tr>\n                        <tr><td>Risk Level</td><td>").concat(this.merchant1.risk_level,"</td><td>").concat(this.merchant2.risk_level,"</td></tr>\n                        <tr><td>Industry</td><td>").concat(this.merchant1.industry,"</td><td>").concat(this.merchant2.industry,"</td></tr>\n                        <tr><td>Employee Count</td><td>").concat(this.merchant1.employee_count,"</td><td>").concat(this.merchant2.employee_count,"</td></tr>\n                        <tr><td>Annual Revenue</td><td>").concat(this.formatCurrency(this.merchant1.annual_revenue),"</td><td>").concat(this.formatCurrency(this.merchant2.annual_revenue),'</td></tr>\n                    </table>\n                </div>\n                \n                <div class="recommendations">\n                    <h2>Recommendations</h2>\n                    ').concat(this.comparisonData.recommendations.map(function(e){return'\n                        <div class="recommendation-item">\n                            <strong>'.concat(e.type.toUpperCase()," - ").concat(e.priority.toUpperCase(),"</strong><br>\n                            ").concat(e.message,"<br>\n                            <em>Action: ").concat(e.action,"</em>\n                        </div>\n                    ")}).join(""),"\n                </div>\n            </body>\n            </html>\n        ")}},{key:"clearComparison",value:function(){this.merchant1=null,this.merchant2=null,this.comparisonData=null,document.getElementById("merchant1Select").value="",document.getElementById("merchant2Select").value="",document.getElementById("merchant1Search").value="",document.getElementById("merchant2Search").value="",this.hideMerchantPreview(1),this.hideMerchantPreview(2),document.getElementById("comparisonResults").style.display="none",document.getElementById("emptyState").style.display="block",document.getElementById("exportReportBtn").disabled=!0,this.currentView="side-by-side",document.getElementById("sideBySideView").style.display="block",document.getElementById("summaryView").style.display="none",document.getElementById("toggleViewBtn").innerHTML='<i class="fas fa-th-large"></i> Summary View'}},{key:"viewMerchantDetail",value:function(e){var t=1===e?this.merchant1:this.merchant2;t&&(window.location.href="merchant-detail.html?id=".concat(t.id))}},{key:"showLoadingState",value:function(){document.getElementById("loadingState").style.display="block"}},{key:"hideLoadingState",value:function(){document.getElementById("loadingState").style.display="none"}},{key:"showError",value:function(e){var t=document.getElementById("errorMessage");t||((t=document.createElement("div")).id="errorMessage",t.className="error-message",document.querySelector(".main-content").insertBefore(t,document.querySelector(".main-content").firstChild)),t.innerHTML='\n            <div class="error-content">\n                <i class="fas fa-exclamation-triangle"></i>\n                <span>'.concat(e,'</span>\n                <button onclick="this.parentElement.parentElement.remove()" class="error-close">\n                    <i class="fas fa-times"></i>\n                </button>\n            </div>\n        '),setTimeout(function(){t&&t.parentElement&&t.remove()},5e3)}},{key:"formatCurrency",value:function(e){return e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):"Not specified"}}],t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,i,o}();document.addEventListener("DOMContentLoaded",function(){new u})}}]);
//# sourceMappingURL=merchant.7bf22dc9.js.map