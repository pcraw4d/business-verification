"use strict";!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.KYBPlatform=e():n.KYBPlatform=e()}(self,function(){return(self.webpackChunkKYBPlatform=self.webpackChunkKYBPlatform||[]).push([[967],{7746:function(n,e,t){t.r(e);t(2675),t(9463),t(2259),t(5700),t(8706),t(113),t(3418),t(3792),t(8598),t(2062),t(4782),t(9572),t(2010),t(2892),t(9432),t(6099),t(7495),t(8781),t(7764),t(8156),t(3500),t(2953);function s(n){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s(n)}function i(n){return function(n){if(Array.isArray(n))return o(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(n){if("string"==typeof n)return o(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(n,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function a(n,e){for(var t=0;t<e.length;t++){var s=e[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,r(s.key),s)}}function r(n){var e=function(n,e){if("object"!=s(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==s(e)?e:e+""}n=t.hmd(n);var c=function(){return n=function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.container=e.container||document.body,this.apiBaseUrl=e.apiBaseUrl||"/api/v1",this.storageKey=e.storageKey||"merchant_session",this.sessionTimeout=e.sessionTimeout||18e5,this.currentSession=null,this.sessionHistory=[],this.maxHistorySize=e.maxHistorySize||10,this.isSessionActive=!1,this.sessionTimer=null,this.onSessionStart=e.onSessionStart||null,this.onSessionEnd=e.onSessionEnd||null,this.onSessionSwitch=e.onSessionSwitch||null,this.onSessionTimeout=e.onSessionTimeout||null,this.onOverviewReset=e.onOverviewReset||null,this.init()},e=[{key:"init",value:function(){this.loadSessionFromStorage(),this.createSessionInterface(),this.bindEvents(),this.startSessionMonitoring()}},{key:"createSessionInterface",value:function(){this.container.innerHTML='\n            <div class="session-manager-container" id="sessionManagerContainer">\n                <div class="session-header">\n                    <div class="session-info">\n                        <h3 class="session-title">\n                            <i class="fas fa-user-circle"></i>\n                            Active Session\n                        </h3>\n                        <div class="session-status" id="sessionStatus">\n                            <span class="status-indicator" id="statusIndicator"></span>\n                            <span class="status-text" id="statusText">No active session</span>\n                        </div>\n                    </div>\n                    <div class="session-actions">\n                        <button class="btn btn-outline btn-sm" id="sessionHistoryBtn" disabled>\n                            <i class="fas fa-history"></i>\n                            History\n                        </button>\n                        <button class="btn btn-danger btn-sm" id="endSessionBtn" disabled>\n                            <i class="fas fa-sign-out-alt"></i>\n                            End Session\n                        </button>\n                    </div>\n                </div>\n\n                <div class="session-details" id="sessionDetails" style="display: none;">\n                    <div class="merchant-info">\n                        <div class="merchant-avatar" id="merchantAvatar">\n                            <i class="fas fa-building"></i>\n                        </div>\n                        <div class="merchant-details">\n                            <div class="merchant-name" id="merchantName">-</div>\n                            <div class="merchant-meta">\n                                <span class="merchant-id" id="merchantId">-</span>\n                                <span class="session-duration" id="sessionDuration">-</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="session-timer">\n                        <div class="timer-label">Session Timeout</div>\n                        <div class="timer-progress">\n                            <div class="timer-bar" id="timerBar"></div>\n                        </div>\n                        <div class="timer-text" id="timerText">30:00</div>\n                    </div>\n                </div>\n\n                <div class="session-history" id="sessionHistory" style="display: none;">\n                    <div class="history-header">\n                        <h4>Recent Sessions</h4>\n                        <button class="btn btn-outline btn-sm" id="closeHistoryBtn">\n                            <i class="fas fa-times"></i>\n                        </button>\n                    </div>\n                    <div class="history-list" id="historyList">\n                        <div class="no-history">\n                            <i class="fas fa-history"></i>\n                            <p>No recent sessions</p>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="session-switch-modal" id="sessionSwitchModal" style="display: none;">\n                    <div class="modal-overlay">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <h4>Switch Merchant Session</h4>\n                                <button class="btn btn-outline btn-sm" id="closeSwitchModalBtn">\n                                    <i class="fas fa-times"></i>\n                                </button>\n                            </div>\n                            <div class="modal-body">\n                                <div class="current-session-warning">\n                                    <i class="fas fa-exclamation-triangle"></i>\n                                    <p>You are about to switch from the current merchant session. This will reset the overview and start a new session.</p>\n                                </div>\n                                <div class="new-merchant-info" id="newMerchantInfo">\n                                    \x3c!-- New merchant details will be populated here --\x3e\n                                </div>\n                            </div>\n                            <div class="modal-footer">\n                                <button class="btn btn-secondary" id="cancelSwitchBtn">Cancel</button>\n                                <button class="btn btn-primary" id="confirmSwitchBtn">Switch Session</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ',this.addStyles()}},{key:"addStyles",value:function(){if(!document.querySelector("#session-manager-styles")){var n=document.createElement("style");n.id="session-manager-styles",n.textContent="\n            <style>\n                .session-manager-container {\n                    background: white;\n                    border-radius: 12px;\n                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n                    padding: 20px;\n                    margin-bottom: 20px;\n                    border-left: 4px solid #3498db;\n                }\n\n                .session-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 16px;\n                }\n\n                .session-info {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 8px;\n                }\n\n                .session-title {\n                    display: flex;\n                    align-items: center;\n                    gap: 8px;\n                    margin: 0;\n                    color: #2c3e50;\n                    font-size: 1.2rem;\n                    font-weight: 600;\n                }\n\n                .session-title i {\n                    color: #3498db;\n                }\n\n                .session-status {\n                    display: flex;\n                    align-items: center;\n                    gap: 8px;\n                }\n\n                .status-indicator {\n                    width: 12px;\n                    height: 12px;\n                    border-radius: 50%;\n                    background: #95a5a6;\n                    transition: all 0.3s ease;\n                }\n\n                .status-indicator.active {\n                    background: #27ae60;\n                    box-shadow: 0 0 8px rgba(39, 174, 96, 0.4);\n                }\n\n                .status-indicator.warning {\n                    background: #f39c12;\n                    box-shadow: 0 0 8px rgba(243, 156, 18, 0.4);\n                }\n\n                .status-indicator.danger {\n                    background: #e74c3c;\n                    box-shadow: 0 0 8px rgba(231, 76, 60, 0.4);\n                }\n\n                .status-text {\n                    font-size: 0.9rem;\n                    color: #6c757d;\n                    font-weight: 500;\n                }\n\n                .session-actions {\n                    display: flex;\n                    gap: 8px;\n                }\n\n                .btn {\n                    padding: 8px 16px;\n                    border: none;\n                    border-radius: 6px;\n                    font-size: 0.85rem;\n                    font-weight: 600;\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                    display: flex;\n                    align-items: center;\n                    gap: 6px;\n                    text-decoration: none;\n                }\n\n                .btn:disabled {\n                    opacity: 0.6;\n                    cursor: not-allowed;\n                }\n\n                .btn-sm {\n                    padding: 6px 12px;\n                    font-size: 0.8rem;\n                }\n\n                .btn-outline {\n                    background: transparent;\n                    color: #3498db;\n                    border: 2px solid #3498db;\n                }\n\n                .btn-outline:hover:not(:disabled) {\n                    background: #3498db;\n                    color: white;\n                }\n\n                .btn-danger {\n                    background: #e74c3c;\n                    color: white;\n                }\n\n                .btn-danger:hover:not(:disabled) {\n                    background: #c0392b;\n                    transform: translateY(-1px);\n                }\n\n                .btn-secondary {\n                    background: #6c757d;\n                    color: white;\n                }\n\n                .btn-secondary:hover:not(:disabled) {\n                    background: #5a6268;\n                }\n\n                .btn-primary {\n                    background: #3498db;\n                    color: white;\n                }\n\n                .btn-primary:hover:not(:disabled) {\n                    background: #2980b9;\n                }\n\n                .session-details {\n                    background: #f8f9fa;\n                    border-radius: 8px;\n                    padding: 16px;\n                    margin-top: 16px;\n                }\n\n                .merchant-info {\n                    display: flex;\n                    align-items: center;\n                    gap: 16px;\n                    margin-bottom: 16px;\n                }\n\n                .merchant-avatar {\n                    width: 50px;\n                    height: 50px;\n                    border-radius: 50%;\n                    background: linear-gradient(135deg, #3498db, #2980b9);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    color: white;\n                    font-size: 1.5rem;\n                    flex-shrink: 0;\n                }\n\n                .merchant-details {\n                    flex: 1;\n                }\n\n                .merchant-name {\n                    font-size: 1.1rem;\n                    font-weight: 600;\n                    color: #2c3e50;\n                    margin-bottom: 4px;\n                }\n\n                .merchant-meta {\n                    display: flex;\n                    gap: 16px;\n                    font-size: 0.85rem;\n                    color: #6c757d;\n                }\n\n                .session-timer {\n                    background: white;\n                    border-radius: 6px;\n                    padding: 12px;\n                }\n\n                .timer-label {\n                    font-size: 0.8rem;\n                    color: #6c757d;\n                    margin-bottom: 8px;\n                    font-weight: 600;\n                }\n\n                .timer-progress {\n                    width: 100%;\n                    height: 6px;\n                    background: #e9ecef;\n                    border-radius: 3px;\n                    overflow: hidden;\n                    margin-bottom: 8px;\n                }\n\n                .timer-bar {\n                    height: 100%;\n                    background: linear-gradient(90deg, #27ae60, #f39c12, #e74c3c);\n                    width: 100%;\n                    transition: width 1s linear;\n                }\n\n                .timer-text {\n                    font-size: 0.9rem;\n                    font-weight: 600;\n                    color: #2c3e50;\n                    text-align: center;\n                }\n\n                .session-history {\n                    background: #f8f9fa;\n                    border-radius: 8px;\n                    padding: 16px;\n                    margin-top: 16px;\n                }\n\n                .history-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 16px;\n                }\n\n                .history-header h4 {\n                    margin: 0;\n                    color: #2c3e50;\n                    font-size: 1rem;\n                }\n\n                .history-list {\n                    max-height: 300px;\n                    overflow-y: auto;\n                }\n\n                .history-item {\n                    display: flex;\n                    align-items: center;\n                    gap: 12px;\n                    padding: 12px;\n                    background: white;\n                    border-radius: 6px;\n                    margin-bottom: 8px;\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                }\n\n                .history-item:hover {\n                    background: #e3f2fd;\n                    transform: translateX(4px);\n                }\n\n                .history-avatar {\n                    width: 35px;\n                    height: 35px;\n                    border-radius: 50%;\n                    background: linear-gradient(135deg, #95a5a6, #7f8c8d);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    color: white;\n                    font-size: 0.9rem;\n                    flex-shrink: 0;\n                }\n\n                .history-details {\n                    flex: 1;\n                }\n\n                .history-name {\n                    font-weight: 600;\n                    color: #2c3e50;\n                    font-size: 0.9rem;\n                    margin-bottom: 2px;\n                }\n\n                .history-meta {\n                    font-size: 0.8rem;\n                    color: #6c757d;\n                }\n\n                .no-history {\n                    text-align: center;\n                    padding: 40px 20px;\n                    color: #6c757d;\n                }\n\n                .no-history i {\n                    font-size: 2rem;\n                    color: #dee2e6;\n                    margin-bottom: 12px;\n                }\n\n                .no-history p {\n                    margin: 0;\n                    font-size: 0.9rem;\n                }\n\n                .session-switch-modal {\n                    position: fixed;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    z-index: 10000;\n                }\n\n                .modal-overlay {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    background: rgba(0, 0, 0, 0.5);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    padding: 20px;\n                }\n\n                .modal-content {\n                    background: white;\n                    border-radius: 12px;\n                    max-width: 500px;\n                    width: 100%;\n                    max-height: 90vh;\n                    overflow-y: auto;\n                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);\n                }\n\n                .modal-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding: 20px;\n                    border-bottom: 2px solid #f8f9fa;\n                }\n\n                .modal-header h4 {\n                    margin: 0;\n                    color: #2c3e50;\n                    font-size: 1.2rem;\n                }\n\n                .modal-body {\n                    padding: 20px;\n                }\n\n                .current-session-warning {\n                    display: flex;\n                    align-items: flex-start;\n                    gap: 12px;\n                    background: #fff3cd;\n                    border: 1px solid #ffeaa7;\n                    border-radius: 8px;\n                    padding: 16px;\n                    margin-bottom: 20px;\n                }\n\n                .current-session-warning i {\n                    color: #f39c12;\n                    font-size: 1.2rem;\n                    margin-top: 2px;\n                }\n\n                .current-session-warning p {\n                    margin: 0;\n                    color: #856404;\n                    font-size: 0.9rem;\n                    line-height: 1.4;\n                }\n\n                .new-merchant-info {\n                    background: #f8f9fa;\n                    border-radius: 8px;\n                    padding: 16px;\n                }\n\n                .modal-footer {\n                    display: flex;\n                    justify-content: flex-end;\n                    gap: 12px;\n                    padding: 20px;\n                    border-top: 2px solid #f8f9fa;\n                }\n\n                /* Responsive Design */\n                @media (max-width: 768px) {\n                    .session-manager-container {\n                        padding: 16px;\n                    }\n\n                    .session-header {\n                        flex-direction: column;\n                        gap: 12px;\n                        align-items: flex-start;\n                    }\n\n                    .session-actions {\n                        width: 100%;\n                        justify-content: flex-end;\n                    }\n\n                    .merchant-info {\n                        flex-direction: column;\n                        align-items: flex-start;\n                        gap: 12px;\n                    }\n\n                    .merchant-meta {\n                        flex-direction: column;\n                        gap: 4px;\n                    }\n\n                    .modal-content {\n                        margin: 10px;\n                        max-width: none;\n                    }\n\n                    .modal-footer {\n                        flex-direction: column;\n                    }\n                }\n\n                /* Animation for session status changes */\n                .status-indicator {\n                    animation: pulse 2s infinite;\n                }\n\n                @keyframes pulse {\n                    0% { opacity: 1; }\n                    50% { opacity: 0.7; }\n                    100% { opacity: 1; }\n                }\n\n                /* Loading state */\n                .loading {\n                    opacity: 0.6;\n                    pointer-events: none;\n                }\n            </style>\n        ",document.head.appendChild(n)}}},{key:"bindEvents",value:function(){var n=this,e=document.getElementById("endSessionBtn"),t=document.getElementById("sessionHistoryBtn"),s=document.getElementById("closeHistoryBtn"),i=document.getElementById("closeSwitchModalBtn"),o=document.getElementById("cancelSwitchBtn"),a=document.getElementById("confirmSwitchBtn");e.addEventListener("click",function(){n.endCurrentSession()}),t.addEventListener("click",function(){n.toggleHistory()}),s.addEventListener("click",function(){n.hideHistory()}),i.addEventListener("click",function(){n.hideSwitchModal()}),o.addEventListener("click",function(){n.hideSwitchModal()}),a.addEventListener("click",function(){n.confirmSessionSwitch()}),document.addEventListener("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(e.key){case"e":e.preventDefault(),n.isSessionActive&&n.endCurrentSession();break;case"h":e.preventDefault(),n.toggleHistory()}}),document.addEventListener("visibilitychange",function(){document.hidden?n.pauseSessionMonitoring():n.resumeSessionMonitoring()}),window.addEventListener("beforeunload",function(){n.saveSessionToStorage()})}},{key:"startSession",value:function(n){this.isSessionActive?this.showSwitchModal(n):(this.currentSession={merchant:n,startTime:new Date,lastActivity:new Date,sessionId:this.generateSessionId()},this.isSessionActive=!0,this.updateSessionUI(),this.startSessionTimer(),this.saveSessionToStorage(),this.onSessionStart&&this.onSessionStart(this.currentSession))}},{key:"endCurrentSession",value:function(){this.isSessionActive&&(this.addToHistory(this.currentSession),this.onSessionEnd&&this.onSessionEnd(this.currentSession),this.onOverviewReset&&this.onOverviewReset(),this.currentSession=null,this.isSessionActive=!1,this.clearSessionTimer(),this.updateSessionUI(),this.saveSessionToStorage())}},{key:"switchSession",value:function(n){this.isSessionActive?this.showSwitchModal(n):this.startSession(n)}},{key:"showSwitchModal",value:function(n){var e=document.getElementById("sessionSwitchModal");document.getElementById("newMerchantInfo").innerHTML='\n            <div class="merchant-info">\n                <div class="merchant-avatar">\n                    '.concat(n.name.charAt(0).toUpperCase(),'\n                </div>\n                <div class="merchant-details">\n                    <div class="merchant-name">').concat(n.name,'</div>\n                    <div class="merchant-meta">\n                        <span>ID: ').concat(n.id,"</span>\n                        <span>Industry: ").concat(n.industry||"N/A","</span>\n                    </div>\n                </div>\n            </div>\n        "),e.style.display="block",this.pendingMerchant=n}},{key:"hideSwitchModal",value:function(){document.getElementById("sessionSwitchModal").style.display="none",this.pendingMerchant=null}},{key:"confirmSessionSwitch",value:function(){this.pendingMerchant&&(this.endCurrentSession(),this.startSession(this.pendingMerchant),this.onSessionSwitch&&this.onSessionSwitch(this.pendingMerchant),this.hideSwitchModal())}},{key:"startSessionTimer",value:function(){var n=this;this.clearSessionTimer(),this.updateTimer(),this.sessionTimer=setInterval(function(){n.updateTimer(),n.checkSessionTimeout()},1e3)}},{key:"clearSessionTimer",value:function(){this.sessionTimer&&(clearInterval(this.sessionTimer),this.sessionTimer=null)}},{key:"updateTimer",value:function(){if(this.isSessionActive&&this.currentSession){var n=new Date-this.currentSession.startTime,e=this.sessionTimeout-n;if(e<=0)this.handleSessionTimeout();else{var t=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3),i=e/this.sessionTimeout*100,o=document.getElementById("timerText"),a=document.getElementById("timerBar"),r=document.getElementById("statusIndicator");o&&(o.textContent="".concat(t.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"))),a&&(a.style.width="".concat(i,"%")),r&&(r.className="status-indicator",e<3e5?r.classList.add("danger"):e<6e5?r.classList.add("warning"):r.classList.add("active"))}}}},{key:"checkSessionTimeout",value:function(){this.isSessionActive&&this.currentSession&&new Date-this.currentSession.startTime>=this.sessionTimeout&&this.handleSessionTimeout()}},{key:"handleSessionTimeout",value:function(){this.onSessionTimeout&&this.onSessionTimeout(this.currentSession),this.endCurrentSession()}},{key:"addToHistory",value:function(n){var e={merchant:n.merchant,startTime:n.startTime,endTime:new Date,duration:new Date-n.startTime,sessionId:n.sessionId};this.sessionHistory.unshift(e),this.sessionHistory.length>this.maxHistorySize&&(this.sessionHistory=this.sessionHistory.slice(0,this.maxHistorySize)),this.saveSessionToStorage()}},{key:"toggleHistory",value:function(){"none"===document.getElementById("sessionHistory").style.display?this.showHistory():this.hideHistory()}},{key:"showHistory",value:function(){var n=this,e=document.getElementById("sessionHistory"),t=document.getElementById("historyList");0===this.sessionHistory.length?t.innerHTML='\n                <div class="no-history">\n                    <i class="fas fa-history"></i>\n                    <p>No recent sessions</p>\n                </div>\n            ':(t.innerHTML=this.sessionHistory.map(function(e){return'\n                <div class="history-item" data-session-id="'.concat(e.sessionId,'">\n                    <div class="history-avatar">\n                        ').concat(e.merchant.name.charAt(0).toUpperCase(),'\n                    </div>\n                    <div class="history-details">\n                        <div class="history-name">').concat(e.merchant.name,'</div>\n                        <div class="history-meta">\n                            ').concat(n.formatDate(e.startTime)," - ").concat(n.formatDuration(e.duration),"\n                        </div>\n                    </div>\n                </div>\n            ")}).join(""),t.querySelectorAll(".history-item").forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.sessionId,s=n.sessionHistory.find(function(n){return n.sessionId===t});s&&n.switchSession(s.merchant)})})),e.style.display="block"}},{key:"hideHistory",value:function(){document.getElementById("sessionHistory").style.display="none"}},{key:"updateSessionUI",value:function(){var n=document.getElementById("sessionDetails"),e=document.getElementById("endSessionBtn"),t=document.getElementById("sessionHistoryBtn"),s=document.getElementById("statusIndicator"),i=document.getElementById("statusText");this.isSessionActive&&this.currentSession?(n.style.display="block",e.disabled=!1,t.disabled=!1,document.getElementById("merchantAvatar").innerHTML=this.currentSession.merchant.name.charAt(0).toUpperCase(),document.getElementById("merchantName").textContent=this.currentSession.merchant.name,document.getElementById("merchantId").textContent="ID: ".concat(this.currentSession.merchant.id),s.className="status-indicator active",i.textContent="Active session"):(n.style.display="none",e.disabled=!0,t.disabled=0===this.sessionHistory.length,s.className="status-indicator",i.textContent="No active session")}},{key:"saveSessionToStorage",value:function(){var n={currentSession:this.currentSession,sessionHistory:this.sessionHistory,timestamp:(new Date).toISOString()};try{localStorage.setItem(this.storageKey,JSON.stringify(n))}catch(e){}}},{key:"loadSessionFromStorage",value:function(){try{var n=localStorage.getItem(this.storageKey);if(n){var e=JSON.parse(n);if(e.currentSession){var t=new Date(e.currentSession.startTime);new Date-t<this.sessionTimeout?(this.currentSession=e.currentSession,this.isSessionActive=!0):this.addToHistory(e.currentSession)}this.sessionHistory=e.sessionHistory||[]}}catch(s){this.sessionHistory=[]}}},{key:"startSessionMonitoring",value:function(){var n=this;["mousedown","mousemove","keypress","scroll","touchstart"].forEach(function(e){document.addEventListener(e,function(){n.updateLastActivity()},!0)})}},{key:"pauseSessionMonitoring",value:function(){this.clearSessionTimer()}},{key:"resumeSessionMonitoring",value:function(){this.isSessionActive&&this.startSessionTimer()}},{key:"updateLastActivity",value:function(){this.isSessionActive&&this.currentSession&&(this.currentSession.lastActivity=new Date)}},{key:"generateSessionId",value:function(){return"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}},{key:"formatDate",value:function(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}},{key:"formatDuration",value:function(n){var e=Math.floor(n/6e4),t=Math.floor(e/60);return t>0?"".concat(t,"h ").concat(e%60,"m"):"".concat(e,"m")}},{key:"getCurrentSession",value:function(){return this.currentSession}},{key:"isActive",value:function(){return this.isSessionActive}},{key:"getSessionHistory",value:function(){return i(this.sessionHistory)}},{key:"clearHistory",value:function(){this.sessionHistory=[],this.saveSessionToStorage(),this.updateSessionUI()}},{key:"setSessionTimeout",value:function(n){this.sessionTimeout=n,this.isSessionActive&&this.startSessionTimer()}},{key:"destroy",value:function(){this.clearSessionTimer(),this.saveSessionToStorage(),this.container&&(this.container.innerHTML="")}}],e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t}();n.exports&&(n.exports=c),document.addEventListener("DOMContentLoaded",function(){var n=document.getElementById("sessionManagerContainer");n&&!window.sessionManager&&(window.sessionManager=new c({container:n}))})}},function(n){return n.O(0,[96],function(){return e=7746,n(n.s=e);var e}),n.O()}])});
//# sourceMappingURL=session-manager.55ba58f2.js.map