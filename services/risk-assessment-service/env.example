# Risk Assessment Service Environment Variables
# Copy this file to .env and fill in the actual values

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
ENVIRONMENT=development
SERVICE_NAME=risk-assessment-service
SERVICE_VERSION=1.0.0
SERVICE_DESCRIPTION="Enhanced Risk Assessment Service with ML-powered predictions"

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=8080
HOST=0.0.0.0
READ_TIMEOUT=30s
WRITE_TIMEOUT=30s
IDLE_TIMEOUT=120s
MAX_HEADER_BYTES=1048576

# =============================================================================
# DATABASE CONFIGURATION (Supabase)
# =============================================================================
# Production Database
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres
SUPABASE_URL=https://[YOUR-PROJECT-REF].supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.[YOUR-ANON-KEY]
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.[YOUR-SERVICE-ROLE-KEY]
SUPABASE_JWT_SECRET=[YOUR-JWT-SECRET]

# Staging Database (if different)
STAGING_DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-STAGING-PROJECT-REF].supabase.co:5432/postgres
STAGING_SUPABASE_URL=https://[YOUR-STAGING-PROJECT-REF].supabase.co
STAGING_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.[YOUR-STAGING-ANON-KEY]
STAGING_SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.[YOUR-STAGING-SERVICE-ROLE-KEY]
STAGING_SUPABASE_JWT_SECRET=[YOUR-STAGING-JWT-SECRET]

# Test Database (for CI/CD)
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/test_risk_assessment?sslmode=disable

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Production Redis
REDIS_URL=redis://default:[YOUR-REDIS-PASSWORD]@[YOUR-REDIS-HOST]:6379
REDIS_PASSWORD=[YOUR-REDIS-PASSWORD]
REDIS_DB=0
REDIS_POOL_SIZE=50
REDIS_MIN_IDLE_CONNS=10
REDIS_MAX_IDLE_CONNS=20
REDIS_DIAL_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s
REDIS_POOL_TIMEOUT=4s
REDIS_IDLE_TIMEOUT=5m
REDIS_MAX_RETRIES=3
REDIS_ENABLE_FALLBACK=true
REDIS_FALLBACK_TO_MEMORY=true
REDIS_KEY_PREFIX=ra:

# Staging Redis (if different)
STAGING_REDIS_URL=redis://default:[YOUR-STAGING-REDIS-PASSWORD]@[YOUR-STAGING-REDIS-HOST]:6379
STAGING_REDIS_PASSWORD=[YOUR-STAGING-REDIS-PASSWORD]

# Test Redis (for CI/CD)
TEST_REDIS_URL=redis://localhost:6379

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_ENABLE_CALLER=false
LOG_ENABLE_STACKTRACE=false

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
MONITORING_ENABLED=true
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30s
PERFORMANCE_MONITORING=true

# Prometheus Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_METRICS_PATH=/metrics

# Grafana Configuration
GRAFANA_ENABLED=true
GRAFANA_DASHBOARD_URL=https://grafana.kyb-platform.com

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
RATE_LIMITING_ENABLED=true
RATE_LIMITING_REQUESTS_PER_MINUTE=1000
RATE_LIMITING_BURST_ALLOWANCE=100
RATE_LIMITING_WINDOW_SIZE=1m
RATE_LIMITING_USE_REDIS=true
RATE_LIMITING_REDIS_KEY_PREFIX=rate_limit:

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================
AUTH_REQUIRE_AUTH=true
AUTH_ALLOW_SERVICE_AUTH=true
AUTH_ALLOW_API_KEY_AUTH=true
AUTH_ALLOW_JWT_AUTH=true
JWT_SECRET=[YOUR-JWT-SECRET]
API_KEY_HEADER=X-API-Key
SERVICE_TOKEN=[YOUR-SERVICE-TOKEN]
TOKEN_CACHE_TTL=1h

# Staging Authentication
STAGING_JWT_SECRET=[YOUR-STAGING-JWT-SECRET]
STAGING_SERVICE_TOKEN=[YOUR-STAGING-SERVICE-TOKEN]

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# CORS Configuration
CORS_ALLOWED_ORIGINS=https://kyb-platform.com,https://app.kyb-platform.com,https://admin.kyb-platform.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,X-API-Key,X-User-ID,X-Tenant-ID,X-Service-Token,X-Service-ID
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400

# Security Headers
SECURITY_ENABLE_HSTS=true
SECURITY_ENABLE_CSP=true
SECURITY_ENABLE_XSS_PROTECTION=true
SECURITY_ENABLE_FRAME_OPTIONS=true
SECURITY_ENABLE_CONTENT_TYPE_OPTIONS=true
SECURITY_ENABLE_REFERRER_POLICY=true

# Request Limits
REQUEST_SIZE_LIMIT=5242880
REQUEST_TIMEOUT=15s

# =============================================================================
# ML CONFIGURATION
# =============================================================================
ML_MODELS_PATH=./models
ML_CACHE_ENABLED=true
ML_CACHE_TTL=4h
ML_BATCH_SIZE=1000
ML_MAX_CONCURRENT_REQUESTS=50
ML_MODEL_UPDATE_INTERVAL=6h
ML_ENABLE_MODEL_VALIDATION=true
ML_VALIDATION_THRESHOLD=0.9

# =============================================================================
# EXTERNAL APIs CONFIGURATION
# =============================================================================
# NewsAPI
NEWSAPI_BASE_URL=https://newsapi.org/v2
NEWSAPI_API_KEY=[YOUR-NEWSAPI-KEY]
NEWSAPI_TIMEOUT=10s
NEWSAPI_RETRY_ATTEMPTS=3
NEWSAPI_RETRY_DELAY=1s
NEWSAPI_RATE_LIMIT=1000

# Staging NewsAPI
STAGING_NEWSAPI_KEY=[YOUR-STAGING-NEWSAPI-KEY]

# OpenCorporates
OPENCORPORATES_BASE_URL=https://api.opencorporates.com/v0.4
OPENCORPORATES_API_KEY=[YOUR-OPENCORPORATES-API-KEY]
OPENCORPORATES_TIMEOUT=10s
OPENCORPORATES_RETRY_ATTEMPTS=3
OPENCORPORATES_RETRY_DELAY=1s
OPENCORPORATES_RATE_LIMIT=500

# Staging OpenCorporates
STAGING_OPENCORPORATES_API_KEY=[YOUR-STAGING-OPENCORPORATES-API-KEY]

# Thomson Reuters
THOMSON_REUTERS_BASE_URL=https://api.thomsonreuters.com
THOMSON_REUTERS_API_KEY=[YOUR-THOMSON-REUTERS-API-KEY]
THOMSON_REUTERS_TIMEOUT=15s
THOMSON_REUTERS_RETRY_ATTEMPTS=3
THOMSON_REUTERS_RETRY_DELAY=2s
THOMSON_REUTERS_RATE_LIMIT=10000

# Staging Thomson Reuters
STAGING_THOMSON_REUTERS_API_KEY=[YOUR-STAGING-THOMSON-REUTERS-API-KEY]

# OFAC
OFAC_BASE_URL=https://api.treasury.gov
OFAC_API_KEY=[YOUR-OFAC-API-KEY]
OFAC_TIMEOUT=10s
OFAC_RETRY_ATTEMPTS=3
OFAC_RETRY_DELAY=1s
OFAC_RATE_LIMIT=1000

# Staging OFAC
STAGING_OFAC_API_KEY=[YOUR-STAGING-OFAC-API-KEY]

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================
WEBHOOKS_ENABLED=true
WEBHOOKS_MAX_RETRIES=5
WEBHOOKS_RETRY_DELAY=5s
WEBHOOKS_TIMEOUT=10s
WEBHOOKS_SIGNATURE_VALIDATION=true
WEBHOOKS_RATE_LIMIT=500

# =============================================================================
# BATCH PROCESSING CONFIGURATION
# =============================================================================
BATCH_PROCESSING_ENABLED=true
BATCH_PROCESSING_MAX_BATCH_SIZE=10000
BATCH_PROCESSING_TIMEOUT=2h
BATCH_PROCESSING_WORKER_POOL_SIZE=20
BATCH_PROCESSING_QUEUE_SIZE=100000
BATCH_PROCESSING_RETRY_ATTEMPTS=5
BATCH_PROCESSING_RETRY_DELAY=10s

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
PERFORMANCE_ENABLE_PROFILING=false
PERFORMANCE_PROFILING_PORT=6060
PERFORMANCE_ENABLE_TRACING=true
PERFORMANCE_TRACE_SAMPLE_RATE=0.01
PERFORMANCE_ENABLE_METRICS=true
PERFORMANCE_METRICS_PORT=9090

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_ENABLE_ADVANCED_ML=true
FEATURE_ENABLE_BATCH_PROCESSING=true
FEATURE_ENABLE_WEBHOOKS=true
FEATURE_ENABLE_REAL_TIME_UPDATES=true
FEATURE_ENABLE_ANALYTICS=true
FEATURE_ENABLE_AUDIT_LOGGING=true
FEATURE_ENABLE_PERFORMANCE_MONITORING=true
FEATURE_ENABLE_CIRCUIT_BREAKER=true
FEATURE_ENABLE_RETRY_LOGIC=true
FEATURE_ENABLE_CACHING=true
FEATURE_ENABLE_COMPRESSION=true
FEATURE_ENABLE_RATE_LIMITING=true
FEATURE_ENABLE_AUTHENTICATION=true
FEATURE_ENABLE_AUTHORIZATION=true
FEATURE_ENABLE_ENCRYPTION=true
FEATURE_ENABLE_SSL=true

# =============================================================================
# DEBUG CONFIGURATION
# =============================================================================
DEBUG_ENABLE_PPROF=false
DEBUG_ENABLE_TRACE=true
DEBUG_ENABLE_METRICS=true
DEBUG_LOG_LEVEL=info
DEBUG_LOG_REQUESTS=false
DEBUG_LOG_RESPONSES=false
DEBUG_LOG_ERRORS=true
DEBUG_LOG_PERFORMANCE=true
DEBUG_LOG_DATABASE_QUERIES=false
DEBUG_LOG_REDIS_OPERATIONS=false
DEBUG_LOG_EXTERNAL_API_CALLS=false
DEBUG_LOG_ML_PREDICTIONS=false
DEBUG_LOG_WEBHOOK_DELIVERIES=true
DEBUG_LOG_BATCH_PROCESSING=true

# =============================================================================
# ALERTING CONFIGURATION
# =============================================================================
ALERTING_ENABLED=true
SLACK_WEBHOOK_URL=[YOUR-SLACK-WEBHOOK-URL]
PAGERDUTY_INTEGRATION_KEY=[YOUR-PAGERDUTY-INTEGRATION-KEY]
ALERT_EMAIL_RECIPIENTS=alerts@kyb-platform.com,devops@kyb-platform.com

# Staging Alerting
STAGING_SLACK_WEBHOOK=[YOUR-STAGING-SLACK-WEBHOOK-URL]

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_FREQUENCY=daily
BACKUP_RETENTION_DAYS=30
BACKUP_VERIFICATION_ENABLED=true
BACKUP_TEST_RESTORE_FREQUENCY=weekly
BACKUP_POINT_IN_TIME_RECOVERY=true
BACKUP_PITR_RETENTION_HOURS=168

# =============================================================================
# COMPLIANCE CONFIGURATION
# =============================================================================
# GDPR
GDPR_ENABLED=true
GDPR_DATA_RETENTION_DAYS=2555
GDPR_RIGHT_TO_ERASURE=true
GDPR_DATA_PORTABILITY=true

# SOC2
SOC2_ENABLED=true
SOC2_AUDIT_LOGGING=true
SOC2_ACCESS_CONTROL=true
SOC2_DATA_ENCRYPTION=true

# ISO27001
ISO27001_ENABLED=true
ISO27001_SECURITY_MANAGEMENT=true
ISO27001_RISK_ASSESSMENT=true
ISO27001_INCIDENT_RESPONSE=true

# =============================================================================
# DISASTER RECOVERY CONFIGURATION
# =============================================================================
DISASTER_RECOVERY_RTO=1h
DISASTER_RECOVERY_RPO=1m
DISASTER_RECOVERY_BACKUP_FREQUENCY=hourly
DISASTER_RECOVERY_CROSS_REGION_REPLICATION=true
DISASTER_RECOVERY_AUTOMATED_FAILOVER=true
DISASTER_RECOVERY_HEALTH_CHECK_INTERVAL=30s

# =============================================================================
# OPTIMIZATION CONFIGURATION
# =============================================================================
# Connection Pooling
OPTIMIZATION_CONNECTION_POOLING_ENABLED=true
OPTIMIZATION_MAX_CONNECTIONS=100
OPTIMIZATION_MIN_CONNECTIONS=10

# Caching
OPTIMIZATION_CACHING_ENABLED=true
OPTIMIZATION_CACHE_SIZE=1GB
OPTIMIZATION_CACHE_TTL=1h

# Compression
OPTIMIZATION_COMPRESSION_ENABLED=true
OPTIMIZATION_COMPRESSION_ALGORITHM=gzip
OPTIMIZATION_COMPRESSION_LEVEL=6

# Load Balancing
OPTIMIZATION_LOAD_BALANCING_ENABLED=true
OPTIMIZATION_LOAD_BALANCING_ALGORITHM=round_robin
OPTIMIZATION_LOAD_BALANCING_HEALTH_CHECK_INTERVAL=30s

# =============================================================================
# COST OPTIMIZATION CONFIGURATION
# =============================================================================
# Auto Scaling
COST_AUTO_SCALING_ENABLED=true
COST_AUTO_SCALING_MIN_REPLICAS=2
COST_AUTO_SCALING_MAX_REPLICAS=10
COST_AUTO_SCALING_TARGET_CPU_UTILIZATION=70
COST_AUTO_SCALING_TARGET_MEMORY_UTILIZATION=80

# Resource Limits
COST_RESOURCE_LIMITS_CPU=1000m
COST_RESOURCE_LIMITS_MEMORY=2Gi
COST_RESOURCE_LIMITS_STORAGE=10Gi

# Monitoring
COST_MONITORING_ENABLED=true
COST_ALERTS_ENABLED=true
COST_BUDGET_THRESHOLD=1000

# =============================================================================
# RAILWAY CONFIGURATION
# =============================================================================
RAILWAY_TOKEN=[YOUR-RAILWAY-TOKEN]
RAILWAY_PROJECT_ID=[YOUR-RAILWAY-PROJECT-ID]
RAILWAY_ENVIRONMENT=production

# =============================================================================
# GITHUB ACTIONS CONFIGURATION
# =============================================================================
GITHUB_TOKEN=[YOUR-GITHUB-TOKEN]
GITHUB_REPOSITORY=kyb-platform/risk-assessment-service

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
TESTING_ENABLED=true
TESTING_TIMEOUT=30s
TESTING_ENABLE_MOCKS=false
TESTING_MOCK_EXTERNAL_SERVICES=false
TESTING_DATA_CLEANUP=true

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
# Development-specific settings (only for local development)
DEV_ENABLE_DEBUG_ENDPOINTS=false
DEV_ENABLE_SWAGGER=true
DEV_SWAGGER_PATH=/docs
DEV_ENABLE_CORS_DEBUG=false
DEV_MOCK_EXTERNAL_APIS=false
DEV_ENABLE_TEST_DATA=false
DEV_TEST_DATA_PATH=./testdata
DEV_ENABLE_HOT_RELOAD=false
DEV_LOG_SQL_QUERIES=false
DEV_LOG_REDIS_COMMANDS=false
DEV_ENABLE_PERFORMANCE_LOGGING=true

# =============================================================================
# NOTES
# =============================================================================
# 1. Replace [YOUR-*] placeholders with actual values
# 2. Never commit this file with real credentials
# 3. Use Railway's environment variable management for production
# 4. Keep staging and production credentials separate
# 5. Rotate credentials regularly
# 6. Use strong, unique passwords and API keys
# 7. Enable 2FA on all external services
# 8. Monitor for credential leaks
# 9. Use least-privilege access principles
# 10. Document all environment variables in the README
