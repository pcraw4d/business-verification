# LSTM Model Configuration

# Data Configuration
data:
  sequence_length: 12  # months of history
  feature_count: 20    # features per timestep
  prediction_horizons: [6, 9, 12]  # months to predict
  businesses_per_industry: 1250
  total_businesses: 10000
  random_seed: 42

# Model Architecture
model:
  name: "risk_prediction_lstm"
  version: "1.0.0"
  type: "lstm_attention"
  
  # LSTM layers
  lstm_layers: 2
  hidden_units: 128
  dropout: 0.3
  
  # Attention mechanism
  attention_heads: 4
  attention_dim: 64
  
  # Output layers
  output_heads: 3  # one for each prediction horizon
  output_activation: "sigmoid"
  
  # Regularization
  l2_regularization: 0.001
  gradient_clipping: 1.0

# Training Configuration
training:
  batch_size: 64
  epochs: 100
  learning_rate: 0.001
  learning_rate_schedule: "cosine_annealing"
  warmup_epochs: 10
  
  # Early stopping
  early_stopping:
    patience: 15
    min_delta: 0.001
    monitor: "val_loss"
  
  # Loss function
  loss:
    type: "mse_risk_aware"
    risk_weight: 2.0  # Penalize high-risk misses more
    uncertainty_weight: 0.1
  
  # Optimizer
  optimizer:
    type: "adam"
    beta1: 0.9
    beta2: 0.999
    epsilon: 0.00000001
    weight_decay: 0.01

# Validation Configuration
validation:
  test_size: 0.2
  val_size: 0.1
  cross_validation_folds: 5
  
  # Metrics to track
  metrics:
    - "mse"
    - "mae"
    - "accuracy"
    - "precision"
    - "recall"
    - "f1_score"
    - "r2_score"

# Target Performance
targets:
  accuracy_6mo: 0.88
  accuracy_9mo: 0.86
  accuracy_12mo: 0.85
  latency_p95: 150  # milliseconds
  memory_usage: 1.5  # GB

# Industries to include
industries:
  - "technology"
  - "finance"
  - "healthcare"
  - "manufacturing"
  - "retail"
  - "energy"
  - "real_estate"
  - "transportation"

# Feature Engineering
features:
  # Time-based features
  time_features:
    - "month"
    - "quarter"
    - "year"
    - "day_of_year"
  
  # Lagged features
  lagged_features:
    - 1   # previous month
    - 3   # 3 months ago
    - 6   # 6 months ago
    - 12  # 12 months ago
  
  # Moving averages
  moving_averages:
    - 3   # 3-month average
    - 6   # 6-month average
    - 12  # 12-month average
  
  # Volatility measures
  volatility_windows:
    - 3   # 3-month volatility
    - 6   # 6-month volatility
    - 12  # 12-month volatility
  
  # Statistical features
  statistical_features:
    - "mean"
    - "std"
    - "min"
    - "max"
    - "skewness"
    - "kurtosis"

# Data Augmentation
augmentation:
  enabled: true
  noise_factor: 0.05
  time_shift_range: 2  # months
  feature_dropout: 0.1

# Export Configuration
export:
  onnx_opset_version: 14
  optimize_for_inference: true
  dynamic_axes: true
  output_format: "onnx"
  
  # Model quantization (optional)
  quantization:
    enabled: false
    method: "dynamic"
    target_ops: ["Conv", "Linear"]

# Monitoring and Logging
monitoring:
  use_tensorboard: true
  use_wandb: false
  log_interval: 100
  save_checkpoints: true
  checkpoint_interval: 10
  
  # Metrics to log
  log_metrics:
    - "loss"
    - "val_loss"
    - "accuracy"
    - "learning_rate"
    - "gradient_norm"

# Paths
paths:
  data_dir: "data/"
  model_dir: "models/"
  output_dir: "output/"
  checkpoint_dir: "checkpoints/"
  log_dir: "logs/"
  
  # File names
  data_file: "synthetic_risk_data.parquet"
  preprocessor_file: "preprocessor.pkl"
  model_file: "risk_lstm_v1.pth"
  onnx_file: "risk_lstm_v1.onnx"
  config_file: "model_config.yaml"